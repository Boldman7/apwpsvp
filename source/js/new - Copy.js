var i=0,partTime=0,randomTime=0,playSequence=0,partFirstRandomTime=0,partSecondRandomTime=0,randomVal=0,partFlag=0,measureTime=0,randomClipMode=0,wpsvpjq=jQuery;!function(e){var t=function(){};t.test=document.createElement("div"),t.isEmpty=function(e){return 0==e.replace(/^\s+|\s+$/g,"").length},t.strip=function(e){return e.replace(/^\s+|\s+$/g,"")},t.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},t.isMobile=function(){return/Android|webOS|iPhone|iPad|iPod|sony|BlackBerry/i.test(navigator.userAgent)},t.isIE=function(){return-1!=t.getInternetExplorerVersion()},t.isChrome=function(){return!!e.chrome&&!!e.chrome.webstore},t.isSafari=function(){return 0<Object.prototype.toString.call(e.HTMLElement).indexOf("Constructor")},t.hasLocalStorage=function(){try{return"localStorage"in e&&null!==e.localStorage}catch(e){return!1}},t.getInternetExplorerVersion=function(){var e=-1;if("Microsoft Internet Explorer"==navigator.appName){var t=navigator.userAgent,i=/MSIE ([0-9]{1,}[.0-9]{0,})/;null!=i.exec(t)&&(e=parseFloat(RegExp.$1))}else"Netscape"==navigator.appName&&(t=navigator.userAgent,null!=(i=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/).exec(t)&&(e=parseFloat(RegExp.$1)));return e},t.isIOS=function(){return navigator.userAgent.match(/(iPad|iPhone|iPod)/g)},t.isiPhoneIpod=function(){var e=navigator.userAgent;return-1<e.indexOf("iPhone")||-1<e.indexOf("iPod")},t.isAndroid=function(){return-1<navigator.userAgent.indexOf("Android")},t.hasHistory=function(){return!(!e.history||!history.pushState)},t.hasDownloadSupport=function(){return"download"in document.createElement("a")},t.volumeCanBeSet=function(){var e=document.createElement("audio");return!!e&&(e.volume=0,0==e.volume)},t.supportsWebGL=function(){try{return!!e.WebGLRenderingContext&&!!document.createElement("canvas").getContext("experimental-webgl")}catch(e){return!1}},t.canPlayMp4=function(){var e=document.createElement("video");return!(!e.canPlayType||!e.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"').replace(/no/,""))},t.canPlayMp3=function(){var e=document.createElement("audio");return!(!e.canPlayType||!e.canPlayType("audio/mpeg;").replace(/no/,""))},t.canPlayWav=function(){var e=document.createElement("audio");return!(!e.canPlayType||!e.canPlayType("audio/wav;").replace(/no/,""))},t.relativePath=function(e){return/^(?:[a-z]+:)?\/\//i.test(e)},t.qualifyURL=function(e){var t=document.createElement("a");return t.href=e,t.href},t.hasFullscreen=function(){return t.test.requestFullscreen||t.test.mozRequestFullScreen||t.test.msRequestFullscreen||t.test.oRequestFullscreen||t.test.webkitRequestFullScreen},t.selectText=function(t){var i=document;if(i.body.createTextRange)(i=i.body.createTextRange()).moveToElementText(t),i.select();else if(e.getSelection){var a=e.getSelection();(i=i.createRange()).selectNodeContents(t),a.removeAllRanges(),a.addRange(i)}},t.randomiseArray=function(e){var t,i=[],a=[];for(t=0;t<e;t++)i[t]=t;for(t=0;t<e;t++){var n=Math.round(Math.random()*(i.length-1));a[t]=i[n],i.splice(n,1)}return a},t.sortArray=function(e,t){var i,a=e.length,n=[];for(i=0;i<a;i++)n[i]=e[t[i]];return n},t.keysrt=function(e,t,i){var a=1;return i&&(a=-1),e.sort(function(e,i){var n=e[t],o=i[t];return a*(n<o?-1:n>o?1:0)})},t.formatTime=function(e){e=parseInt(e,10);var t=Math.floor(e/3600),i=Math.floor((e-3600*t)/60);return e=e-3600*t-60*i,0<t?(10>t&&(t="0"+t),10>i&&(i="0"+i),10>e&&(e="0"+e),t+":"+i+":"+e):(10>i&&(i="0"+i),10>e&&(e="0"+e),i+":"+e)},t.toSeconds=function(e){return e=e.split(/[\.:,]+/),Number(3600*+e[0]+60*+e[1]+ +e[2])},t.isScrolledIntoView=function(t){var i=(t=t.getBoundingClientRect()).bottom;return 0<=t.top&&i<=e.innerHeight},t.getElementOffsetTop=function(t){t=t.getBoundingClientRect();var i=document.body,a=document.documentElement;return Math.round(t.bottom-100+(e.pageYOffset||a.scrollTop||i.scrollTop)-(a.clientTop||i.clientTop||0))},t.getScrollTop=function(t){return t=document.documentElement,(e.pageYOffset||t.scrollTop)-(t.clientTop||0)},t.rgbToHex=function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)?e:(e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===e.length?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""},t.getUrlParameter=function(t){var i={};return e.location.search.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,t,a){i[t]=a}),t?i[t]:i},t.checkCssExist=function(e){for(var t=document.styleSheets,i=0,a=t.length;i<a;i++)if(t[i].href==e)return;(t=document.createElement("link")).rel="stylesheet",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)},e.WPSVPUtils=t}(window),function(e,t){e.WPSVPYoutubeLoader=function(e){function i(e){t.ajax({url:"https://www.googleapis.com/youtube/v3/videos?id="+e+"&key="+b+"&part=statistics,contentDetails",dataType:"jsonp"}).done(function(e){if(e.error&&e.error.message)console.log(e.error.message);else{var i,a=e.items.length;for(i=0;i<a;i++){var n=e.items[i];m[i].statistics=n.statistics;var o=m[i],r=n.contentDetails.duration,s=r.match(/\d+/g);0<=r.indexOf("M")&&-1==r.indexOf("H")&&-1==r.indexOf("S")&&(s=[0,s[0],0]),0<=r.indexOf("H")&&-1==r.indexOf("M")&&(s=[s[0],0,s[1]]),0<=r.indexOf("H")&&-1==r.indexOf("M")&&-1==r.indexOf("S")&&(s=[s[0],0,0]),r=0,3==s.length&&(r+=3600*parseInt(s[0]),r+=60*parseInt(s[1]),r+=parseInt(s[2])),2==s.length&&(r+=60*parseInt(s[0]),r+=parseInt(s[1])),1==s.length&&(r+=parseInt(s[0])),o.duration=r,"360"==n.contentDetails.projection&&(m[i].is360=!0)}t(f).trigger("WPSVPYoutubeLoader.END_LOAD",{info:c,data:m,nextPageToken:d})}}).fail(function(e,t,i){console.log(e,t,i)})}function a(e){t.ajax({url:e,dataType:"jsonp"}).done(function(e){if(e.error&&e.error.message)console.log(e.error.message);else{var s,u=e.items.length;for((d=e.nextPageToken)&&(d=l+"&pageToken="+d),s=0;s<u&&m.length!=p;s++){var h=e.items[s];"youtube_playlist"==o||"youtube_single"==o||"youtube_single_list"==o?h.status&&"private"!=h.status.privacyStatus&&(!h.snippet.title||"Deleted video"!=h.snippet.title)&&m.push(n(h,o)):("youtube_video_query"==o||"youtube_channel"==o)&&m.push(n(h,o))}if("youtube_single"==o||"youtube_single_list"==o)t(f).trigger("WPSVPYoutubeLoader.END_LOAD",{info:c,data:m,nextPageToken:d});else if(m.length<p)if(e.nextPageToken){if(m.length+g>p&&(g=p-m.length),"youtube_playlist"==o)var w="https://www.googleapis.com/youtube/v3/playlistItems?pageToken="+e.nextPageToken+"&part=snippet,status,contentDetails&maxResults="+g+"&playlistId="+r.path+"&key="+b;else"youtube_video_query"==o?w="https://www.googleapis.com/youtube/v3/search?pageToken="+e.nextPageToken+"&part=id,snippet&type=video&maxResults="+g+"&order="+v+"&q="+encodeURIComponent(r.path)+"&key="+b:"youtube_channel"!=o&&"youtube_user"!=o||(w="https://www.googleapis.com/youtube/v3/search?pageToken="+e.nextPageToken+"&part=id,snippet&type=video&maxResults="+g+"&order=date&channelId="+r.path+"&key="+b);a(w)}else if(y&&m.length){for(e="",u=m.length,s=0;s<u;s++)e+=m[s].id+",";i(e=e.substr(0,e.length-1))}else t(f).trigger("WPSVPYoutubeLoader.END_LOAD",{info:c,data:m,nextPageToken:d});else if(y){for(e="",u=m.length,s=0;s<u;s++)e+=m[s].id+",";i(e=e.substr(0,e.length-1))}else t(f).trigger("WPSVPYoutubeLoader.END_LOAD",{info:c,data:m,nextPageToken:d})}}).fail(function(e,t,i){console.log(e,t,i)})}function n(e,t){var i=jQuery.extend(!0,{},r);return i.type="youtube",i.deeplink&&"youtube_single"!=i.origtype&&(i.deeplink+=s.toString(),s++),"youtube_single"==t||"youtube_single_list"==t?i.id=e.id:"youtube_playlist"==t?i.id=e.contentDetails.videoId:"youtube_video_query"!=t&&"youtube_channel"!=t||(i.id=e.id.videoId),e.snippet&&(i.snippet=e.snippet,e.snippet.publishedAt&&(i.publishedAt=e.snippet.publishedAt)),!i.title&&e.snippet.title&&(i.title=e.snippet.title),!i.description&&e.snippet.description&&(i.description=e.snippet.description),i.url||(i.url="https://www.youtube.com/watch?v="+i.id),e.contentDetails&&e.contentDetails.projection&&"360"==e.contentDetails.projection&&(i.is360=!0),e.statistics&&(i.statistics=e.statistics),i}var o,r,s,l,d,u,c,p,v,h,f=this,m=[],g=50,y=e.getStats,b=e.youtubeAppId;this.resumeLoad=function(e){m=[],e?(l=e.substr(0,e.lastIndexOf("&pageToken=")),a(e)):t(f).trigger("WPSVPYoutubeLoader.END_LOAD",{data:m,nextPageToken:e})},this.getData=function(e){if(c=null,"youtube_channel"==e.type){var i="https://www.googleapis.com/youtube/v3/channels?part=id,snippet,statistics,brandingSettings&id="+e.path+"&fields=items(id,snippet%2Ftitle,snippet%2Fdescription,snippet%2FpublishedAt,snippet%2Fthumbnails,statistics%2FsubscriberCount,statistics%2FviewCount,statistics%2FvideoCount,brandingSettings%2Fimage)&key="+b;t.ajax({url:i,dataType:"jsonp"}).done(function(t){(c=t).fetch_type=e.type,f.setData(e)}).fail(function(e,t,i){console.log(e,t,i)})}else"youtube_playlist"==e.type?f.setData(e):"youtube_video_query"==e.type?f.setData(e):"youtube_user"==e.type&&(i="https://www.googleapis.com/youtube/v3/channels?part=id,snippet,statistics,brandingSettings&forUsername="+e.path+"&fields=items(id,snippet%2Ftitle,snippet%2Fdescription,snippet%2FpublishedAt,snippet%2Fthumbnails,statistics%2FsubscriberCount,statistics%2FviewCount,statistics%2FvideoCount,brandingSettings%2Fimage)&key="+b,t.ajax({url:i,dataType:"jsonp"}).done(function(t){c=t,e.type="youtube_channel",e.path=t.items[0].id,c.fetch_type=e.type,f.setData(e)}).fail(function(e,t,i){console.log(e,t,i)}))},this.getChannelId=function(){return h},this.setDataFromCache=function(e){m=[],(p=(r=e).limit||400)<(g=50)&&(g=p),v=r.sort||"relevance",o=r.type},this.setData=function(e){if(b){if(m=[],s=0,(p=(r=e).limit||400)<(g=50)&&(g=p),v=r.sort||"relevance",o=r.type,d=null,"youtube_single"==o||"youtube_single_list"==o)l="https://www.googleapis.com/youtube/v3/videos?id="+r.path+"&key="+b+"&part=snippet,contentDetails,status,statistics";else if("youtube_playlist"==o)l="https://www.googleapis.com/youtube/v3/playlistItems?part=snippet,status,contentDetails&maxResults="+g+"&playlistId="+r.path+"&key="+b;else if("youtube_video_query"==o)l="https://www.googleapis.com/youtube/v3/search?part=id,snippet&type=video&maxResults="+g+"&order="+v+"&q="+encodeURIComponent(r.path)+"&key="+b;else{if("youtube_channel"!=o)return void("youtube_user"==o?t.ajax({url:"https://www.googleapis.com/youtube/v3/channels?part=id&forUsername="+r.path+"&fields=items(id)&key="+b,dataType:"jsonp"}).done(function(t){o=e.type="youtube_channel",h=t.items[0].id,e.path=h,c&&(c.fetch_type=e.type),f.setData(e)}).fail(function(e,t,i){console.log(e,t,i)}):console.log("Wrong youtube type!"));l="https://www.googleapis.com/youtube/v3/search?part=id,snippet&type=video&order=date&maxResults="+g+"&order=date&channelId="+r.path+"&key="+b}a(l)}else alert("Youtube API key missing! Set API key in settings.")},this.getChannelInfo=function(e){t.ajax({url:"https://www.googleapis.com/youtube/v3/channels?part=snippet,statistics&id="+e+"&fields=items(snippet%2Fthumbnails,statistics%2FsubscriberCount)&key="+b,dataType:"jsonp"}).done(function(e){t(f).trigger("WPSVPYoutubeLoader.CHANNEL_INFO",{data:e})}).fail(function(e,t,i){console.log(e,t,i)})},this.getComments=function(e){u="https://www.googleapis.com/youtube/v3/commentThreads?part=snippet,replies&order=time&videoId="+e+"&key="+b,t.ajax({url:u,dataType:"jsonp"}).done(function(e){t(f).trigger("WPSVPYoutubeLoader.COMMENTS_END_LOAD",{data:e})}).fail(function(e,i,a){console.log(e,i,a),t(f).trigger("WPSVPYoutubeLoader.COMMENTS_ERROR_LOAD")})},this.resumeComments=function(e){u+="&pageToken="+e,t.ajax({url:u,dataType:"jsonp"}).done(function(e){t(f).trigger("WPSVPYoutubeLoader.COMMENTS_END_LOAD",{data:e})}).fail(function(e,i,a){console.log(e,i,a),t(f).trigger("WPSVPYoutubeLoader.COMMENTS_ERROR_LOAD")})},this.getNextPageToken=function(){return d}}}(window,jQuery),function(e,t){e.WPSVPVimeoLoader=function(i){function a(e){t.ajax({type:"GET",url:c+"includes/vimeo/vimeo_data.php",data:{type:"next_page",path:e,vai:f},dataType:"json"}).done(function(e){n(e)}).fail(function(e,t,i){console.log(e,t,i)})}function n(e){var i;s=e.body.paging&&e.body.paging.next?e.body.paging.next:null;var n=e.body.data?e.body.data.length:1;for(i=0;i<n&&h.length!=r;i++){var d=e.body.uri?e.body:e.body.data[i];h.push(o(d))}h.length<r&&s?(h.length+p>r&&(p=r-h.length,e=s.split("per_page=")[1].split("&")[0],s=s.replace("per_page="+e,"per_page="+p)),a(s)):t(u).trigger("WPSVPVimeoLoader.END_LOAD",{info:l,data:h,nextPageToken:s})}function o(e){var i=t.extend(!0,{},v);return i.deeplink&&"vimeo_single"!=i.origtype&&(i.deeplink+=(d+1).toString(),d++),i.type="vimeo",-1<e.uri.indexOf(":")&&(e.uri=e.uri.substr(0,e.uri.lastIndexOf(":"))),i.id=e.uri.substr(e.uri.lastIndexOf("/")+1),e.duration&&(i.duration=e.duration),!i.title&&e.name&&(i.title=e.name),!i.description&&e.description&&(i.description=e.description),!i.thumb&&e.pictures&&(i.pictures=e.pictures),i.url||(i.url="https://vimeo.com/"+i.id),i.release_time=e.release_time,i.plays=e.stats.plays,i.comments=e.metadata.connections.comments.total,i.likes=e.metadata.connections.likes.total,i.categories=e.categories,i.user=e.user,e.download&&e.download.link&&(i.download=e.download.link),i}var r,s,l,d,u=this,c=i.sourcePath,p=100,v=[],h=[],f=i.vai;this.resumeLoad=function(e){h=[],e?a(e):t(u).trigger("WPSVPVimeoLoader.END_LOAD",{data:h,nextPageToken:e})},this.getData=function(e){l=null,"vimeo_channel"==e.type||"vimeo_group"==e.type||"vimeo_user_album"==e.type?t.ajax({type:"GET",url:c+"includes/vimeo/vimeo_data.php",data:{type:"vimeo_user_album"==e.type?"vimeo_user_info":e.type+"_info",path:e.path,user_id:e.user_id,vai:f},dataType:"json"}).done(function(t){(l=t.body).fetch_type=e.type,u.setData(e)}).fail(function(e,t,i){console.log(e,t,i)}):"vimeo_album"==e.type?u.setData(e):"vimeo_video_query"==e.type&&u.setData(e)},this.setDataFromCache=function(e){h=[],p=100,(r=(v=e).limit||1e3)<p&&(p=r)},this.setData=function(i){if("file:"==e.location.protocol)console.log("Using Vimeo locally is not possible! This requires online server connection!");else{h=[],p=100,(r=(v=i).limit||1e3)<p&&(p=r),d=0,s=null,"vimeo_single"==v.type&&-1<v.path.indexOf("/")&&(v.path=v.path.replace("/",":"));var a=c+"includes/vimeo/vimeo_data.php";i={type:v.type,path:v.path,user_id:v.user_id,sort:v.sort,sortDirection:v.sortDirection,page:1,perPage:r<p?r:p,vai:f},t.ajax({type:"GET",url:a,data:i,dataType:"json"}).done(function(e){if(!e.body)return console.log("Vimeo response null!"),!1;n(e)}).fail(function(e,t,i){console.log(e,t,i)})}},this.getComments=function(e,i){t.ajax({type:"GET",url:c+"includes/vimeo/vimeo_data.php",data:{type:"video_comments",video_id:e,sortDirection:"desc",page:1,perPage:i,vai:f},dataType:"json"}).done(function(e){t(u).trigger("WPSVPVimeoLoader.COMMENTS_END_LOAD",{data:e.body})}).fail(function(e,i,a){console.log(e,i,a),t(u).trigger("WPSVPVimeoLoader.COMMENTS_ERROR_LOAD")})},this.resumeComments=function(e){t.ajax({type:"GET",url:c+"includes/vimeo/vimeo_data.php",data:{type:"next_page",path:e,vai:f},dataType:"json"}).done(function(e){t(u).trigger("WPSVPVimeoLoader.COMMENTS_END_LOAD",{data:e.body})}).fail(function(e,i,a){console.log(e,i,a),t(u).trigger("WPSVPVimeoLoader.COMMENTS_ERROR_LOAD")})},this.getNextPageToken=function(){return s}}}(window,jQuery),function(e,t){e.WPSVPPlaylistManager=function(e){function i(){p=WPSVPUtils.randomiseArray(a)}var a,n,o,r=this,s=e.loopingOn,l=e.randomPlay,d=!1,u=-1,c=!1,p=[],v=!1;setTimeout(function(){clearTimeout(this),t(r).trigger("WPSVPPlaylistManager.RANDOM_CHANGE",l),t(r).trigger("WPSVPPlaylistManager.LOOP_CHANGE",s)},50),this.setCounter=function(e,n){if(void 0===n&&(n=!0),u=n?u+parseInt(e,10):parseInt(e,10),isNaN(u))alert("WPSVPPlaylistManager message: No active media, counter = "+u);else if(d=!1,s){if(l)if(u>a-1){if(u=p[a-1],i(),p[0]==u){var o=p.splice(0,1);p.push(o)}u=0}else 0>u&&(u=p[0],i(),p[a-1]==u&&(o=p.splice(a-1,1),p.unshift(o)),u=a-1);else u>a-1?u=0:0>u&&(u=a-1);t(r).trigger("WPSVPPlaylistManager.COUNTER_READY",u)}else u>a-1?(u=a-1,d=!0):0>u&&(u=0),d?t(r).trigger("WPSVPPlaylistManager.PLAYLIST_END"):t(r).trigger("WPSVPPlaylistManager.COUNTER_READY",u)},this.getCounter=function(){return l?v?u:p[u]:u},this.advanceHandler=function(e){v=!1,c?(c=!1,o+e>a-1?(u=a-1,t(r).trigger("WPSVPPlaylistManager.COUNTER_READY",u)):0>o+e?(u=0,t(r).trigger("WPSVPPlaylistManager.COUNTER_READY",u)):r.setCounter(o+e,!1)):r.setCounter(e)},this.processPlaylistRequest=function(e){v=!1,l&&(v=!0,n=e,c||(o=u,c=!0)),r.setCounter(e,!1)},this.setPlaylistItems=function(e,t){void 0===t&&(t=!0),t&&(u=-1),a=e,l&&i()},this.reSetCounter=function(e){void 0===e?u=-1:(e=parseInt(e,10),a?(e>a-1?e=a-1:0>e&&(e=0),u=e):u=-1)},this.setRandom=function(e){if((l=void 0!==e?e:!l)&&i(),l){var a=p.length;for(e=0;e<a;e++)if(p[e]==u){if(0==e)break;e=p.splice(e,1),p.unshift(parseInt(e,10));break}u=0}else c?(u=n,c=!1):u=p[u];t(r).trigger("WPSVPPlaylistManager.RANDOM_CHANGE",l)},this.getRandom=function(e){return l},this.setLooping=function(e){s=void 0!==e?e:!s,t(r).trigger("WPSVPPlaylistManager.LOOP_CHANGE",s)},this.getLooping=function(e){return s},this.getPosition=function(e){return p.indexOf(e)}}}(window,jQuery),function(e,t){function i(e,t,i,n){var o={},r=i.width(),s=(r-0)/((i=i.height())-0),l=(t=(n=a(t,n)).width)/(n=n.height);return l<s?e?(o.width=(i-0)/n*t,o.height=i-0):(o.height=(r-0)/t*n,o.width=r-0):l>s?e?(o.height=(r-0)/t*n,o.width=r-0):(o.width=(i-0)/n*t,o.height=i-0):(o.width=r-0,o.height=i-0),o}function a(e,t){var i={};return"video"==e?t.videoWidth&&t.videoHeight?(i.width=t.videoWidth,i.height=t.videoHeight):t[0]&&t[0].videoWidth&&t[0].videoHeight?(i.width=t[0].videoWidth,i.height=t[0].videoHeight):(i.width=16,i.height=9):"iframe"==e?t.sw&&t.sh?(i.width=t.sw,i.height=t.sh):(i.width=16,i.height=9):"image"==e&&(i.width=t.width(),i.height=t.height()),i}var n=function(){};n.resizeMedia=function(e,t,n,o){var r,s=n.width(),l=n.height();0==t?r=a(e,o):1==t?r=i(!0,e,n,o):2==t&&(r=i(!1,e,n,o)),e=parseInt((s-r.width)/2,10),l=parseInt((l-r.height)/2,10),o.css({width:r.width+"px",height:r.height+"px",left:e+"px",top:l+"px"})},e.WPSVPAspectRatio=n}(window,jQuery),function(e){e.fn.wpsvp=function(t){function a(){Ve.swipe({swipeLeft:function(e,t,i,a,n,o){if(!mr)return!1;("audio"==ro||"video"==ro&&"video_360"!=so||"image"==ro&&"image_360"!=so||"youtube"==ro&&"chromeless"==Gi&&!Aa.is360||"vimeo"==ro&&"chromeless"==bn&&!Aa.is360)&&ve()},swipeRight:function(e,t,i,a,n,o){if(!mr)return!1;("audio"==ro||"video"==ro&&"video_360"!=so||"image"==ro&&"image_360"!=so||"youtube"==ro&&"chromeless"==Gi&&!Aa.is360||"vimeo"==ro&&"chromeless"==bn&&!Aa.is360)&&he()}})}function n(e){0>(e=e.pageX-Ke.offset().left)?e=0:e>ss&&(e=ss);var t=Math.max(0,Math.min(1,e/ss));if("audio"==ro){var i=Za.duration,a=t*i;try{Za.currentTime=a.toFixed(1)}catch(e){}}else if("video"==ro){i=an.duration,a=t*i;try{an.currentTime=a.toFixed(1)}catch(e){}}else"youtube"==ro?(i=ln.getDuration(),a=t*i,ln.seekTo(a)):"vimeo"==ro&&(0!=Er?(a=t*(i=Er),gn.setCurrentTime(a)):gn.getDuration().then(function(e){a=t*(i=e),gn.setCurrentTime(a)}),"chromeless"==bn&uo&&ht.show());if(uo||(ye(!0),$e.width(a/i*ss)),xi&&jr.length){var n=jr.length;for(e=0;e<n;e++){var o=jr[e];if(a>=o.start&&a<=o.end){ii.css("opacity",1).text(o.text),uo||mt.hide();break}}}}function o(e){var t=e.pageX-Ke.offset().left;if(!WPSVPUtils.isNumber(t))return!1;0>t?t=0:t>ss&&(t=ss);var i=Math.max(0,Math.min(1,t/ss));if(!WPSVPUtils.isNumber(i))return!1;t=Ce[0].getBoundingClientRect();var a=Xe[0].getBoundingClientRect();if("audio"==ro)var n=Za.duration;else"video"==ro?n=an.duration:"youtube"==ro?n=ln.getDuration():"vimeo"==ro&&(n=Er);if(Aa.previewSeek&&Cr.length){var o=n*i;for(WPSVPUtils.isNumber(n)&&Ge.html(WPSVPUtils.formatTime(o)),i=Cr.length,n=0;n<i;n++){var r=Cr[n],s=r.start,l=r.end;if(o>=s&&o<=l){if(!qa){var d=(r=r.url).substr(r.lastIndexOf("=")+1).split(",");d="-"+d[0]+"px -"+d[1]+"px",(qa={}).start=s,qa.end=l,Qe.css({"background-image":"url("+r+")","background-position":d})}}else qa&&(o<qa.start||o>qa.end)&&(qa=null)}e=e.pageX-wr.scrollLeft()-t.left-Ye.outerWidth()/2,o=a.top-t.top-Ye.outerHeight()-10,"lightbox"!=ha&&(0>e?e=0:e+Ye.outerWidth()>qe.width()&&(e=qe.width()-Ye.outerWidth())),Ye.css({left:parseInt(e,10)+"px",top:parseInt(o,10)+"px"}).show()}else e=e.pageX-wr.scrollLeft()-t.left-os.outerWidth()/2,o="top"==ls?a.top-t.top+Xe.outerHeight()+10:a.top-t.top-os.outerHeight(),"lightbox"!=ha&&(0>e?e=0:e+os.outerWidth()>Ce.width()&&(e=Ce.width()-os.outerWidth())),os.css({left:parseInt(e,10)+"px",top:parseInt(o,10)+"px"}).show(),WPSVPUtils.isNumber(n)&&os.text(WPSVPUtils.formatTime(n*i)+" / "+WPSVPUtils.formatTime(n))}function r(){if(!mr)return!1;0<Si?(cs=Si,Si=0):Si=cs,l()}function s(e){us?Si=Math.max(0,Math.min(1,(e.pageX-it.offset().left)/hs)):Si=1-(Si=Math.max(0,Math.min(1,(e.pageY-it.offset().top)/hs))),l()}function l(t){void 0!==t&&(Si=t),void 0!==Si&&("audio"==ro?Za&&(Za.volume=Si,Za.muted=0==Si):"video"==ro?an&&(an.volume=Si,an.muted=0==Si):"youtube"==ro?ln&&(ln.setVolume(100*Si),0==Si?ln.mute():ln.unMute()):"vimeo"==ro&&gn&&gn.setVolume(Si)),et.children().hide(),0==Si?(et.find(".wpsvp-btn-volume-off").show(),"custom"==ca&&(ns.find(".wpsvp-context-volume-mute").hide(),ns.find(".wpsvp-context-volume-unmute").show())):0<Si&&.5>Si?(et.find(".wpsvp-btn-volume-down").show(),"custom"==ca&&(ns.find(".wpsvp-context-volume-unmute").hide(),ns.find(".wpsvp-context-volume-mute").show())):.5<=Si&&1>=Si&&(et.find(".wpsvp-btn-volume-up").show(),"custom"==ca&&(ns.find(".wpsvp-context-volume-unmute").hide(),ns.find(".wpsvp-context-volume-mute").show())),at.css(us?"width":"height",Si*hs+"px"),e(yr).trigger("volumeChange",{instance:yr,instanceName:Vi,volume:Si})}function d(e){var t=us?e.pageX-it.offset().left:e.pageY-it.offset().top;if(0>t?t=0:t>hs&&(t=hs),t=Math.max(0,Math.min(1,t/hs)),!WPSVPUtils.isNumber(t))return!1;us||(t=1-t),t=parseInt(100*t,10),os.text(t+" %");var i=Ce[0].getBoundingClientRect(),a=tt[0].getBoundingClientRect();us?(t=parseInt(e.pageX-wr.scrollLeft()-i.left-os.outerWidth()/2),e=parseInt(a.top-i.top-os.outerHeight())):(t=parseInt(a.left-i.left-os.outerWidth()/2+tt.outerWidth()/2),e=parseInt(e.pageY-wr.scrollTop()-i.top-os.outerHeight()-10)),os.css({left:t+"px",top:e+"px"}).show()}function u(){if(e(this).hasClass("wpsvp-menu-active"))return!1;var t=e(this).attr("data-value");"audio"==ro?Za.playbackRate=Number(t):"video"==ro?an.playbackRate=Number(t):"youtube"==ro?ln.setPlaybackRate(Number(t)):"vimeo"==ro&&gn.setPlaybackRate(Number(t)).then(function(e){}).catch(function(e){console.log(e.name)}),Aa.playbackRate=t,bs&&(gs.find(".wpsvp-settings-menu").hide(),ys.show())}function c(e){ko&&ko.removeClass("wpsvp-menu-active"),ko=Ht.find(".wpsvp-menu-item[data-value='"+e+"']").addClass("wpsvp-menu-active"),bs&&gs.find(".wpsvp-playback-rate-menu-value").text(ko.text())}function p(t,i){var a,n=t.length;for(a=0;a<n;a++){var o=t[a];o.label?e("<li/>").addClass("wpsvp-menu-item").attr({"data-value":o.value,"data-label":o.label}).text(o.label).on("click",v).appendTo(Yt):e("<li/>").addClass("wpsvp-menu-item").attr("data-value",o).text(o).on("click",v).appendTo(Yt)}h(i),zt.show(),Qt.removeClass("wpsvp-force-hide")}function v(){if(e(this).hasClass("wpsvp-menu-active"))return!1;Co&&Co.removeClass("wpsvp-menu-active");var t=(Co=e(this).addClass("wpsvp-menu-active")).attr("data-value");if(Aa.quality=t,"image"==ro||"audio"==ro||"video"==ro)if("hls"==so){var i=parseInt(t,10);-1==t?(Ba.currentLevel=i,Ba.nextLevel=i,Ba.loadLevel=i):Ba.currentLevel=t}else"dash"!=so&&W(!0);else"youtube"==ro&&ln.setPlaybackQuality(t);bs&&(gs.find(".wpsvp-quality-menu-value").text(Co.text()),gs.find(".wpsvp-settings-menu").hide(),ys.show())}function h(e){Co&&Co.removeClass("wpsvp-menu-active"),Co=Yt.find(".wpsvp-menu-item[data-value='"+e+"']").addClass("wpsvp-menu-active"),bs&&gs.find(".wpsvp-quality-menu-value").text(Co.text())}function f(){var t=e(this).attr("data-value");"hls"==so&&(Ba.audioTrack=t)}function m(){var t,i=Aa.subtitles.length,a=Zi;for(e("<li/>").addClass("wpsvp-menu-item").attr("data-label",Zi).text(Zi).on("click",g).appendTo(Kt),t=0;t<i;t++){var n=Aa.subtitles[t];e("<li/>").addClass("wpsvp-menu-item").attr({"data-value":n.value,"data-label":n.label}).text(n.label).on("click",g).appendTo(Kt),n.default&&(a=n.label)}yr.setSubtitle(a),Gt.show(),Jt.removeClass("wpsvp-force-hide")}function g(){if(e(this).hasClass("wpsvp-menu-active"))return!1;Eo&&Eo.removeClass("wpsvp-menu-active");var t=(Eo=e(this).addClass("wpsvp-menu-active")).attr("data-label");yr.setSubtitle(t),bs&&(gs.find(".wpsvp-settings-menu").hide(),ys.show())}function y(t){e.ajax({url:t.src}).done(function(e){var i;for(i in e=e.split(/[\r\n]/)){var a=e[i];if(/.vtt/.test(a)){t.src=t.src.substr(0,t.src.lastIndexOf("/")+1)+a;var n=!0;break}}n?b(t):console.log("Error loading subtitle!")}).fail(function(e,t,i){console.log(e,t,i)})}function b(t){Dr=[];var i=t.src;-1!=i.indexOf("ebsfm:")&&(i=atob(i.substr(6))),e.ajax({url:i}).done(function(e){e=e.replace(/\r\n|\r|\n/g,"\n"),e=(e=WPSVPUtils.strip(e)).split("\n\n");var i,a,n=0;for(i in e){var o=e[i].split("\n");if("WEBVTT"!=o){if(2<=o.length)if(2<o.length){var r=WPSVPUtils.strip(o[1].split(" --\x3e ")[0]),s=WPSVPUtils.strip(o[1].split(" --\x3e ")[1]),l=o[2];if(2<o.length)for(a=3;a<o.length;a++)l+="\n"+o[a]}else r=WPSVPUtils.strip(o[0].split(" --\x3e ")[0]),s=WPSVPUtils.strip(o[0].split(" --\x3e ")[1]),l=o[1];Dr[n]={},Dr[n].start=WPSVPUtils.toSeconds(r),Dr[n].end=WPSVPUtils.toSeconds(s),Dr[n].text=l,n++}}Ar[t.label]=Dr,Po=!0}).fail(function(e,t,i){console.log(e,t,i)})}function w(t){console.log("makeChapters");var i,a=jr.length;for(i=0;i<a;i++){var n=jr[i],o=Math.abs(n.end-n.start);o=o/t*100;var r=n.start/t*100;n=e('<div class="wpsvp-chapter-indicator"><div class="wpsvp-chapter-indicator-highlight"></div></div>').css({width:o+"%",left:r+"%"}).attr({"data-title":n.text,"data-start":n.start,"data-end":n.end}),jr[i].chapter=n,xi||n.on("mouseenter",function(){var t=e(this);t.find(".wpsvp-chapter-indicator-highlight").addClass("wpsvp-chapter-indicator-highlight-visible"),ii.css("opacity",1).text(t.attr("data-title")),uo||mt.hide()}).on("mouseleave",function(){e(this).find(".wpsvp-chapter-indicator-highlight").removeClass("wpsvp-chapter-indicator-highlight-visible"),ii.css("opacity",0),uo||mt.show()}).appendTo(Ke)}}function T(t){var i,a=qr.length;for(i=0;i<a;i++){var n=qr[i],o=Math.round(n.begin/t*100);n.marker=e('<div class="wpsvp-ad-indicator"></div>').css({left:o+"%"}).appendTo(Ke)}}function x(t){if(t.preventDefault(),!mr)return!1;if((t=e(t.currentTarget)).hasClass("wpsvp-playback-toggle")||t.hasClass("wpsvp-big-play"))yr.togglePlayback();else if(t.hasClass("wpsvp-playlist-toggle"))Te();else if(t.hasClass("wpsvp-info-toggle"))_();else if(t.hasClass("wpsvp-info-close"))_(!1);else if(t.hasClass("wpsvp-embed-toggle"))N();else if(t.hasClass("wpsvp-share-close"))O(!1);else if(t.hasClass("wpsvp-pwd-confirm")){var i=ct.val();if(WPSVPUtils.isEmpty(i))alert(pt);else if("undefined"==typeof md5){(t=document.createElement("script")).type="text/javascript",t.src=WPSVPUtils.qualifyURL(Ci+"js/scripts/md5.min.js"),t.onload=t.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||(md5(i)!=Aa.pwd?alert(pt):(delete Aa.pwd,ut.hide(),ct.val(""),"video"==ro&&en?W():Y(!0)))},t.onerror=function(){alert("Error loading "+this.src)};var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(t,a)}else md5(i)!=Aa.pwd?alert(pt):(delete Aa.pwd,ut.hide(),ct.val(""),"video"==ro&&en?W():Y(!0))}else if(t.hasClass("wpsvp-embed-close"))N(!1);else if(t.hasClass("wpsvp-previous-toggle"))he();else if(t.hasClass("wpsvp-next-toggle"))ve();else if(t.hasClass("wpsvp-loop-toggle"))Es.setLooping();else if(t.hasClass("wpsvp-shuffle-toggle"))Es.setRandom();else if(t.hasClass("wpsvp-rewind-toggle"))yr.seek(0);else if(t.hasClass("wpsvp-seek-backward"))yr.seekBackward();else if(t.hasClass("wpsvp-seek-forward"))yr.seekForward();else if(t.hasClass("wpsvp-share-toggle"))O();else if(t.hasClass("wpsvp-pip-toggle"))if(fr)if(document.pictureInPictureElement)try{document.exitPictureInPicture()}catch(e){}else try{an.requestPictureInPicture()}catch(e){}else an.webkitSupportsPresentationMode&&"function"==typeof an.webkitSetPresentationMode&&an.webkitSetPresentationMode("picture-in-picture"===an.webkitPresentationMode?"inline":"picture-in-picture");else t.hasClass("wpsvp-share-item")&&function(e){var t="https:"==window.location.protocol?"https:":"http:",i=(window.screen.width-600)/2,a=(window.screen.height-300)/2,n=Aa.title||"",o=Aa.description||"",r=Aa.thumb||Aa.thumbDefault,s=Aa.share||window.location.href;if(WPSVPUtils.relativePath(r)||(r=WPSVPUtils.qualifyURL(Aa.thumb)),"facebook"==e){if(Ce.find('.wpsvp-share-item[data-type="facebook"]').length)return void alert("Facebook API key has not been set in settings!");if(window.FB)return void FB.ui({method:"share_open_graph",action_type:"og.shares",action_properties:JSON.stringify({object:{"og:url":s,"og:title":n,"og:description":o,"og:image":r}})},function(e){})}else if("twitter"==e)var l=t+"//twitter.com/intent/tweet?url="+encodeURIComponent(s)+"&text="+encodeURIComponent(n);else if("googleplus"==e)l=t+"//plus.google.com/share?url="+encodeURIComponent(s);else if("tumblr"==e)l=t+"//www.tumblr.com/share/link?url="+encodeURIComponent(s)+"&amp;name="+encodeURIComponent(n)+"&amp;description="+encodeURIComponent(o);else if("reddit"==e)l=t+"//www.reddit.com/submit?url="+encodeURIComponent(s);else if("linkedin"==e)l=t+"//www.linkedin.com/shareArticle?mini=true&url="+encodeURIComponent(s)+"&title="+encodeURIComponent(n)+"&summary="+encodeURIComponent(o)+"&source="+document.title;else if("digg"==e)l=t+"//digg.com/submit?url="+encodeURIComponent(s)+"&title="+encodeURIComponent(n);else if("pinterest"==e)l=t+"//www.pinterest.com/pin/create/button/?url="+encodeURIComponent(s)+"&media="+encodeURIComponent(r)+"&description="+encodeURIComponent(o);else if("whatsapp"==e){if(xi)return e=encodeURIComponent(n)+" - "+encodeURIComponent(s),void(window.location.href="whatsapp://send?text="+e);alert("Please share this content on mobile device!")}l&&window.open(l,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,width=600,height=300,left="+i+",top="+a)}(t.attr("data-type").toLowerCase());xi&&(mo&&clearTimeout(mo),mo=setTimeout(function(){clearTimeout(this),mo=null,I()},4e3))}function k(t){return t.preventDefault(),!!mr&&(t=e(t.currentTarget),(!ja||!ja.is(t))&&(co=!0,t=Re.find(".wpsvp-playlist-item").index(t),Es.processPlaylistRequest(t),e(yr).trigger("clickPlaylistItem",{instance:yr,instanceName:Vi}),void(pa?(t=Oe.offset().top,wr.scrollTop()>t&&e("html,body").animate({scrollTop:t},500)):xi&&Ee.hasClass("wpsvp-playlist-holder-bottom")&&(t=Oe.offset().top,wr.scrollTop()>t&&e("html,body").animate({scrollTop:t},500)))))}function C(t){if(t.preventDefault(),!mr)return!1;if(t=e(t.currentTarget),!xi&&t.attr("data-hover-preview")){var i=t.find(".wpsvp-thumbimg");i.attr("data-src",i.attr("src")).attr("src",t.attr("data-hover-preview"))}if(ja&&ja.is(t))return!1;t.addClass("wpsvp-playlist-item-selected")}function V(t){if(t.preventDefault(),!mr)return!1;if(t=e(t.currentTarget),!xi&&t.attr("data-hover-preview")){var i=t.find(".wpsvp-thumbimg");i.attr("src",i.attr("data-src"))}if(ja&&ja.is(t))return!1;t.removeClass("wpsvp-playlist-item-selected")}function E(){ja.removeClass("wpsvp-playlist-item-selected"),e(yr).trigger("playlistItemEnabled",{instance:yr,instanceName:Vi}),ja=null}function P(e){if(e.preventDefault(),!mr||!ro||!Or||"youtube"==ro&&"default"==Gi||"vimeo"==ro&&"default"==bn)return!1;S()}function R(e){if(e.relatedTarget||e.toElement){if(e.preventDefault(),!mr||!ro||"youtube"==ro&&"default"==Gi||"vimeo"==ro&&"default"==bn)return!1;uo&&I()}}function S(){!Aa||!_a||Ho||"youtube"==ro&&"default"==Gi||"vimeo"==ro&&"default"==bn||(qe.addClass("wpsvp-interface-visible"),Ro&&Me.addClass("wpsvp-subtitle-bottom"),Or=!1,xi&&(mo&&clearTimeout(mo),mo=setTimeout(function(){clearTimeout(this),mo=null,I()},4e3)))}function I(){!uo||Ho||"youtube"==ro&&"default"==Gi||"vimeo"==ro&&"default"==bn||(qe.removeClass("wpsvp-interface-visible"),Ro&&Me.removeClass("wpsvp-subtitle-bottom"),os.hide(),Xt.removeClass("wpsvp-menu-bottom"),Wt.removeClass("wpsvp-menu-bottom"),Bt.removeClass("wpsvp-menu-bottom"),ii.css("opacity",0),Or=!0)}function M(e){mo&&clearTimeout(mo),e&&(_r!=e.clientX&&(S(),document.body.style.cursor="default"),_r=e.clientX),mo=setTimeout(function(){clearTimeout(this),mo=null,uo&&(I(),document.body.style.cursor="none")},4e3)}function _(e){if(void 0!==e){if(vo&&1==e||!vo&&0==e)return!1;vo=!e}ho&&N(!1),fo&&O(!1),bs&&(gs.hide().removeClass("wpsvp-menu-bottom").find(".wpsvp-settings-menu").css("display","none"),ys.show()),vo?(nt.hide(),po&&(yr.playMedia(),po=!1)):(uo&&(yr.pauseMedia(),po=!0),nt.show()),vo=!vo}function O(e){if(void 0!==e){if(fo&&1==e||!fo&&0==e)return!1;fo=!e}vo&&_(!1),ho&&N(!1),bs&&(gs.hide().removeClass("wpsvp-menu-bottom").find(".wpsvp-settings-menu").css("display","none"),ys.show()),fo?(Tt.hide(),po&&(yr.playMedia(),po=!1)):(uo&&(yr.pauseMedia(),po=!0),Tt.show()),fo=!fo}function N(e){if(void 0!==e){if(ho&&1==e||!ho&&0==e)return!1;ho=!e}vo&&_(!1),fo&&O(!1),bs&&(gs.hide().removeClass("wpsvp-menu-bottom").find(".wpsvp-settings-menu").css("display","none"),ys.show()),ho?(lt.hide(),oi.text(oi.attr("data-copy-text")),ni.text(ni.attr("data-copy-text")),po&&(yr.playMedia(),po=!1)):(uo&&(yr.pauseMedia(),po=!0),lt.show()),ho=!ho}function U(t){gr=!0,ft.show(),go?pe():Re.find(".wpsvp-playlist-item, .wpsvp-global-playlist-data").remove();var i,a,n,o=Ei?e(Ei).find(t):e(t);if(0==o.length)return alert("Failed playlist selection! Playlist - "+t+" does not exist. Check activePlaylist option in settings!"),!1;(o.find(".wpsvp-global-playlist-data").length&&((wo=o.find(".wpsvp-global-playlist-data")).find(".wpsvp-ad-section").length&&(Fo=wo.find(".wpsvp-ad-section")),wo.find(".wpsvp-annotation-section").length&&(er=wo.find(".wpsvp-annotation-section")),null!=wo.attr("data-upnext-time")&&(To=parseInt(wo.attr("data-upnext-time"),10)),null!=wo.attr("data-pwd")&&(ir=wo.attr("data-pwd")),null!=wo.attr("data-display-poster-on-mobile")&&xi&&(xo=!0,Oi=_i=Mi=Ii=!1)),Ss=t,e(yr).trigger("playlistStartLoad",{instance:yr,instanceName:Vi}),bo=-1,Nr=[],Ur=[],null!=o.attr("data-type")&&"xml"==o.attr("data-type"))?function(t){e.ajax({type:"GET",url:t.path,dataType:"html"}).done(function(t){var i,a,n;e(t).children(".wpsvp-playlist-item").each(function(){i=e(this),a=i.attr("data-type"),RegExp(/^image|^audio|^video|^hls|^dash/).test(a)?Ur.push(i):null!=i.attr("data-noapi")?Ur.push(i):(n=xe(i),Ur.push(n))}),Fa=Ur.length,D()}).fail(function(e,t,i){console.log(e,t,i),D()})}(xe(o)):(o.children(".wpsvp-playlist-item").each(function(){a=e(this),n=a.attr("data-type"),RegExp(/^image|^audio|^video|^hls|^dash/).test(n)?Ur.push(a.clone()):null!=a.attr("data-noapi")?Ur.push(a.clone()):(i=xe(a),Ur.push(i))}),Fa=Ur.length,D())}function A(i){"youtube"==i?(rn=new WPSVPYoutubeLoader(t),e(rn).on("WPSVPYoutubeLoader.END_LOAD",function(e,t){var i,a=t.data.length;for(i=0;i<a;i++){var n=t.data[i];Nr.push(n)}_s=t.nextPageToken,Sa?L():D()}),Os&&_s&&(rn.setDataFromCache(xe(e(Os))),Is=!1)):"vimeo"==i&&(fn=new WPSVPVimeoLoader(t),e(fn).on("WPSVPVimeoLoader.END_LOAD",function(e,t){var i,a=t.data.length;for(i=0;i<a;i++){var n=t.data[i];Nr.push(n)}_s=t.nextPageToken,Sa?L():D()}),Os&&_s&&(fn.setDataFromCache(xe(e(Os))),Is=!1))}function D(){if(++bo>Fa-1)L();else{var t=Ur[bo],i=t.type;i?RegExp(/^youtube/).test(i)?(Ia="youtube",rn||A("youtube"),rn.setData(t)):RegExp(/^vimeo/).test(i)?(Ia="vimeo",fn||A("vimeo"),fn.setData(t)):RegExp(/^folder/).test(i)?function(t){if("file:"==window.location.protocol)return console.log("Reading files from folders locally is not possible! This requires online server connection."),D(),!1;var i=t.type;if("folder_video"==i)var a=["mp4"];else"folder_audio"==i?(t.id3&&(Ka=Xa=Nr.length-1),a=["mp3","wav"]):"folder_image"==i&&(a=["jpg","jpeg","png","gif"]);e.ajax({type:"GET",url:Ci+"includes/folder_parser.php",data:{type:a,dir:t.path,limit:t.limit||100},dataType:"json"}).done(function(a){WPSVPUtils.keysrt(a,"filename");var n,o=a.length;for(n=0;n<o;n++){var r=a[n];if("folder_audio"==i){if(/mp3|wav/.test(r.basename)){var s=e.extend(!0,{},t);s.type="audio",s.origtype="folder_audio";var l=r.fullpath,d={};s.path=[(d.quality="default",d[r.extension]=l,d)],s.share||(s.share=l),s.title||(s.title=r.filename),Nr.push(s),Xa++}}else"folder_video"==i?/mp4/.test(r.basename)&&((s=e.extend(!0,{},t)).type="video",s.origtype="folder_video",l=r.fullpath,s.path=[{quality:"default",mp4:l}],s.share||(s.share=l),s.title||(s.title=r.filename),Nr.push(s)):"folder_image"==i&&/jpg|jpeg|png|gif/.test(r.basename)&&((s=e.extend(!0,{},t)).type="image",s.origtype="folder_image",l=r.fullpath,s.path=[{quality:"default",image:l}],s.thumb||(s.thumb=l.substr(0,l.lastIndexOf("/")+1)+"thumb/"+r.filename+".jpg"),s.share||(s.share=l),s.title||(s.title=r.filename),Nr.push(s))}"folder_audio"==i&&t.id3?function e(){if("undefined"==typeof jsmediatags){var t=document.createElement("script");t.type="text/javascript",t.src=WPSVPUtils.qualifyURL(Ci+"js/scripts/jsmediatags.min.js"),t.onload=t.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||e()},t.onerror=function(){alert("Error loading "+this.src)};var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t,i)}else{var a=Nr[Xa];jsmediatags.read(a.path[0].mp3||a.path[0].wav,{onSuccess:function(t){var i=t.tags;if(t=i.picture,i.artist&&(a.artist=i.artist),i.title&&(a.title=i.title),i.album&&(a.album=i.album),t){i="";var n,o=t.data.length;for(n=0;n<o;n++)i+=String.fromCharCode(t.data[n]);a.thumb="data:"+t.format+";base64,"+window.btoa(i)}--Xa>Ka?e():D()},onError:function(t){console.log("ID3 error: ",t.type,t.info),--Xa>Ka?e():D()}})}}():D()}).fail(function(e,t,i){console.log(e,t,i),D()})}(t):RegExp(/^iframe/).test(i)?(Nr.push(t),D()):RegExp(/^image|^audio|^video|^hls|^dash/).test(i)&&(Nr.push(t),D()):(Nr.push(t),D())}}function L(){var t,i,a=Nr.length,n=0;for(t=0;t<a;t++){Mo&&n++;var o=Nr[t],r=o.type;if(o instanceof e&&o.hasClass("wpsvp-playlist-item"))r=o;else{o.origclasses||(o.origclasses="wpsvp-playlist-item"),r=e('<div class="'+o.origclasses+'"/>').attr("data-type",r),delete o.origclasses;var s=null;if("youtube"==o.type)o.snippet.thumbnails&&(o.snippet.thumbnails.medium?s=o.snippet.thumbnails.medium.url:o.snippet.thumbnails.high?s=o.snippet.thumbnails.high.url:o.snippet.thumbnails.standard&&(s=o.snippet.thumbnails.standard.url));else if("vimeo"==o.type){var l=o.pictures.sizes,d=l.length;for(i=0;i<d;i++){if(295==l[i].width){s=l[i].link;break}if(640==l[i].width){s=l[i].link;break}}}else s=o.thumb;if(s||(s=o.thumbDefault),s&&(i=e("<div/>").addClass("wpsvp-playlist-thumb").appendTo(r),l=o.alt?o.alt:o.title?o.title.replace(/"/g,"'"):"image",e(new Image).addClass("wpsvp-thumbimg").appendTo(i).attr({src:s,alt:l}),r.attr("data-thumb",s)),o.title||o.description||o.publishedAt)for(s=e('<div class="wpsvp-playlist-info"></div>').appendTo(r),i=da.length,l=0;l<i;l++)"title"==(d=da[l])&&o.title?(d=o.title.replace(/"/g,"'"),e('<span class="wpsvp-playlist-title">'+d+"</span>").appendTo(s),r.attr("data-title",d)):"date"==d&&o.publishedAt?(d=(d=new Date(o.publishedAt)).getMonth()+1+"/"+d.getDate()+"/"+d.getFullYear(),e('<span class="wpsvp-playlist-published-date">'+d+"</span>").appendTo(s)):"description"==d&&o.description&&(d=o.description.replace(/"/g,"'"),r.attr("data-description",d),0<la&&(d=d.substr(0,la)+"..."),e('<span class="wpsvp-playlist-description">'+d+"</span>").appendTo(s));if(o.subtitles)for(s=e('<div class="wpsvp-subtitles"></div>').appendTo(r),i=o.subtitles.length,l=0;l<i;l++){var u='<div data-label="'+(d=o.subtitles[l]).label+'" data-src="'+d.src+'"';u=d.default?u+" data-default></div>":u+"></div>",e(u).appendTo(s)}if("iframe"==o.type)r.attr("data-path",o.path);else if("video"==o.type||"audio"==o.type||"image"==o.type){for(i=o.path.length,u="[",l=0;l<i;l++)u+='{"quality": "'+(d=o.path[l]).quality+'", "'+d.ext+'": "'+d.src+'"}',l<i-1&&(u+=",");u+="]",r.attr("data-path",u),o.defaultQuality&&r.attr("data-quality",o.defaultQuality)}o.deeplink&&r.attr("data-deeplink",o.deeplink),o.id&&r.attr("data-path",o.id),o.mp4&&r.attr("data-mp4",o.mp4),o.poster&&r.attr("data-poster",o.poster),o.download&&r.attr("data-download",o.download),o.share&&r.attr("data-share",o.share),o.duration&&r.attr("data-duration",o.duration),o.start&&r.attr("data-start",o.start),o.end&&r.attr("data-end",o.end),o.randomClipTime&&r.attr("data-random-clip-time",o.randomClipTime),o.aspectRatio&&r.attr("data-aspect-ratio",o.aspectRatio),o.playbackRate&&r.attr("data-playback-rate",o.playbackRate),o.quality&&r.attr("data-quality",o.quality),o.origtype&&("folder_audio"==o.origtype||"folder_video"==o.origtype||"folder_image"==o.origtype)&&r.attr("data-path",JSON.stringify(o.path)),o.width&&r.attr("data-width",o.width),o.height&&r.attr("data-height",o.height),o.is360&&r.attr("data-is360","1"),o.customContent&&(r.append(o.customContent),delete o.customContent),o.previewSeek&&r.attr("data-preview-seek",o.previewSeek),o.chapters&&r.attr("data-chapters",o.chapters),o.endLink&&(r.attr("data-end-link",o.endLink),o.endTarget&&r.attr("data-end-target",o.endTarget)),o.user&&o.user.account&&r.attr("data-user-account",o.user.account),o.pwd&&r.attr("data-pwd",o.pwd),o.liveStream&&r.attr("data-live-stream",o.liveStream)}if(Mo){c?c.after(r):So?r.appendTo(Re):Re.children("div").eq(Io).before(r);var c=r}else r.appendTo(Re);va&&(r.on("click",k),!xi)&&r.on("mouseenter",C).on("mouseleave",V)}go="exist",Fa=Re.children(".wpsvp-playlist-item").length,console.log("playlistLength = ",Fa),"horizontal"==Ea&&Re.width(Fa*Yr),Mo?(t=Es.getCounter(),Es.setPlaylistItems(Fa,!1),Io<=t&&(So||Es.reSetCounter(t+n)),_o&&!xi&&(Ii=!0),Oo?(Oo=!1,Es.setCounter(Io,!1)):_o&&(tn=!1,Es.setCounter(Io,!1))):Es.setPlaylistItems(Fa),e(yr).trigger("playlistEndLoad",{instance:yr,instanceName:Vi,nextPageToken:_s}),q()}function j(){if("scroll"==Va){if("undefined"==typeof mCustomScrollbar){if(window.playlistScrollLoading)return void setInterval(function(){playlistScrollLoading||(clearInterval(this),j())},100);window.playlistScrollLoading=!0;var e=document.createElement("script");e.type="text/javascript",e.src=WPSVPUtils.qualifyURL(Ci+"js/scripts/jquery.mCustomScrollbar.concat.min.js"),e.onload=e.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||(j(),window.playlistScrollLoading=!1)},e.onerror=function(){alert("Error loading "+this.src)};var i=document.getElementsByTagName("script")[0];return void i.parentNode.insertBefore(e,i)}Pe.mCustomScrollbar({axis:"horizontal"==Ea?"x":"y",theme:t.playlistScrollTheme,scrollInertia:0,scrollButtons:{enable:!0},mouseWheel:{normalizeDelta:!0,deltaFactor:50,preventDefault:!0},keyboard:{enable:!1},advanced:{autoExpandHorizontalScroll:!0},callbacks:{onOverflowYNone:function(){Pe.find(".mCSB_container").addClass("wpsvp-mCSB_full")},onOverflowY:function(){Pe.find(".mCSB_container").removeClass("wpsvp-mCSB_full")},onTotalScroll:function(){Ms&&_s&&!gr&&(gr=!0,ft.show(),Sa=!0,Nr=[],"youtube"==ro?(rn||A("youtube"),rn.resumeLoad(_s)):"vimeo"==ro&&(fn||A("vimeo"),fn.resumeLoad(_s)))},alwaysTriggerOffsets:!1}})}else"buttons"==Va?(xi||Pe.on("mousewheel DOMMouseScroll",function(e){if(!mr||gr||!Mr)return!1;if("horizontal"==Ea)var t=Pe.width(),i=Re.width(),a="translateX";else t=Pe.height(),i=Re.height(),a="translateY";if(!(i<t)){if(Vt.show(),Et.show(),e.originalEvent.wheelDelta)var n=0<e.originalEvent.wheelDelta?1:-1;else e.originalEvent.detail&&(n=0>e.originalEvent.detail?1:-1);return Zn?e=Zn:(e=Re[0].style.transform.replace(/[^\d.]/g,""),e=parseInt(e)||0),0<(e+=Ir*n)?(e=0,Vt.hide()):e<=t-i&&(e=t-i,Et.hide(),Ms&&_s&&!gr&&(gr=!0,ft.show(),Sa=!0,Nr=[],"youtube"==ro?(rn||A("youtube"),rn.resumeLoad(_s)):"vimeo"==ro&&(fn||A("vimeo"),fn.resumeLoad(_s)))),Zn=e,Re.css({"-webkit-transform":a+"("+e+"px)","-ms-transform":a+"("+e+"px)",transform:a+"("+e+"px)"}),!1}}),Vt.on("click",function(){if(!mr||gr||$n)return!1;if($n=!0,"horizontal"==Ea)var e=Pe.width(),t=Re.width(),i="translateX";else e=Pe.height(),t=Re.height(),i="translateY";if(!(t<e)){if(Vt.show(),Et.show(),Zn?t=Zn:(t=Re[0].style.transform.replace(/[^\d.]/g,""),t=parseInt(t)||0),0!=t%Yr){for(var a=-(t%Yr+Yr);a<=e-Yr;)a+=Yr;t+=a}else t+=Yr*Math.floor(e/Yr);0<=t&&(t=0,Vt.hide()),Zn=t,Re.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){$n=!1}).css({"-webkit-transform":i+"("+t+"px)","-ms-transform":i+"("+t+"px)",transform:i+"("+t+"px)"})}}),Et.on("click",function(){if(!mr||gr||$n)return!1;if($n=!0,"horizontal"==Ea)var e=Pe.width(),t=Re.width(),i="translateX";else e=Pe.height(),t=Re.height(),i="translateY";if(!(t<e)){if(Vt.show(),Et.show(),Zn)var a=Zn;else a=Re[0].style.transform.replace(/[^\d.]/g,""),a=parseInt(a)||0;if(0!=a%Yr){for(var n=a%Yr+Yr;n<=e-Yr;)n+=Yr;a-=n}else a-=Yr*Math.floor(e/Yr);a<=e-t&&(a=e-t,Et.hide(),Ms&&_s&&!gr&&(gr=!0,ft.show(),Sa=!0,Nr=[],"youtube"==ro?(rn||A("youtube"),rn.resumeLoad(_s)):"vimeo"==ro&&(fn||A("vimeo"),fn.resumeLoad(_s)))),Zn=a,Re.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){$n=!1}).css({"-webkit-transform":i+"("+a+"px)","-ms-transform":i+"("+a+"px)",transform:i+"("+a+"px)"})}}),Qr&&F()):"hover"==Va&&(xi||Pe.on("mousemove",function(e){if(!mr||gr||!Mr)return!1;if("horizontal"==Ea){var t=Ee.width(),i=Re.width();if(i<t)return;var a=parseInt(Pe.css("left"),10)+Ee.offset().left;e=(t-i)/t*(e.pageX-a),Re.css("left",e+"px")}else{if(t=Ee.height(),(i=Re.height())<t)return;a=parseInt(Pe.css("top"),10)+Ee.offset().top,e=(t-i)/t*(e.pageY-a),Re.css("top",e+"px")}return!1}),Qr&&F());No=!0}function F(){var e,t,i,a,n,o=!1;Re.off("touchstart.ap touchmove.ap touchend.ap click.ap-touchclick").on("touchstart.ap",function(r){if(!mr||gr)return!1;r=r.originalEvent.touches[0],e=Re.position().left,t=Re.position().top,i=r.pageX,a=r.pageY,n=!1,o=!0}).on("touchmove.ap",function(r){if(o){if(r=r.originalEvent.touches[0],Vt.show(),Et.show(),"horizontal"==Ea){var s=e-i+r.pageX,l=Ee.width(),d=Re.width();if(d<l)return;0<s?(s=0,Vt.hide()):s<=l-d&&(s=l-d,Et.hide(),Ms&&_s&&!gr&&(gr=!0,ft.show(),Sa=!0,Nr=[],"youtube"==ro?(rn||A("youtube"),rn.resumeLoad(_s)):"vimeo"==ro&&(fn||A("vimeo"),fn.resumeLoad(_s)))),Re.css("left",s+"px")}else{if(s=t-a+r.pageY,l=Ee.height(),(d=Re.height())<l)return;0<s?(s=0,Vt.hide()):s<=l-d&&(s=l-d,Et.hide(),Ms&&_s&&!gr&&(gr=!0,ft.show(),Sa=!0,Nr=[],"youtube"==ro?(rn||A("youtube"),rn.resumeLoad(_s)):"vimeo"==ro&&(fn||A("vimeo"),fn.resumeLoad(_s)))),Re.css("top",s+"px")}return n=n||5<Math.abs(i-r.pageX)||5<Math.abs(a-r.pageY),!1}}).on("touchend.ap",function(e){o=!1}).on("click.ap-touchclick",function(e){if(n)return n=!1})}function q(){if(ft.hide(),gr=!1,!mr){if(mr=!0,Li){var i=document.createElement("script");i.type="text/javascript",i.src=WPSVPUtils.qualifyURL(Ci+"js/scripts/jquery-ui.min.js"),i.onload=i.onreadystatechange=function(){if(!this.readyState||"complete"==this.readyState){var e=document.createElement("script");e.type="text/javascript",e.src=WPSVPUtils.qualifyURL(Ci+"js/scripts/jquery.ui.touch-punch.min.js"),e.onload=e.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||Re.sortable()},e.onerror=function(){alert("Error loading "+this.src)};var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}},i.onerror=function(){alert("Error loading "+this.src)};var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(i,a)}va&&!No&&j(),xi||Oe.on("mouseenter",P).on("mouseleave",R),we(),e(yr).trigger("setupDone",{instance:yr,instanceName:Vi}),Ce.css("opacity",1),Bi&&(io=WPSVPUtils.getElementOffsetTop(Ce[0]),wr.on(kr,function(){ao||(ao=!0,z(),setTimeout(function(){ao=!1},100))}))}if(ki&&xa&&!Is&&ke(),va){Ra&&(B(),Do=Uo,Re.find(".wpsvp-playlist-item").each(function(){if(0<Ao){var t=100/Uo;e(this).css({marginLeft:0,marginTop:0,marginRight:Ao+"px",marginBottom:Ao+"px",width:"calc("+t+"% - "+Ao+"px)"})}else e(this).css({marginLeft:0,marginTop:0,marginRight:Ao+"px",marginBottom:Ao+"px",width:100/Uo+"%"})}));var n=[];Re.find(".wpsvp-thumbimg:not(.wpsvp-visible)").each(function(){n.push(e(this))});var o=0;for(i=n.length,a=0;a<i;a++)setTimeout(function(){clearTimeout(this),n[o].addClass("wpsvp-visible"),o++},50+50*a);t.truncatePlaylistDescription&&(void 0!==e.fn.dotdotdot?Re.find(".wpsvp-playlist-info:not(.is-truncated)").each(function(){e(this).dotdotdot({watch:t.truncateWatch})}):((i=document.createElement("script")).type="text/javascript",i.src=WPSVPUtils.qualifyURL(Ci+"js/scripts/jquery.dotdotdot.min.js"),i.onload=i.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||Re.find(".wpsvp-playlist-info:not(.is-truncated)").each(function(){e(this).dotdotdot({watch:t.truncateWatch})})},i.onerror=function(){alert("Error loading "+this.src)},(a=document.getElementsByTagName("script")[0]).parentNode.insertBefore(i,a)))}!yo&&!Mo&&0<Fa&&((i=t.activeItem)>Fa-1&&(i=Fa-1),-1<i&&Es.setCounter(i,!1),yo=!0),Mo=!1,Sa&&(Sa=!1,"buttons"==Va&&Et.show())}function B(){var e,t=Ce.width(),i=Ki.length;for(e=0;e<i;e++){var a=Ki[e];t>a.width&&(Uo=a.column,Ao=a.gutter)}Pe.css({paddingTop:Ao+"px",paddingLeft:Ao+"px"})}function H(){WPSVPUtils.isScrolledIntoView(Ce[0])?(Ii=to=!0,yr.playMedia()):eo=setInterval(function(){WPSVPUtils.isScrolledIntoView(Ce[0])&&(clearInterval(eo),eo=null,Ii=to=!0,yr.playMedia())},400)}function z(){WPSVPUtils.getScrollTop()>io?Ce.hasClass(Hi)||Ce.addClass(Hi):Ce.hasClass(Hi)&&Ce.removeClass(Hi),we()}function W(i){if(no=i,ro&&!tn)if(no){if(An=!1,Ua&&cancelAnimationFrame(Ua),Na&&clearInterval(Na),oo=null,Ln&&(Ln.removeEventListener("change",se),Ln.reset()),"audio"==ro)Za&&(oo=Za.currentTime,Za.pause(),Za.src=""),$a&&$a.off("ended pause play ratechange loadedmetadata error");else if("video"==ro){if(Sr&&"video_360"==so&&_n&&_n.hide(),an){oo=an.currentTime,an.pause();try{an.currentTime=0}catch(e){}an.src="",an=null}nn&&nn.off("ended loadedmetadata ratechange waiting playing play pause error seeked")}else"image"==ro&&("image_360"==so?(Yn&&Yn.hide(),Wn=!1):(Ae.hide().find(".wpsvp-media").remove(),Fn=null));mt.hide(),_a=uo=!1}else ue();if(!no&&!tn){if(Aa=Da||(La||xe(ja)),Da=null,Bo?jo&&(zo?(Aa=xe(zo),Ho=!0):Wo&&Yo&&(Aa=xe(Wo),Ho=!0,Wo=null)):(Bo=!0,Fo?jo=Fo:Aa.adSection&&(jo=Aa.adSection),jo&&(La=Aa,jo.find(".wpsvp-ad").each(function(){var t=e(this);if(t.hasClass("wpsvp-ad-pre"))Ho=!0,Aa=xe(t);else if(t.hasClass("wpsvp-ad-mid")){var i=parseInt(t.attr("data-begin"),10);qr.push({begin:i,data:t})}else t.hasClass("wpsvp-ad-end")&&(Wo=t)}))),"youtube_single"==Aa.type?Aa.type="youtube":"vimeo_single"==Aa.type&&(Aa.type="vimeo"),"video_360"==(ro=Aa.type)?(ro="video",so="video_360"):"image_360"==ro&&(ro="image",so="image_360"),wi=null!=Aa.aspectRatio?Aa.aspectRatio:t.aspectRatio,Aa.subtitles&&m(),!$o&&!Ho&&($o=!0,er?Zo=er:Aa.annotationSection&&(Zo=Aa.annotationSection),Zo)){var a=0;if(Zo.find(".wpsvp-annotation").each(function(){var t=e(this).clone().attr("data-id",a++).appendTo(_e);t.hasClass("wpsvp-adsense-detail")?(e('<ins class="adsbygoogle" style="display:inline-block;width:'+t.attr("data-width")+"px;height:"+t.attr("data-height")+'px" data-ad-client="'+t.attr("data-ad-client")+'" data-ad-slot="'+t.attr("data-ad-slot")+'"></ins>').prependTo(t),tr=!0):t.hasClass("wpsvp-adsense-code")&&(tr=!0),Br.push({start:isNaN(parseInt(t.attr("data-show"),10))?0:parseInt(t.attr("data-show"),10),end:isNaN(parseInt(t.attr("data-hide"),10))?1e5:parseInt(t.attr("data-hide"),10),item:t})}),_e.show(),tr)if("undefined"==typeof adsbygoogle){if("file:"!=window.location.protocol){var n=document.createElement("script");n.type="text/javascript",n.src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",n.onload=n.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||_e.find(".adsbygoogle").each(function(){(adsbygoogle=window.adsbygoogle||[]).push({})})},n.onerror=function(){alert("Error loading "+this.src)},(i=document.getElementsByTagName("script")[0]).parentNode.insertBefore(n,i)}}else _e.find(".adsbygoogle").each(function(){(adsbygoogle=window.adsbygoogle||[]).push({})})}var o,r;if(Aa.chapters&&(jr=[],e.ajax({url:Aa.chapters}).done(function(e){e=e.replace(/\r\n|\r|\n/g,"\n"),e=(e=WPSVPUtils.strip(e)).split("\n\n");var t,i,a=0;for(t in e){var n=e[t].split("\n");if("WEBVTT"!=n){if(2<=n.length)if(2<n.length){var o=WPSVPUtils.strip(n[1].split(" --\x3e ")[0]),r=WPSVPUtils.strip(n[1].split(" --\x3e ")[1]),s=n[2];if(2<n.length)for(i=3;i<n.length;i++)s+="\n"+n[i]}else o=WPSVPUtils.strip(n[0].split(" --\x3e ")[0]),r=WPSVPUtils.strip(n[0].split(" --\x3e ")[1]),s=n[1];jr[a]={},jr[a].start=WPSVPUtils.toSeconds(o),jr[a].end=WPSVPUtils.toSeconds(r),jr[a].text=s,a++}}}).fail(function(e,t,i){console.log("Error loading chapters: ",e.responseText,t,i)}),Xe.addClass("wpsvp-seekbar-chapters"),ii.css("display","block")),!xi&&Aa.previewSeek&&(Cr=[],e.ajax({url:Aa.previewSeek}).done(function(e){e=e.replace(/\r\n|\r|\n/g,"\n"),e=(e=WPSVPUtils.strip(e)).split("\n\n");var t,i=0;for(t in e){var a=e[t].split("\n");if("WEBVTT"!=a){if(2<=a.length){var n=WPSVPUtils.strip(a[0].split(" --\x3e ")[0]),o=WPSVPUtils.strip(a[0].split(" --\x3e ")[1]);a=a[1],Cr[i]={},Cr[i].start=WPSVPUtils.toSeconds(n),Cr[i].end=WPSVPUtils.toSeconds(o),Cr[i].url=a}i++}}}).fail(function(e,t,i){console.log(e,t,i)})),To&&(0==(i=ja.next()).length&&t.loopingOn&&(i=Re.find(".wpsvp-playlist-item").eq(0)),i.length))null!=i.attr("data-thumb")?o=i.attr("data-thumb"):i.find(".wpsvp-thumbimg").length&&(o=i.find(".wpsvp-thumbimg").attr("src")),null!=i.attr("data-title")?r=i.attr("data-title"):i.find(".wpsvp-playlist-title").length&&(r=i.find(".wpsvp-playlist-title").html()),(o||r)&&(o&&At.css("background-image","url("+o+")"),r&&Dt.html(r),Ut.addClass("wpsvp-upnext-on"));if("lightbox"==ha&&(Rt.css("display","block"),"normal"==$r&&(o=Mt.width()/Fi,Mt.height(o)),1!=Rt.css("opacity")&&setTimeout(function(){clearTimeout(this),Rt.css("opacity",1)},50)),"audio"==ro)if(Aa.poster&&!tn){if(tn=!0,e(new Image).addClass("wpsvp-media").appendTo(Ue.show()).on("load",function(){en=e(this),WPSVPAspectRatio.resizeMedia("image",wi,Oe,en),en.addClass("wpsvp-visible")}).on("error",function(e){console.log(e)}).attr("src",Aa.poster),xo)return;if(!Ii)return void mt.show()}else Ue.show();else if(!("video"!=ro&&"youtube"!=ro&&"vimeo"!=ro||_i&&!to||Ii||!Aa.poster||tn)){var s;return tn=!0,"video"==ro?s=Ne:"youtube"==ro?s=De:"vimeo"==ro&&(s="default"==Xi?Le:je),e(new Image).addClass("wpsvp-media").appendTo(s.show()).on("load",function(){en=e(this),WPSVPAspectRatio.resizeMedia("image",wi,Oe,en),en.addClass("wpsvp-visible"),xo||mt.show()}).on("error",function(e){console.log(e)}).attr("src",Aa.poster),void(Ho||Aa.pwd&&ut.show())}}if(tn&&(oo=Aa.start||0,tn=!1),qo&&!Ho&&(oo=qo,qo=null),t.playbackPositionTime&&(oo=t.playbackPositionTime,delete t.playbackPositionTime),"audio"==ro||"video"==ro||"image"==ro){if(function(){var e=Aa.path.length;Aa.quality||(Aa.quality=Aa.path[0].quality);var t=0;e:for(;t<e;t++){var i=Aa.path[t];for(var a in i)if(i[a]==Aa.quality){"audio"==ro?pr&&i.wav?lo=i.wav:pr&&"wav"==i.ext?lo=i.src:cr&&i.mp3?lo=i.mp3:cr&&"mp3"==i.ext&&(lo=i.src):"video"==ro?ur&&i.mp4?lo=i.mp4:ur&&"mp4"==i.ext&&(lo=i.src):"image"==ro&&(i.image?lo=i.image:i.src&&(lo=i.src));break e}}-1!=lo.indexOf("ebsfm:")&&(lo=atob(lo.substr(6)))}(),no||(s=function(){var e=[],t=Aa.path.length;for(ws=0;ws<t;ws++){var i=Aa.path[ws];e.push(i.quality)}return e}(),Ai&&1==s.length||p(s,Aa.quality)),("video_360"==so||"image_360"==so)&&"undefined"==typeof THREE)return(n=document.createElement("script")).type="text/javascript",n.src=WPSVPUtils.qualifyURL(Ci+"js/scripts/three.min.js"),n.onload=n.onreadystatechange=function(){if(!this.readyState||"complete"==this.readyState){var e=document.createElement("script");e.type="text/javascript",e.src=WPSVPUtils.qualifyURL(Ci+"js/scripts/orbitControls.min.js"),e.onload=n.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||Y()},e.onerror=function(){alert("Error loading "+this.src)};var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}},n.onerror=function(){alert("Error loading "+this.src)},void(i=document.getElementsByTagName("script")[0]).parentNode.insertBefore(n,i)}else if("hls"==ro){if(lo=Aa.path,ro="video",so="hls",!Wa)return void("undefined"==typeof Hls?(n=document.createElement("script"),n.type="text/javascript",n.src="https://cdn.jsdelivr.net/npm/hls.js@latest",n.onload=n.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||(le(),Y())},n.onerror=function(){alert("Error loading "+this.src)},i=document.getElementsByTagName("script")[0],i.parentNode.insertBefore(n,i)):(le(),Y()))}else if("dash"==ro&&(lo=Aa.path,ro="video",so="dash",!Qa))return void("undefined"==typeof dashjs?(n=document.createElement("script"),n.type="text/javascript",n.src="https://cdn.dashjs.org/latest/dash.all.min.js",n.onload=n.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||(de(),Y())},n.onerror=function(){alert("Error loading "+this.src)},i=document.getElementsByTagName("script")[0],i.parentNode.insertBefore(n,i)):(de(),Y()));Y()}function Y(a){if(!Ho&&Aa.pwd)ut.show();else{a&&(Oi&&(Ii=!0),Mi&&(Ii=!0));setInterval(function(){1==randomClipMode?null!=an?an.playbackRate=1:null!=Za&&(Za.playbackRate=1):(i++,0==partFirstRandomTime&&0==partSecondRandomTime&&(randomVal=10*Math.random(),partFlag=randomVal>=3?1:randomVal<1.5?2:3,partFirstRandomTime=20*Math.random()+10),partFirstRandomTime>0&&(0==measureTime&&(null!=an?an.playbackRate=1:null!=Za&&(Za.playbackRate=1)),measureTime<partFirstRandomTime?measureTime++:(partSecondRandomTime=3!=partFlag?20*Math.random()+10:18*Math.random()+2,partFirstRandomTime=0,measureTime=0)),partSecondRandomTime>0&&(0==measureTime&&(1==partFlag?null!=an?an.playbackRate=2*Math.random()+2:null!=Za&&(Za.playbackRate=2*Math.random()+2):2==partFlag?null!=an?an.playbackRate=1/(2*Math.floor(4*Math.random()+1)):null!=Za&&(Za.playbackRate=1/(2*Math.floor(4*Math.random()+1))):3==partFlag&&(null!=an?an.playbackRate=0:null!=Za&&(Za.playbackRate=1))),measureTime<partSecondRandomTime?measureTime++:(partSecondRandomTime=0,measureTime=0)))},100);if("audio"==ro)Ja||($a=e(document.createElement("audio")).attr("preload",ji),Za=$a[0],Ja=!0),Za.src=lo,$a.on("ended",function(){be(),0==randomClipMode&&clearInterval(r)}).on("loadedmetadata",function(){if(null!=Aa.randomClipTime?(Aa.start=Math.random()*Za.duration,Aa.end=Aa.randomClipTime+Aa.start,randomClipMode=1):randomClipMode=0,Za.playbackRate?Za.playbackRate=Number(Za.playbackRate):c(1),ar)var e=setInterval(function(){3<=Za.readyState&&(clearInterval(e),null!=oo?Za.currentTime=oo:null!=Aa.start&&(Za.currentTime=Aa.start))},100);else null!=oo?Za.currentTime=oo:null!=Aa.start&&(Za.currentTime=Aa.start);if(null!=oo){var t=Za.play();void 0!==t&&t.then(function(e){}).catch(function(e){mt.show()})}else Ii?void 0!==(t=Za.play())&&t.then(function(e){}).catch(function(e){mt.show()}):mt.show();oo=null,_i&&!to&&H()}).on("play",function(){fe()}).on("pause",function(){me()}).on("ratechange",function(){c(Za.playbackRate)}).on("error",function(t){e(yr).trigger("mediaError",{instance:yr,instanceName:Vi,counter:Oa})}),Ii&&Za.load();else if("video"==ro){if(Aa.posterFrameTime&&(lo+="#t="+Aa.posterFrameTime),on)Ne.show(),nn=Ne.find(".wpsvp-media"),an=nn[0];else{var n=" playsinline";oa&&(n=""),a='<video class="wpsvp-media" preload="'+ji+'"'+n+">",a+='<source src="'+lo+'" />',a+="</video>",Ne.show().html(a),nn=Ne.find(".wpsvp-media"),an=nn[0],Ni&&l(0)}if(Sr&&"video_360"==so&&("file:"==window.location.protocol&&console.log("Playing 360 video and images requires online server connection!"),!Mn)){(On=new THREE.WebGLRenderer({antialias:!0})).setSize(640,360),On.domElement.className+="wpsvp-canvas-video",Ve.prepend(e(On.domElement)),_n=Ve.find(".wpsvp-canvas-video"),(Nn=new THREE.Texture(an)).minFilter=THREE.LinearFilter,Nn.magFilter=THREE.LinearFilter,Nn.format=THREE.RGBFormat,Un=new THREE.Scene,(a=new THREE.SphereGeometry(500,60,40)).scale(-1,1,1);var o=new THREE.MeshBasicMaterial({map:Nn});a=new THREE.Mesh(a,o),Un.add(a),Mn=!0}var r=setInterval(function(){1==randomClipMode?null!=an?an.playbackRate=1:null!=Za&&(Za.playbackRate=1):(i++,0==partFirstRandomTime&&0==partSecondRandomTime&&(randomVal=10*Math.random(),partFlag=randomVal>=3?1:randomVal<1.5?2:3,partFirstRandomTime=20*Math.random()+10),partFirstRandomTime>0&&(0==measureTime&&(null!=an?an.playbackRate=1:null!=Za&&(Za.playbackRate=1)),measureTime<partFirstRandomTime?measureTime++:(partSecondRandomTime=3!=partFlag?20*Math.random()+10:18*Math.random()+2,partFirstRandomTime=0,measureTime=0)),partSecondRandomTime>0&&(0==measureTime&&(1==partFlag?null!=an?an.playbackRate=2*Math.random()+2:null!=Za&&(Za.playbackRate=2*Math.random()*2):2==partFlag?null!=an?an.playbackRate=1/(2*Math.floor(4*Math.random()+1)):null!=Za&&(Za.playbackRate=1/(2*Math.floor(4*Math.random()+1))):3==partFlag&&(null!=an?an.playbackRate=0:null!=Za&&(Za.playbackRate=1))),measureTime<partSecondRandomTime?measureTime++:(partSecondRandomTime=0,measureTime=0)))},100);if(nn.on("ended",function(){be(),0==randomClipMode&&clearInterval(r)}).on("loadedmetadata",function(){if(WPSVPAspectRatio.resizeMedia("video",wi,Oe,nn),nn.addClass("wpsvp-visible"),null!=Aa.randomClipTime?(Aa.start=Math.random()*an.duration,Aa.end=Aa.randomClipTime+Aa.start,randomClipMode=1):randomClipMode=0,ar)var e=setInterval(function(){3<=an.readyState&&(clearInterval(e),null!=oo?an.currentTime=oo:null!=Aa.start&&(an.currentTime=Aa.start))},100);else null!=oo?an.currentTime=oo:null!=Aa.start&&(an.currentTime=Aa.start);if(null!=oo){var t=an.play();void 0!==t&&t.then(function(e){}).catch(function(e){mt.show()})}else Ii?void 0!==(t=an.play())&&t.then(function(e){}).catch(function(e){mt.show()}):mt.show();oo=null,nn.find("source").remove(),_i&&!to&&H()}).on("waiting",function(){xi&&"hls"==so||xi&&"dash"==so||ht.show()}).on("playing",function(){ht.hide()}).on("play",function(){fe()}).on("pause",function(){me()}).on("seeking",function(){An=!1}).on("seeked",function(){ht.hide(),Sr&&"video_360"==so&&(An=!0,Ua=requestAnimationFrame(ge))}).on("ratechange",function(){c(an.playbackRate)}).on("error",function(e){switch(e.target.error.code){case e.target.error.MEDIA_ERR_ABORTED:console.log("You aborted the video playback.");break;case e.target.error.MEDIA_ERR_NETWORK:console.log("A network error caused the video download to fail part-way.");break;case e.target.error.MEDIA_ERR_DECODE:console.log("The video playback was aborted due to a corruption problem or because the video used features your browser did not support.");break;case e.target.error.MEDIA_ERR_SRC_NOT_SUPPORTED:console.log("The video could not be loaded, either because the server or network failed or because the format is not supported.");break;default:console.log("An unknown error occurred.")}}),"hls"==so)if(Ha)Ba.attachMedia(an);else if(an.canPlayType("application/vnd.apple.mpegurl"))an.src=lo;else if(Aa.mp4)an.src=Aa.mp4,an.load();else try{an.src=lo,an.load()}catch(e){alert("This browser or device does not support HLS extension. Please use mp4 video for playback!")}else"dash"==so?Vr?Ga?Ya.attachSource(lo):(Ya.initialize(an,lo,Ii),Ga=!0):Aa.mp4?(an.src=Aa.mp4,an.load()):alert("This browser or device does not support MPEG-DASH extension. Please use mp4 video for playback!"):(an.src=lo,an.load());or&&!on&&(void 0!==(a=an.play())&&a.then(function(e){}).catch(function(e){mt.show()})),on=!0}else if("image"==ro)"image_360"==so?("file:"==window.location.protocol&&console.log("Playing 360 video and images requires online server connection!"),zn||(Xn=new THREE.Scene,(a=new THREE.SphereBufferGeometry(500,60,40)).scale(-1,1,1),Qn=new THREE.TextureLoader,Gn=new THREE.MeshBasicMaterial({map:Qn}),Jn=new THREE.Mesh(a,Gn),Xn.add(Jn),(Kn=new THREE.WebGLRenderer).setPixelRatio(window.devicePixelRatio),Kn.setSize(640,360),Kn.domElement.className+="wpsvp-canvas-image",Ve.prepend(e(Kn.domElement)),Yn=Ve.find(".wpsvp-canvas-image"),jn||(jn=!0,(Dn=new THREE.PerspectiveCamera(90,640/360,.1,1e4)).position.x+=.1,(Ln=new THREE.OrbitControls(Dn,Ve[0])).enableZoom=!1),zn=!0),Qn.load(lo,function(e){Yn.show(),Gn.map=e,e=Ve.width();var t=Ve.height();Kn.setSize(e,t),Dn.aspect=e/t,Dn.updateProjectionMatrix(),Ln.addEventListener("change",se),Kn.render(Xn,Dn),uo=_a=!0,Pt.show(),Wn=In=!0,Aa.duration&&(Hn&&clearTimeout(Hn),Hn=setTimeout(function(){clearTimeout(this),be()},1e3*Aa.duration))},function(e){},function(e){})):(ht.show(),e(new Image).addClass("wpsvp-media").prependTo(Ae.show()).on("load",function(){ht.hide(),Fn=e(this),WPSVPAspectRatio.resizeMedia("image",wi,Oe,Fn),Fn.addClass("wpsvp-visible"),uo=_a=!0,Aa.duration&&(qn=(new Date).getTime(),Bn=1e3*Aa.duration,Hn&&clearTimeout(Hn),Hn=setTimeout(function(){clearTimeout(this),be()},1e3*Aa.duration))}).on("error",function(e){console.log(e)}).attr("src",lo)),Ho?Aa.duration&&(si.show(),Fr=li.width(),Na&&clearInterval(Na),Na=setInterval(ye,250)):qe.show();else if("youtube"==ro){if(dn)un&&(a=0,null!=oo?a=oo:null!=Aa.start&&(a=Aa.start),Ii?ln.loadVideoById({videoId:Aa.path,startSeconds:a,endSeconds:Aa.end,suggestedQuality:Aa.quality}):ln.cueVideoById({videoId:Aa.path,startSeconds:a,endSeconds:Aa.end,suggestedQuality:Aa.quality}));else{a=(a=window.location.href.split("/"))[0]+"//"+a[2];var s=t.youtubeNoCookie?"//www.youtube-nocookie.com/embed/":"//www.youtube.com/embed/";n="1",oa&&(n="0");var d="ytplayer"+Math.floor(16777215*Math.random()),u="https:"==window.location.protocol?"https:":"http:",p="&controls=0",v="&color="+t.youtubePlayerColor,h="&showinfo=0",f="&modestbranding=1";o="&origin="+a,"chromeless"!=Gi&&(p="&controls=1",h="&showinfo=1",f="&modestbranding=1"),n=u+s+Aa.path+"?enablejsapi=1"+p+"&rel=0"+h+"&playsinline="+n+f+"&wmode=transparent&iv_load_policy=3&cc_load_policy=0"+v,/^http/.test(a)&&(n+=o),null!=oo?n+="&start="+oo:Aa.start&&(n+="&start="+Aa.start),Aa.end&&(n+="&end="+Aa.end),sn=e("<iframe/>",{id:d,frameborder:0,src:n,width:"100%",height:"100%",webkitAllowFullScreen:!0,mozallowfullscreen:!0,allowFullScreen:!0,allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"}),"chromeless"==Gi&&wa&&sn.addClass("wpsvp-yt-clean"),De.show().prepend(sn),window.YT||((a=document.createElement("script")).src="https://www.youtube.com/iframe_api",(o=document.getElementsByTagName("script")[0]).parentNode.insertBefore(a,o));var m=setInterval(function(){window.YT&&window.YT.Player&&(m&&clearInterval(m),ln=new YT.Player(d,{events:{onReady:Q,onPlaybackQualityChange:G,onPlaybackRateChange:X,onStateChange:K,onError:J}}))},100);dn=!0}De.show(),"chromeless"==Gi&&Aa.width&&Aa.height&&(sn.sw=Aa.width,sn.sh=Aa.height,WPSVPAspectRatio.resizeMedia("iframe",wi,De,sn))}else"vimeo"==ro?("file:"==window.location.protocol&&console.log("Playing Vimeo requires online server connection!"),"default"==(bn="chromeless"==Xi&&Aa.userAccount?"basic"==Aa.userAccount?"default":"chromeless":"default")?xn?(yn=Le,mn=Cn,gn=wn,En&&(yn.show(),gn.loadVideo(Aa.path),setTimeout(function(){clearTimeout(this),ie()},500))):(Cn=$("0"),Le.show().append(Cn),yn=Le,mn=Cn,window.Vimeo||((a=document.createElement("script")).src="//player.vimeo.com/api/player.js",(o=document.getElementsByTagName("script")[0]).parentNode.insertBefore(a,o)),m=setInterval(function(){window.Vimeo&&(m&&clearInterval(m),(gn=wn=new Vimeo.Player(Cn[0])).on("loaded",ie),gn.on("play",Z),gn.on("pause",ee),gn.on("ended",ne),gn.on("error",re),"chromeless"==bn&&(gn.on("playbackratechange",te),gn.on("timeupdate",ae)),En=!0)},100),xn=!0):(kn?(yn=je,mn=Vn,gn=Tn,Pn&&(yn.show(),gn.loadVideo(Aa.path),setTimeout(function(){clearTimeout(this),ie()},500))):(Vn=$("1"),je.show().append(Vn),yn=je,mn=Vn,window.Vimeo||((a=document.createElement("script")).src="//player.vimeo.com/api/player.js",(o=document.getElementsByTagName("script")[0]).parentNode.insertBefore(a,o)),m=setInterval(function(){window.Vimeo&&(m&&clearInterval(m),(gn=Tn=new Vimeo.Player(Vn[0])).on("loaded",ie),gn.on("play",Z),gn.on("pause",ee),gn.on("ended",ne),gn.on("error",re),gn.on("seeked",oe),"chromeless"==bn&&(gn.on("playbackratechange",te),gn.on("timeupdate",ae)),Pn=!0)},100),kn=!0),Aa.width&&Aa.height&&(mn.sw=Aa.width,mn.sh=Aa.height,WPSVPAspectRatio.resizeMedia("iframe",wi,yn,mn)))):"iframe"==ro&&e('<iframe src="'+Aa.path+'" style="border: 0px none transparent; width:100%; height:100%;" webkitAllowFullScreen mozallowfullscreen allowFullScreen allow="autoplay"></iframe>').appendTo(Fe.show());no||("video"==ro&&(fr||an.webkitSupportsPresentationMode&&"function"==typeof an.webkitSetPresentationMode)&&ai.show(),"audio"==ro||"video"==ro||"youtube"==ro&&"chromeless"==Gi||"vimeo"==ro&&"chromeless"==bn?(Aa.liveStream?(He.hide(),ze.hide(),We.hide(),Xe.hide(),xt.hide(),kt.hide(),Ct.hide()):(He.show(),ze.show(),We.show(),Xe.show(),xt.show(),kt.show(),Ct.show()),Be.show(),qt.show(),Ze.show()):(Be.hide(),qt.hide(),Ze.hide(),He.hide(),ze.hide(),We.hide(),Xe.hide(),xt.hide(),kt.hide(),Ct.hide()),(a=Aa.title||Aa.domTitle)&&(rt.html(a),ri.html(a)),Aa.description?(st.html(Aa.description),ot.show()):ot.hide(),sr&&Aa.download?bt.show().find("a").attr("href",Aa.download).attr("download",""):bt.hide()),("iframe"==ro||"youtube"==ro&&"default"==Gi||"vimeo"==ro&&"default"==bn)&&qe.hide(),Ho?e(yr).trigger("adRequest",{instance:yr,instanceName:Vi,adId:Aa.adId}):e(yr).trigger("mediaRequest",{instance:yr,instanceName:Vi,counter:Oa})}}function Q(e){un=!0,Ni&&(Ii=!0,l(0)),Ii?!vr&&!hr||yi||Ni?ln.playVideo():"wall"==Pa&&ln.playVideo():null!=oo&&Aa.poster&&ln.playVideo(),_i&&!to&&H()}function G(e){h(e.data)}function X(e){c(e.data)}function K(t){De.is(":visible")&&-1!=t.data&&(0==t.data?pn||(pn=!0,be()):1==t.data?(cn||(pn=!1,yi=!0,oo=null,Aa.quality&&ln.setPlaybackQuality(Aa.quality),t=ln.getAvailableQualityLevels(),Ai&&1==t.length||"chromeless"==Gi&&p(t,ln.getPlaybackQuality()),Aa.playbackRate&&1!=Aa.playbackRate?ln.setPlaybackRate(Number(Aa.playbackRate)):"chromeless"==Gi&&c(1),Qi&&(vn||(vn=e('<div class="wpsvp-iframe-blocker"></div>').css("display","block").on("click",function(){if(Ho)1==(e=ln.getPlayerState())?ln.pauseVideo():2==e?ln.playVideo():(-1==e||5==e||0==e)&&ln.playVideo();else if(cn&&Or)S();else{var e=ln.getPlayerState();1==e?ln.pauseVideo():2==e?ln.playVideo():(-1==e||5==e||0==e)&&ln.playVideo()}}).appendTo(De)),Aa.is360?vn.css("display","none"):vn.css("display","block")),cn=!0),"default"==Gi?uo=!0:fe()):2==t.data?"default"==Gi?uo=!1:me():3!=t.data&&5==t.data&&(null!=oo&&Aa.poster?ln.playVideo():Ii&&"outer"==Pa&&ln.playVideo()))}function J(e){switch(e.data){case 2:console.log("Error code = "+e.data+": The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.");break;case 100:console.log("Error code = "+e.data+": Video not found, removed, or marked as private");break;case 101:console.log("Error code = "+e.data+": Embedding disabled for this video");break;case 150:console.log("Error code = "+e.data+": Video not found, removed, or marked as private [same as error 100]")}}function $(i){var a=WPSVPUtils.rgbToHex(t.vimeoPlayerColor);"#"==a.charAt(0)&&(a=a.substr(1));var n="1";oa&&(n="0");var o=Oi?"1":"0",r="player"+Math.floor(16777215*Math.random());a="?color="+a,n="&playsinline="+n;var s="&muted=0";return o="&autoplay="+o,i="&background="+i,Ni&&(s="&muted=1",o="&autoplay=1",Ii=!0,l(0)),a="https://player.vimeo.com/video/"+Aa.path+a+"&byline=1&portrait=1&title=1&autopause=1"+n+"&loop=0&dnt=1"+i+"&speed=1"+s+o,Aa.quality&&(a+="&quality="+Aa.quality),e("<iframe/>",{id:r,frameborder:0,src:a,width:"100%",height:"100%",webkitAllowFullScreen:!0,mozallowfullscreen:!0,allowFullScreen:!0,allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"})}function Z(){if(!Rn){if(Aa.start||null!=oo){if(null!=oo)var e=oo;else Aa.start&&(e=Aa.start);oo=null,gn.setCurrentTime(e).then(function(e){}).catch(function(e){console.log(e.name)})}Aa.playbackRate&&1!=Aa.playbackRate?gn.setPlaybackRate(Aa.playbackRate).then(function(e){}).catch(function(e){qt.hide(),console.log(e.name)}):"chromeless"==bn&&qt.hide(),bi=!0,Oi&&(Ii=!0),Rn=!0}"default"==bn?uo=!0:fe()}function ee(){"default"==bn?uo=!1:me()}function te(e){c(e.playbackRate)}function ie(){"default"!=bn&&(Sn||(Sn=e('<div class="wpsvp-iframe-blocker"></div>').css("display","block").on("click",function(){Ho?gn.getPaused().then(function(e){e?gn.play():gn.pause()}):Rn&&Or?S():gn.getPaused().then(function(e){e?gn.play():gn.pause()})}).appendTo(yn)),Aa.is360?Sn.css("display","none"):Sn.css("display","block")),Ii?xi?bi?("chromeless"==bn&&mt.show(),gn.play()):bi=!0:((!vr&&!hr||bi)&&gn.play().then(function(){fe()}).catch(function(e){}),"chromeless"==bn&&mt.show()):null!=oo&&Aa.poster?gn.play():"chromeless"==bn&&mt.show(),_i&&!to&&H()}function ae(e){Er=e.duration,Pr=e.seconds,Rr=e.percent}function ne(){gn.off("timeupdate"),gn.off("ended"),be()}function oe(){ht.hide()}function re(e){console.log("Vimeo Player Error!",e)}function se(){"image_360"==so&&Kn.render(Xn,Dn),xi&&Or&&S(),In&&(In=!1,setTimeout(function(){clearTimeout(this),Pt.hide()},1e3))}function le(){Ba=new Hls,Ha=Hls.isSupported(),Wa=!0,Ba.subtitleDisplay=!1,Ba.subtitleTrack=-1,Ba.on(Hls.Events.MEDIA_ATTACHED,function(){Ba.loadSource(lo)}),Ba.on(Hls.Events.MANIFEST_PARSED,function(e,t){if(fa){var i,a=[],n=t.levels.length;for(i=0;i<n;i++){var o=t.levels[i];o.width&&a.push({label:o.width+"x"+o.height+", "+Math.ceil(Math.round(o.bitrate/1e3))+"kbps",value:i.toString()})}a.push({label:"auto",value:"-1",selected:!0}),Ai&&1==a.length||p(a,"-1")}}),Ba.on(Hls.Events.MANIFEST_LOADED,function(e,t){}),Ba.on(Hls.Events.LEVEL_LOADED,function(e,t){}),Ba.on(Hls.Events.AUDIO_TRACKS_UPDATED,function(t,i){if(ma){var a=Ba.audioTracks,n=a.length;if(1<n){var o;for(o=0;o<n;o++){var r=a[o],s=r.groupId+" - "+r.name;r=r.id.toString(),e("<li/>").addClass("wpsvp-menu-item").attr({"data-value":r,"data-label":s}).text(s).on("click",f).appendTo($t)}za=!0,ei.show(),ti.removeClass("wpsvp-force-hide")}}}),Ba.on(Hls.Events.AUDIO_TRACK_SWITCHED,function(e,t){if(za){var i=t.id;Vo&&Vo.removeClass("wpsvp-menu-active"),Vo=$t.find(".wpsvp-menu-item[data-value='"+i+"']").addClass("wpsvp-menu-active"),bs&&(gs.find(".wpsvp-audio-language-menu-value").text(Vo.text()),gs.find(".wpsvp-settings-menu").hide(),ys.show())}}),Ba.on(Hls.Events.AUDIO_TRACK_LOADED,function(e,t){}),Ba.on(Hls.Events.SUBTITLE_TRACK_SWITCH,function(e,t){var i=Ba.subtitleTracks.length;if(0<i&&!Aa.subtitles){var a;for(Aa.subtitles=[],a=0;a<i;a++){var n=Ba.subtitleTracks[a],o=a.toString();o={label:n.name,value:o,src:n.url},n.default&&(o.default=!0),Aa.subtitles.push(o)}m()}}),Ba.on(Hls.Events.SUBTITLE_TRACK_LOADED,function(e,t){}),Ba.on(Hls.Events.ERROR,function(e,t){if(t.fatal)switch(t.type){case Hls.ErrorTypes.NETWORK_ERROR:console.log("fatal network error encountered, try to recover"),Ba.startLoad();break;case Hls.ErrorTypes.MEDIA_ERROR:console.log("fatal media error encountered, try to recover"),Ba.recoverMediaError();break;default:Ba.destroy()}})}function de(){Ya=dashjs.MediaPlayer().create(),Qa=!0,Ya.setFastSwitchEnabled=!0,Ya.on(dashjs.MediaPlayer.events.STREAM_INITIALIZED,function(t){if(fa){var i=Ya.getBitrateInfoListFor("video");console.log(i);var a=[],n=i.length;for(t=0;t<n;t++){var o=i[t];o.width&&a.push({label:o.width+"x"+o.height+", "+Math.ceil(Math.round(o.bitrate/1e3))+"kbps",value:o.qualityIndex.toString()})}a.push({label:"auto",value:"-1",selected:!0}),Ai&&1==a.length||p(a,"-1")}if(ma&&(i=Ya.getBitrateInfoListFor("audio"),console.log(i),1<(n=i.length))){for(t=0;t<n;t++)o=i[t],a=Math.ceil(Math.round(o.bitrate/1e3))+"kbps",o=o.qualityIndex.toString(),e("<li/>").addClass("wpsvp-menu-item").attr({"data-value":o,"data-label":a}).text(a).on("click",f).appendTo($t);za=!0,ei.show(),ti.removeClass("wpsvp-force-hide")}}),Ya.on(dashjs.MediaPlayer.events.QUALITY_CHANGE_REQUESTED,function(e){console.log("QUALITY_CHANGE_REQUESTED",e.oldQuality,e.newQuality)}),Ya.on(dashjs.MediaPlayer.events.QUALITY_CHANGE_RENDERED,function(e){console.log("dashjs.MediaPlayer.events.QUALITY_CHANGE_RENDERED",e.newQuality)}),Ya.on(dashjs.MediaPlayer.events.TRACK_CHANGE_RENDERED,function(e){console.log("TRACK_CHANGE_RENDERED",e)}),Ya.on(dashjs.MediaPlayer.events.TEXT_TRACKS_ADDED,function(e){}),Ya.on(dashjs.MediaPlayer.events.ERROR,function(e){console.log("dashjs.MediaPlayer.events.ERROR "+e.error+" : "+e.event.message)}),Ya.on(dashjs.MediaPlayer.events.PLAYBACK_ERROR,function(e){console.log("dashjs.MediaPlayer.events.PLAYBACK_ERROR")})}function ue(){if(An=!1,Ua&&cancelAnimationFrame(Ua),Na&&clearInterval(Na),Hn&&(clearTimeout(Hn),Hn=null),eo&&(clearInterval(eo),eo=null),Pt.hide(),In=!1,Ha&&"hls"==so&&Ba.detachMedia(),Vr&&"dash"==so&&Ya.attachSource(null),Ln&&(Ln.removeEventListener("change",se),Ln.reset()),"audio"==ro)Za&&(Za.pause(),Za.src=""),$a&&$a.off("ended pause play ratechange loadedmetadata error"),Ue.hide();else if("video"==ro){if(Sr&&"video_360"==so&&_n&&_n.hide(),an){an.pause();try{an.currentTime=0}catch(e){}an.src="",an=null}nn&&nn.off("ended loadedmetadata ratechange waiting playing play pause error seeked"),Ne.hide()}else"image"==ro?"image_360"==so?(Yn&&Yn.hide(),Wn=!1):(Ae.hide().find(".wpsvp-media").remove(),Fn=null):"youtube"==ro?ln&&(pn=!0,De.hide(),un&&ln.stopVideo(),cn=!1,sn&&(sn.sw=null,sn.sh=null)):"vimeo"==ro?(Rr=Pr=Er=0,gn&&(gn.unload().then(function(){}).catch(function(e){console.log(e)}),mn&&(mn.sw=null,mn.sh=null)),Rn=!1,yn&&yn.hide()):"iframe"==ro&&Fe.empty().hide();en&&(en.remove(),en=null),Ho&&(Ho=!1,pi.removeClass("wpsvp-ad-skip-btn-visible"),si.hide(),mi.hide(),Yo=zo=null,hi.html(fi),Xo=!1),_e.hide().empty(),Br=[],tr=!1,ai.hide(),Ce.removeClass("wpsvp-holder-visible"),Xe.hide(),Be.hide(),qt.hide(),Ze.hide(),gs.hide().removeClass("wpsvp-menu-bottom").find(".wpsvp-settings-menu").css("display","none"),ys.show(),He.hide(),ze.hide(),We.hide(),Ms=!1,Jo=null,Ie.hide(),Me.empty(),Po=!1,Dr=[],Ar=[],Eo=Ro=null,Kt.empty(),Gt.hide(),Jt.addClass("wpsvp-force-hide"),zt.hide(),Yt.empty(),Qt.addClass("wpsvp-force-hide"),ei.hide(),$t.empty(),ti.addClass("wpsvp-force-hide"),za=!1,Ii||qe.hide(),qe.removeClass("wpsvp-interface-visible"),Ro&&Me.removeClass("wpsvp-subtitle-bottom"),os.hide(),qa=null,Cr=[],Ye.hide(),Xt.removeClass("wpsvp-menu-bottom"),Wt.removeClass("wpsvp-menu-bottom"),Bt.removeClass("wpsvp-menu-bottom"),po=!1,nt.hide(),rt.html(""),ri.html(""),st.html(""),ot.hide(),vo=!1,lt.hide(),oi.text(oi.attr("data-copy-text")),ni.text(ni.attr("data-copy-text")),Tt.hide(),fo=!1,mt.hide(),Ut.removeClass("wpsvp-upnext-on wpsvp-upnext-visible"),At.css("background-image","none"),Dt.html(""),ut.hide(),ct.val(""),Aa=so=ro=oo=null,tn=_a=uo=!1,Or=!0,di.width(0),ui.width(0),Je.width(0),$e.width(0)}function ce(){mr&&ro&&(ja&&E(),ue(),Es.reSetCounter())}function pe(){ro&&ue(),Re.find(".wpsvp-playlist-item").remove(),Fa=0,Es.reSetCounter(),yo=!1,Ss="",go=null,Sa=$n=!1,ir=To=er=Fo=wo=null,xo=!1}function ve(){mr&&0!=Fa&&Es.advanceHandler(1,!0)}function he(){mr&&0!=Fa&&Es.advanceHandler(-1,!0)}function fe(){if(ht.hide(),mt.hide(),Be.find(".wpsvp-btn-play").hide(),Be.find(".wpsvp-btn-pause").show(),"custom"==ca&&(is.find(".wpsvp-context-playback-play").hide(),is.find(".wpsvp-context-playback-pause").show()),!_a){if(Oi&&(Ii=!0),Mi&&(Ii=!0),l(),Dr.length&&Ie.show(),Sr&&"video_360"==so){Ne.hide(),_n.show(),Pt.show(),In=!0,jn||(jn=!0,(Dn=new THREE.PerspectiveCamera(90,640/360,.1,1e4)).position.x+=.1,(Ln=new THREE.OrbitControls(Dn,Ve[0])).enableZoom=!1),Ln.addEventListener("change",se);var t=Ve.width(),i=Ve.height();On.setSize(t,i),Dn.aspect=t/i,Dn.updateProjectionMatrix(),An=!0,Ua&&cancelAnimationFrame(Ua),Ua=requestAnimationFrame(ge)}if(("audio"==ro||"video"==ro||"youtube"==ro&&"chromeless"==Gi||"vimeo"==ro&&"chromeless"==bn)&&(Na&&clearInterval(Na),Na=setInterval(ye,250)),Ho?e(yr).trigger("adStart",{instance:yr,instanceName:Vi,adId:Aa.adId}):e(yr).trigger("mediaStart",{instance:yr,instanceName:Vi,counter:Oa}),_a=!0,"audio"==ro||"video"==ro||"youtube"==ro&&"chromeless"==Gi||"vimeo"==ro&&"chromeless"==bn)if(t=yr.getDuration(),isNaN(t))var a=setTimeout(function(){clearTimeout(a);var e=yr.getDuration();He.html(WPSVPUtils.formatTime(0)),We.html(WPSVPUtils.formatTime(e)),qe.show(),ss=Ke.width(),Ho?qe.hide():ia&&S(),Lo||(jr.length&&w(e),Lo=!0),Ko||(ba&&qr.length&&T(e),Ko=!0)},500);else He.html(WPSVPUtils.formatTime(0)),We.html(WPSVPUtils.formatTime(t)),qe.show(),ss=Ke.width(),Ho?qe.hide():ia&&S(),Lo||(jr.length&&w(t),Lo=!0),Ko||(ba&&qr.length&&T(t),Ko=!0);Ho&&(si.show(),Fr=li.width())}if(Di&&1<wpsvp_mediaArr.length)for(i=wpsvp_mediaArr.length,t=0;t<i;t++)yr!=wpsvp_mediaArr[t].inst&&wpsvp_mediaArr[t].inst.pauseMedia();Ho?e(yr).trigger("adPlay",{instance:yr,instanceName:Vi,adId:Aa.adId}):e(yr).trigger("mediaPlay",{instance:yr,instanceName:Vi,counter:Oa}),uo=!0}function me(){if(ht.hide(),Be.find(".wpsvp-btn-play").show(),Be.find(".wpsvp-btn-pause").hide(),"custom"==ca&&(is.find(".wpsvp-context-playback-pause").hide(),is.find(".wpsvp-context-playback-play").show()),vo||fo||ho||(_a?("audio"==ro||"video"==ro||"youtube"==ro&&"chromeless"==Gi||"vimeo"==ro&&"chromeless"==bn)&&mt.show():"audio"!=ro&&"video"!=ro||mt.show()),Ho?e(yr).trigger("adPause",{instance:yr,instanceName:Vi,adId:Aa.adId}):e(yr).trigger("mediaPause",{instance:yr,instanceName:Vi,counter:Oa}),Ho&&Aa.link){if(!Aa.target||"_blank"!=Aa.target){var t=Aa.link;return ce(),void(window.location=t)}window.open(Aa.link)}uo=!1}function ge(){An&&(nn.readyState===nn.HAVE_ENOUGH_DATA&&(Nn.needsUpdate=!0),On.render(Un,Dn),Ua=requestAnimationFrame(ge))}function ye(i){if(void 0!==i||uo){var a;if("audio"==ro){var n=Za.currentTime,o=Za.duration;if(void 0!==Za.buffered&&0!=Za.buffered.length){try{var r=Za.buffered.end(Za.buffered.length-1)}catch(e){}isNaN(r)||(a=r/Math.floor(Za.duration))}}else if("video"==ro){if(n=an.currentTime,o=an.duration,void 0!==an.buffered&&0!=an.buffered.length){try{r=an.buffered.end(an.buffered.length-1)}catch(e){}isNaN(r)||(a=r/Math.floor(an.duration))}}else"youtube"==ro?(n=ln.getCurrentTime(),o=ln.getDuration(),a=ln.getVideoLoadedFraction()):"vimeo"==ro?(n=Pr,o=Er,a=Rr):"image"==ro&&(a=1e3*Aa.duration,n=(new Date).getTime()-qn,0>(Bn-=n)&&(Bn=0),qn=(new Date).getTime(),n=(a-Bn)/1e3,o=Aa.duration,a=1);if(WPSVPUtils.isNumber(n)&&WPSVPUtils.isNumber(o)){if(i=parseInt(n,10),Ho){if(i!=Jo&&(ci.html("&nbsp;(-"+WPSVPUtils.formatTime(o-i)+")"),0<i)){var s;if(!Xo&&(Xo=!0,Go=!1,Qo=null,void 0!==Aa.skipEnable))Qo=Aa.skipEnable,Yo?(0==(r=ja.next()).length&&t.loopingOn&&(r=Re.find(".wpsvp-playlist-item").eq(0)),r.length&&(null!=r.attr("data-thumb")?s=r.attr("data-thumb"):r.find(".wpsvp-thumbimg").length&&(s=r.find(".wpsvp-thumbimg").attr("src")))):La.thumb?s=La.thumb:ja.find(".wpsvp-thumbimg").length&&(s=ja.find(".wpsvp-thumbimg").attr("src")),s&&e('<img src="'+s+'" alt=""/>').appendTo(gi.empty().show()),vi.show(),pi.addClass("wpsvp-ad-skip-btn-visible");null==Qo||Go||(i<Qo?hi.html(fi+"&nbsp;"+(Qo-i).toString()):(Go=!0,gi.hide(),vi.hide(),mi.show()))}a&&di.width(a*Fr),ui.width(n/o*Fr)}else{if(i!=Jo){if(Aa.end&&n>=Aa.end)return"loop"!=Pi&&"rewind"!=Pi&&(Na&&clearInterval(Na),An=!1,Ua&&cancelAnimationFrame(Ua)),void be();if(qr.length)for(r=qr.length,s=0;s<r;s++){var l=qr[s];if(i==l.begin)return Na&&clearInterval(Na),An=!1,Ua&&cancelAnimationFrame(Ua),zo=l.data,qo=l.begin+1,ea&&(qr[s].marker.remove(),qr.splice(s,1)),void W()}if(Br.length)for(r=Br.length,s=0;s<r;s++){var d=(l=Br[s]).start,u=l.end;l=l.item,i>=d&&i<=u-1?l.wpsvpvisible||(l.hasClass("wpsvp-iframe")&&l.find("iframe").each(function(){e(this).attr("src",e(this).attr("data-src"))}),l.css("display","block"),l.wpsvpvisible=!0):l.wpsvpvisible&&(l.css("display","none"),l.hasClass("wpsvp-iframe")&&l.find("iframe").each(function(){e(this).attr("src","about:blank")}),l.wpsvpvisible=!1)}if(Po&&Dr.length)for(r=Dr.length,s=0;s<r;s++)d=(l=Dr[s]).start,u=l.end,i>=d&&i<=u?Ro||(Ro=e('<div class="wpsvp-subtitle">'+l.text+"</div>"),Or||Me.addClass("wpsvp-subtitle-bottom"),Ro.start=d,Ro.end=u,Me.append(Ro)):Ro&&(i<Ro.start||i>Ro.end)&&(Ro.remove(),Ro=null);0<o&&Ut.hasClass("wpsvp-upnext-on")&&(i>o-To?Ut.addClass("wpsvp-upnext-visible"):Ut.removeClass("wpsvp-upnext-visible")),He.html(WPSVPUtils.formatTime(i)),We.html(WPSVPUtils.formatTime(o))}a&&1!=a&&Je.width(a*ss),$e.width(n/o*ss)}Jo=i}}}function be(){if(Ho&&e(yr).trigger("adEnd",{instance:yr,instanceName:Vi,adId:Aa.adId}),void 0!==Aa.endLink){if("_blank"!=Aa.endTarget)return ce(),void(window.location=Aa.endLink);window.open(Aa.endLink)}if(Ho&&!Yo)W();else if(Wo)Yo=!0,W();else{e(yr).trigger("mediaEnd",{instance:yr,instanceName:Vi,counter:Oa});var t=Aa.start||0;"next"==Pi?ve():"loop"==Pi?"audio"==ro?Za&&(Za.currentTime=t,Za.play()):"video"==ro?an&&(an.currentTime=t,an.play()):"youtube"==ro?ln&&(ln.seekTo(t),ln.playVideo()):"vimeo"==ro&&gn&&(gn.pause(),gn.setCurrentTime(t),gn.play()):"rewind"==Pi&&("audio"==ro?Za&&(Za.currentTime=t,Za.pause()):"video"==ro?an&&(an.currentTime=t,an.pause()):"youtube"==ro?ln&&(ln.seekTo(t),ln.pauseVideo()):"vimeo"==ro&&gn&&(gn.pause(),gn.setCurrentTime(t)))}}function we(){if("left_bottom"==Pa||"right_bottom"==Pa)if(Ce.width()>Ji){Ee.removeClass("wpsvp-playlist-holder-bottom").width(Wi);var t=Ui?Ce.width()-Ee.width():Ce.width();if(Oe.width(t),"100%"==Ca){var i=Ce.height();Oe.height(i),Ee.height(i)}else i="fullscreen"==$r?Ce.height():t/Fi,Oe.height(i),Ee.height(i),Ce.height(i)}else Ee.addClass("wpsvp-playlist-holder-bottom"),"100%"==Ca?(Ee.css({height:zi,width:"100%"}),t=Ce.width(),i=Ui?Ce.height()-Ee.height():Ce.height(),Oe.css({height:i,width:t})):(i=(t=Ce.width())/Fi,Oe.css({height:i,width:t}),Ee.css({height:zi,width:"100%"}),Ui?Ce.height(i+Ee.height()):Ce.height(i),"fullscreen"==$r&&(Ui?Oe.height(Ce.height()-Ee.height()):Oe.height(Ce.height())));else"left"==Pa||"right"==Pa?(t=Ui?Ce.width()-Ee.width():Ce.width(),Oe.width(t),"100%"==Ca&&(i=Ce.height(),Oe.height(i))):"bottom"==Pa||"top"==Pa?"100%"==Ca?(t=Ui?Ce.height()-Ee.height():Ce.height(),Oe.height(t)):(i=(t=Ce.width())/Fi,Oe.height(i),Ui?Ce.height(i+Ee.height()):Ce.height(i),"fullscreen"==$r&&(Ui?Oe.height(Ce.height()-Ee.height()):Oe.height(Ce.height()))):"lightbox"==ha?"normal"==$r&&(i=(t=Mt.width())/Fi,Mt.height(i)):"outer"==Pa?(i=(t=Ce.width())/Fi,Oe.height(i)):"no-playlist"==Pa&&(i=(t=Ce.width())/Fi,Oe.height(i),Ce.height(i),"fullscreen"==$r&&Oe.height(Ce.height()));if(va&&Ra&&(B(),Uo!=Do&&(Do=Uo,Re.find(".wpsvp-playlist-item").each(function(){if(0<Ao){var t=100/Uo;e(this).css({marginLeft:0,marginTop:0,marginRight:Ao+"px",marginBottom:Ao+"px",width:"calc("+t+"% - "+Ao+"px)"})}else e(this).css({marginLeft:0,marginTop:0,marginRight:Ao+"px",marginBottom:Ao+"px",width:100/Uo+"%"})}))),va)if("buttons"==Va){if("horizontal"==Ea){t=Pe.width();var a=Re.width();i="translateX"}else t=Pe.height(),a=Re.height(),i="translateY";if(a<t){Mr=!1,Vt.hide(),Et.hide();var n=parseInt(t/2-a/2,10)}else Mr=!0,Zn?n=Zn:(n=Re[0].style.transform.replace(/[^\d.]/g,""),n=parseInt(n)||0),0<n?(n=0,Et.show()):n<t-a&&(n=t-a,Vt.show());Zn=n,Re.css({"-webkit-transform":i+"("+n+"px)","-ms-transform":i+"("+n+"px)",transform:i+"("+n+"px)"})}else"hover"==Va&&("horizontal"==Ea?(t=Pe.width(),(a=Re.width())<t?(Mr=!1,n=parseInt(t/2-a/2,10)):(Mr=!0,0<(n=parseInt(Re.css("left"),10))?n=0:n<t-a&&(n=t-a)),Re.css("left",n+"px")):(i=Pe.height(),(a=Re.height())<i?(Mr=!1,n=parseInt(i/2-a/2,10)):(Mr=!0,0<(n=parseInt(Re.css("top"),10))?n=0:n<i-a&&(n=i-a)),Re.css("top",n+"px")));if(ss=Ke.width(),Fr=li.width(),ro&&("audio"==ro?en&&WPSVPAspectRatio.resizeMedia("image",wi,Oe,en):"video"==ro?Sr&&"video_360"==so?An&&(t=Ve.width(),i=Ve.height(),On.setSize(t,i),Dn.aspect=t/i,Dn.updateProjectionMatrix()):en?WPSVPAspectRatio.resizeMedia("image",wi,Oe,en):nn&&WPSVPAspectRatio.resizeMedia("video",wi,Oe,nn):"image"==ro?"image_360"==so?Wn&&(t=Ve.width(),i=Ve.height(),Kn.setSize(t,i),Dn.aspect=t/i,Dn.updateProjectionMatrix(),Kn.render(Xn,Dn)):Fn&&WPSVPAspectRatio.resizeMedia("image",wi,Oe,Fn):"youtube"==ro?"chromeless"==Gi&&Aa.width&&Aa.height&&WPSVPAspectRatio.resizeMedia("iframe",wi,De,sn):"vimeo"==ro&&"chromeless"==bn&&Aa.width&&Aa.height&&WPSVPAspectRatio.resizeMedia("iframe",wi,yn,mn)),$i)for(n=$i.length,t=Ce.width(),a=0;a<n;a++)t<(i=$i[a]).width?(-1==i.elements.indexOf("controls")&&qe.addClass("wpsvp-force-hide"),-1==i.elements.indexOf("seekbar")&&Xe.addClass("wpsvp-force-hide"),-1==i.elements.indexOf("play")&&Be.addClass("wpsvp-force-hide"),-1==i.elements.indexOf("time")&&(He.addClass("wpsvp-force-hide"),We.addClass("wpsvp-force-hide"),ze.addClass("wpsvp-force-hide")),-1==i.elements.indexOf("download")&&bt.addClass("wpsvp-force-hide"),-1==i.elements.indexOf("pip")&&ai.addClass("wpsvp-force-hide"),-1==i.elements.indexOf("share")&&wt.addClass("wpsvp-force-hide"),-1==i.elements.indexOf("info")&&ot.addClass("wpsvp-force-hide"),-1==i.elements.indexOf("embed")&&dt.addClass("wpsvp-force-hide"),-1==i.elements.indexOf("next")&&Lt.addClass("wpsvp-force-hide"),-1==i.elements.indexOf("previous")&&jt.addClass("wpsvp-force-hide"),-1==i.elements.indexOf("seek_backward")&&xt.addClass("wpsvp-force-hide"),-1==i.elements.indexOf("seek_forward")&&kt.addClass("wpsvp-force-hide"),-1==i.elements.indexOf("rewind")&&Ct.addClass("wpsvp-force-hide"),-1==i.elements.indexOf("volume")&&Ze.addClass("wpsvp-force-hide"),-1==i.elements.indexOf("fullscreen")&&Zr.addClass("wpsvp-force-hide"),-1==i.elements.indexOf("playlist")&&vt.addClass("wpsvp-force-hide"),-1==i.elements.indexOf("quality")&&zt.addClass("wpsvp-force-hide"),-1==i.elements.indexOf("playback_rate")&&qt.addClass("wpsvp-force-hide"),-1==i.elements.indexOf("subtitles")&&(Gt.addClass("wpsvp-force-hide"),Ie.addClass("wpsvp-force-hide")),-1==i.elements.indexOf("annotations")&&_e.addClass("wpsvp-force-hide"),-1==i.elements.indexOf("audio_language")&&ei.addClass("wpsvp-force-hide"),-1==i.elements.indexOf("upnext")&&Ut.addClass("wpsvp-force-hide"),-1==i.elements.indexOf("settings")&&ms.addClass("wpsvp-force-hide")):(-1==i.elements.indexOf("controls")&&qe.removeClass("wpsvp-force-hide"),-1==i.elements.indexOf("seekbar")&&Xe.removeClass("wpsvp-force-hide"),-1==i.elements.indexOf("play")&&Be.removeClass("wpsvp-force-hide"),-1==i.elements.indexOf("time")&&(He.removeClass("wpsvp-force-hide"),We.removeClass("wpsvp-force-hide"),ze.removeClass("wpsvp-force-hide")),-1==i.elements.indexOf("download")&&bt.removeClass("wpsvp-force-hide"),-1==i.elements.indexOf("pip")&&ai.removeClass("wpsvp-force-hide"),-1==i.elements.indexOf("share")&&wt.removeClass("wpsvp-force-hide"),-1==i.elements.indexOf("info")&&ot.removeClass("wpsvp-force-hide"),-1==i.elements.indexOf("embed")&&dt.removeClass("wpsvp-force-hide"),-1==i.elements.indexOf("next")&&Lt.removeClass("wpsvp-force-hide"),-1==i.elements.indexOf("previous")&&jt.removeClass("wpsvp-force-hide"),-1==i.elements.indexOf("seek_backward")&&xt.removeClass("wpsvp-force-hide"),-1==i.elements.indexOf("seek_forward")&&kt.removeClass("wpsvp-force-hide"),-1==i.elements.indexOf("rewind")&&Ct.removeClass("wpsvp-force-hide"),-1==i.elements.indexOf("volume")&&Ze.removeClass("wpsvp-force-hide"),-1==i.elements.indexOf("fullscreen")&&Zr.removeClass("wpsvp-force-hide"),-1==i.elements.indexOf("playlist")&&vt.removeClass("wpsvp-force-hide"),-1==i.elements.indexOf("quality")&&zt.removeClass("wpsvp-force-hide"),-1==i.elements.indexOf("playback_rate")&&qt.removeClass("wpsvp-force-hide"),-1==i.elements.indexOf("subtitles")&&(Gt.removeClass("wpsvp-force-hide"),Ie.removeClass("wpsvp-force-hide")),-1==i.elements.indexOf("annotations")&&_e.removeClass("wpsvp-force-hide"),-1==i.elements.indexOf("audio_language")&&ei.removeClass("wpsvp-force-hide"),-1==i.elements.indexOf("upnext")&&Ut.removeClass("wpsvp-force-hide"),-1==i.elements.indexOf("settings")&&ms.removeClass("wpsvp-force-hide"));if(ua&&Ro){for(t=Me.width(),n=Lr.length,a=0;a<n;a++)if(t>(i=Lr[a]).width)var o=i.size;Me.css("fontSize",o+"px")}bs&&gs.is(":visible")&&(gs.height()>Ft.offset().top-wr.scrollTop()?(gs.addClass("wpsvp-menu-bottom"),Ce.addClass("wpsvp-holder-visible")):(gs.removeClass("wpsvp-menu-bottom"),Ce.removeClass("wpsvp-holder-visible")))}function Te(e){if(!mr)return!1;if(void 0!==e){if(Ui&&1==e||!Ui&&0==e)return!1;Ui=!e}Ui?Ee.hide():Ee.show(),Ui=!Ui,we()}function xe(t){var i={};if("html"==(t.type?"data":"html")){if(i.origclasses=t.attr("class"),i.type=t.attr("data-type"),ir?i.pwd=ir:null==t.attr("data-pwd")||WPSVPUtils.isEmpty(t.attr("data-pwd"))||(i.pwd=t.attr("data-pwd")),null!=t.attr("data-noapi")&&(i.noapi=!0),null!=t.attr("data-live-stream")&&(i.liveStream=!0),null==t.attr("data-alt")||WPSVPUtils.isEmpty(t.attr("data-alt"))||(i.alt=t.attr("data-alt")),null==t.attr("data-deeplink")||WPSVPUtils.isEmpty(t.attr("data-deeplink"))||(i.deeplink=t.attr("data-deeplink")),"image"==i.type||"image_360"==i.type||"audio"==i.type||"video"==i.type||"video_360"==i.type?i.path=t.data("path"):null==t.attr("data-path")||WPSVPUtils.isEmpty(t.attr("data-path"))||(i.path=t.attr("data-path"),-1!=i.path.indexOf("ebsfm:")&&(i.path=atob(i.path.substr(6)))),null==t.attr("data-mp4")||WPSVPUtils.isEmpty(t.attr("data-mp4"))||(i.mp4=t.attr("data-mp4")),null==t.attr("data-thumb")||WPSVPUtils.isEmpty(t.attr("data-thumb"))||(i.thumb=t.attr("data-thumb")),null==t.attr("data-title")||WPSVPUtils.isEmpty(t.attr("data-title"))||(i.title=t.attr("data-title")),t.find(".wpsvp-playlist-title").length&&(i.domTitle=t.find(".wpsvp-playlist-title").html()),null==t.attr("data-description")||WPSVPUtils.isEmpty(t.attr("data-description"))?t.find(".wpsvp-playlist-description").length&&(i.description=t.find(".wpsvp-playlist-description").html()):i.description=t.attr("data-description"),null==t.attr("data-quality")||WPSVPUtils.isEmpty(t.attr("data-quality"))||(i.quality=t.attr("data-quality")),null==t.attr("data-download")||WPSVPUtils.isEmpty(t.attr("data-download"))||(i.download=t.attr("data-download")),null==t.attr("data-poster")||WPSVPUtils.isEmpty(t.attr("data-poster"))||(i.poster=t.attr("data-poster")),null==t.attr("data-poster-frame-time")||WPSVPUtils.isEmpty(t.attr("data-poster-frame-time"))||(i.posterFrameTime=t.attr("data-poster-frame-time")),null==t.attr("data-start")||WPSVPUtils.isEmpty(t.attr("data-start"))||(i.start=Number(t.attr("data-start"))),null==t.attr("data-end")||WPSVPUtils.isEmpty(t.attr("data-end"))||(i.end=Number(t.attr("data-end"))),null!=t.attr("data-random-clip-time")&&!WPSVPUtils.isEmpty(t.attr("data-random-clip-time"))&&WPSVPUtils.isNumber(t.attr("data-random-clip-time"))&&(i.randomClipTime=Number(t.attr("data-random-clip-time"))),null==t.attr("data-duration")||WPSVPUtils.isEmpty(t.attr("data-duration"))||(i.duration=t.attr("data-duration")),null!=t.attr("data-playback-rate")&&!WPSVPUtils.isEmpty(t.attr("data-playback-rate"))&&WPSVPUtils.isNumber(t.attr("data-playback-rate"))&&(i.playbackRate=Number(t.attr("data-playback-rate"))),null==t.attr("data-aspect-ratio")||WPSVPUtils.isEmpty(t.attr("data-aspect-ratio"))||(i.aspectRatio=t.attr("data-aspect-ratio")),null!=t.attr("data-id3")&&(i.id3=!0),null==t.attr("data-share")||WPSVPUtils.isEmpty(t.attr("data-share"))||(i.share=t.attr("data-share")),null==t.attr("data-limit")||WPSVPUtils.isEmpty(t.attr("data-limit"))||(i.limit=Number(t.attr("data-limit"))),null==t.attr("data-width")||WPSVPUtils.isEmpty(t.attr("data-width"))||null==t.attr("data-height")||WPSVPUtils.isEmpty(t.attr("data-height"))||(i.width=parseInt(t.attr("data-width"),10),i.height=parseInt(t.attr("data-height"),10)),null!=t.attr("data-is360")&&(i.is360=!0),null==t.attr("data-preview-seek")||WPSVPUtils.isEmpty(t.attr("data-preview-seek"))||(i.previewSeek=t.attr("data-preview-seek")),null==t.attr("data-user-id")||WPSVPUtils.isEmpty(t.attr("data-user-id"))||(i.user_id=t.attr("data-user-id")),null==t.attr("data-sort")||WPSVPUtils.isEmpty(t.attr("data-sort"))||(i.sort=t.attr("data-sort"),null==t.attr("data-sort-direction")||WPSVPUtils.isEmpty(t.attr("data-sort-direction"))||(i.sortDirection=t.attr("data-sort-direction"))),null==t.attr("data-user-account")||WPSVPUtils.isEmpty(t.attr("data-user-account"))||(i.userAccount=t.attr("data-user-account")),t.children(".wpsvp-subtitles").length){var a=t.children(".wpsvp-subtitles");a.children("div").length&&(i.subtitles=[],a.children("div").each(function(){var t=e(this),a=t.attr("data-label");a={label:a,value:a,src:t.attr("data-src")},null!=t.attr("data-default")&&(a.default=!0),i.subtitles.push(a)}))}t.find(".wpsvp-custom-playlist-item-content").length&&(i.customContent=t.find(".wpsvp-custom-playlist-item-content").html()),null!=t.attr("data-chapters")&&(i.chapters=t.attr("data-chapters")),null==t.attr("data-link")||WPSVPUtils.isEmpty(t.attr("data-link"))||(i.link=t.attr("data-link"),null==t.attr("data-target")||WPSVPUtils.isEmpty(t.attr("data-target"))?i.target="_blank":i.target=t.attr("data-target")),null==t.attr("data-end-link")||WPSVPUtils.isEmpty(t.attr("data-end-link"))||(i.endLink=t.attr("data-end-link"),i.endTarget="_blank",null==t.attr("data-end-target")||WPSVPUtils.isEmpty(t.attr("data-end-target"))||(i.endTarget=t.attr("data-end-target"))),null==t.attr("data-skip-enable")||WPSVPUtils.isEmpty(t.attr("data-skip-enable"))||(i.skipEnable=Math.abs(parseInt(t.attr("data-skip-enable"),10))),null==t.attr("data-ad-id")||WPSVPUtils.isEmpty(t.attr("data-ad-id"))||(i.adId=t.attr("data-ad-id")),t.children(".wpsvp-ad-section").length&&(i.adSection=t.children(".wpsvp-ad-section")),t.children(".wpsvp-annotation-section").length&&(i.annotationSection=t.children(".wpsvp-annotation-section"))}else i=e.extend(!0,{},t);return null!=t.attr("data-load-more")&&(Ms=!0,Os=t.wrap("<p>").parent().html(),xa&&"youtube_user"==i.type&&(hn=!0)),i}function ke(){var t={playlist:e.trim(Re.html()),activePlaylist:Ss,date:Math.floor(Date.now()/1e3)};Ms&&_s&&Os&&(t.loadMoreOnTotalScroll=!0,t.nextPageToken=_s,t.loadMoreItem=Os,hn&&(t.channelId=rn.getChannelId())),localStorage.setItem(Ta,JSON.stringify(t))}var Ce=e(this),Ve=Ce.find(".wpsvp-media-holder").show(),Ee=Ce.find(".wpsvp-playlist-holder"),Pe=Ce.find(".wpsvp-playlist-inner"),Re=Ce.find(".wpsvp-playlist-content"),Se=Ce.find(".wpsvp-playlist-filter-msg"),Ie=Ce.find(".wpsvp-subtitle-holder").css("display","none"),Me=Ce.find(".wpsvp-subtitle-holder-inner"),_e=Ce.find(".wpsvp-annotation-holder").css("display","none"),Oe=Ce.find(".wpsvp-player-holder").show(),Ne=Ce.find(".wpsvp-video-holder"),Ue=Ce.find(".wpsvp-audio-holder"),Ae=Ce.find(".wpsvp-image-holder"),De=Ce.find(".wpsvp-youtube-holder"),Le=Ce.find(".wpsvp-vimeo-holder-default"),je=Ce.find(".wpsvp-vimeo-holder-chromeless"),Fe=Ce.find(".wpsvp-iframe-holder"),qe=Ce.find(".wpsvp-player-interface"),Be=Ce.find(".wpsvp-playback-toggle"),He=Ce.find(".wpsvp-media-time-current"),ze=Ce.find(".wpsvp-media-time-separator"),We=Ce.find(".wpsvp-media-time-total"),Ye=Ce.find(".wpsvp-preview-seek-wrap"),Qe=Ce.find(".wpsvp-preview-seek-inner"),Ge=Ce.find(".wpsvp-preview-seek-time-current"),Xe=Ce.find(".wpsvp-seekbar"),Ke=Ce.find(".wpsvp-progress-bg"),Je=Ce.find(".wpsvp-load-level"),$e=Ce.find(".wpsvp-progress-level"),Ze=Ce.find(".wpsvp-volume-wrapper"),et=Ce.find(".wpsvp-volume-toggle"),tt=Ce.find(".wpsvp-volume-seekbar"),it=Ce.find(".wpsvp-volume-bg"),at=Ce.find(".wpsvp-volume-level"),nt=Ce.find(".wpsvp-info-holder");Ce.find(".wpsvp-info-data"),Ce.find(".wpsvp-info-inner");var ot=Ce.find(".wpsvp-info-toggle"),rt=Ce.find(".wpsvp-player-title"),st=Ce.find(".wpsvp-player-desc"),lt=Ce.find(".wpsvp-embed-holder");Ce.find(".wpsvp-embed-data-wrap");var dt=Ce.find(".wpsvp-embed-toggle"),ut=Ce.find(".wpsvp-pwd-holder"),ct=Ce.find(".wpsvp-pwd-field"),pt=Ce.find(".wpsvp-pwd-error").text(),vt=Ce.find(".wpsvp-playlist-toggle"),ht=Ce.find(".wpsvp-player-loader"),ft=Ce.find(".wpsvp-playlist-loader"),mt=Ce.find(".wpsvp-big-play"),gt=Ce.find(".wpsvp-loop-toggle"),yt=Ce.find(".wpsvp-shuffle-toggle"),bt=Ce.find(".wpsvp-download-toggle"),wt=Ce.find(".wpsvp-share-toggle"),Tt=Ce.find(".wpsvp-share-holder"),xt=Ce.find(".wpsvp-seek-backward"),kt=Ce.find(".wpsvp-seek-forward"),Ct=Ce.find(".wpsvp-rewind-toggle"),Vt=Ce.find(".wpsvp-nav-backward"),Et=Ce.find(".wpsvp-nav-forward"),Pt=Ce.find(".wpsvp-vr-info"),Rt=Ce.find(".wpsvp-lightbox-wrap"),St=Ce.find(".wpsvp-lightbox"),It=Ce.find(".wpsvp-lightbox-inner"),Mt=Ce.find(".wpsvp-lightbox-content-inner"),_t=Ce.find(".wpsvp-lightbox-close"),Ot=Ce.find(".wpsvp-lightbox-prev"),Nt=Ce.find(".wpsvp-lightbox-next"),Ut=Ce.find(".wpsvp-upnext-wrap"),At=Ce.find(".wpsvp-upnext-thumb"),Dt=Ce.find(".wpsvp-upnext-title"),Lt=Ce.find(".wpsvp-next-toggle"),jt=Ce.find(".wpsvp-previous-toggle"),Ft=Ce.find(".wpsvp-settings-toggle"),qt=Ce.find(".wpsvp-playback-rate-toggle"),Bt=Ce.find(".wpsvp-playback-rate-menu-holder"),Ht=Ce.find(".wpsvp-playback-rate-menu"),zt=Ce.find(".wpsvp-quality-toggle").hide(),Wt=Ce.find(".wpsvp-quality-menu-holder"),Yt=Ce.find(".wpsvp-quality-menu"),Qt=Ce.find(".wpsvp-quality-settings-menu"),Gt=Ce.find(".wpsvp-subtitle-toggle").hide(),Xt=Ce.find(".wpsvp-subtitle-menu-holder"),Kt=Ce.find(".wpsvp-subtitle-menu"),Jt=Ce.find(".wpsvp-subtitle-settings-menu"),$t=Ce.find(".wpsvp-audio-language-menu"),Zt=Ce.find(".wpsvp-audio-language-menu-holder"),ei=Ce.find(".wpsvp-audio-language-toggle").hide(),ti=Ce.find(".wpsvp-audio-language-settings-menu"),ii=Ce.find(".wpsvp-chapter-title"),ai=Ce.find(".wpsvp-pip-toggle").hide(),ni=Ce.find(".wpsvp-link-copy"),oi=Ce.find(".wpsvp-embed-copy"),ri=Ce.find(".wpsvp-player-header-title"),si=Ce.find(".wpsvp-ad-seekbar"),li=Ce.find(".wpsvp-ad-progress-bg"),di=Ce.find(".wpsvp-ad-load-level"),ui=Ce.find(".wpsvp-ad-progress-level"),ci=Ce.find(".wpsvp-ad-info-time"),pi=Ce.find(".wpsvp-ad-skip-btn"),vi=Ce.find(".wpsvp-ad-skip-msg"),hi=Ce.find(".wpsvp-ad-skip-msg-text"),fi=hi.html(),mi=Ce.find(".wpsvp-ad-skip-msg-end"),gi=Ce.find(".wpsvp-ad-skip-thumb");t=e.extend(!0,{},{youtubePlayerType:"chromeless",blockYoutubeEvents:!1,vimeoPlayerType:"default",vimeoPlayerColor:"#00adef",blockVimeoEvents:!0,playerRatio:1.7777777,playlistBottomHeight:300,playlistSideWidth:290,lightboxMaxWidth:920,preload:"auto",sourcePath:"",instanceName:"",thumbScrollValue:50,youtubePlayerColor:"red",verticalBottomSepearator:700,subtitleOffText:"Disabled",showInterfaceOnMediaStart:!0,sortableTracks:!1,useMobileNativePlayer:!1,hideQualityMenuOnSingleQuality:!0,aspectRatio:2,randomPlay:!1,loopingOn:!0,hidePlaylistOnFullscreenEnter:!0,playlistItemContent:"title,description",dynamicSubtitleSize:!0,playbackPositionKey:"wpsvp-playback-position",rightClickContextMenu:"custom",focusVideoOnActive:!1,playlistOpened:!0,limitDescriptionText:100,showStreamVideoBitrateMenu:!1,showStreamAudioBitrateMenu:!1,seekTime:10,createAdMarkers:!0,playAdsOnlyOnce:!1,showAnnotationsOnlyOnce:!1,playlistStorageKey:"wpsvp-playlist-storage",truncateWatch:!0},t);var yi,bi,wi,Ti,xi=WPSVPUtils.isMobile(),ki=WPSVPUtils.hasLocalStorage(),Ci=t.sourcePath,Vi=t.instanceName,Ei=t.playlistList,Pi=t.mediaEndAction,Ri=t.useKeyboardNavigationForPlayback,Si=t.volume,Ii=t.autoPlay,Mi=t.autoPlayAfterFirst,_i=t.autoPlayInViewport,Oi=Ii,Ni=t.forceMutedAutoplay,Ui=t.playlistOpened,Ai=t.hideQualityMenuOnSingleQuality,Di=t.togglePlaybackOnMultipleInstances,Li=t.sortableTracks,ji=t.preload,Fi=t.playerRatio,qi=t.hidePlaylistOnFullscreenEnter,Bi=t.minimizeOnScroll,Hi=t.minimizeClass,zi=t.playlistBottomHeight,Wi=t.playlistSideWidth,Yi=t.lightboxMaxWidth,Qi=t.blockYoutubeEvents,Gi=(t.blockVimeoEvents,t.youtubePlayerType),Xi=t.vimeoPlayerType,Ki=t.breakPointArr,Ji=t.verticalBottomSepearator,$i=t.elementsVisibilityArr,Zi=t.subtitleOffText,ea=t.playAdsOnlyOnce,ta=t.showAnnotationsOnlyOnce,ia=t.showInterfaceOnMediaStart,aa=t.playbackPositionKey,na=t.rememberPlaybackPosition&&ki&&aa,oa=t.useMobileNativePlayer,ra=t.useGa&&"file:"!=window.location.protocol,sa=t.useSwipeNavigation&&"ontouchstart"in window,la=t.limitDescriptionText,da=t.playlistItemContent.split(","),ua=t.dynamicSubtitleSize,ca=t.rightClickContextMenu,pa=t.focusVideoOnActive,va=!0,ha="normal",fa=t.showStreamVideoBitrateMenu,ma=t.showStreamAudioBitrateMenu,ya=t.seekTime,ba=t.createAdMarkers,wa=t.forceYoutubeChromeless,Ta=t.playlistStorageKey,xa=t.cacheTime,ka=Ce.attr("class").split(/\s+/),Ca="normal";-1<ka.indexOf("wpsvp-layout-100")&&(Ca="100%");var Va="none";-1<ka.indexOf("wpsvp-nt-scroll")?Va="scroll":-1<ka.indexOf("wpsvp-nt-buttons")?Va="buttons":-1<ka.indexOf("wpsvp-nt-hover")&&(Va="hover");var Ea="vertical";(-1<ka.indexOf("wpsvp-ht")||-1<ka.indexOf("wpsvp-hb"))&&(Ea="horizontal");var Pa="right_bottom";if(-1<ka.indexOf("wpsvp-vlb")?Pa="left_bottom":-1<ka.indexOf("wpsvp-vl")?Pa="left":-1<ka.indexOf("wpsvp-vr")?Pa="right":-1<ka.indexOf("wpsvp-ht")?Pa="top":-1<ka.indexOf("wpsvp-hb")?Pa="bottom":-1<ka.indexOf("wpsvp-vb")?Pa="bottom":-1<ka.indexOf("wpsvp-wall")?(Pa="wall",ha="lightbox"):-1<ka.indexOf("wpsvp-outer")?Pa="outer":-1<ka.indexOf("wpsvp-no-playlist")&&(Pa="no-playlist",va=!1),"outer"==Pa&&(qi=!1,pa=!0),"default"==Gi?Qi=!1:sa&&(Qi=!0),"100%"==Ca&&(Bi=_i=!1),"lightbox"==ha&&(Bi=_i=!1,Ui=!0),""!=t.wrapperMaxWidth&&Ce.css("max-width",t.wrapperMaxWidth+"px"),Ki&&Ki.length){WPSVPUtils.keysrt(Ki,"width");var Ra=!0}$i&&$i.length&&WPSVPUtils.keysrt($i,"width");var Sa,Ia,Ma,_a,Oa,Na,Ua,Aa,Da,La,ja,Fa,qa,Ba,Ha,za,Wa,Ya,Qa,Ga,Xa,Ka,Ja,$a,Za,en,tn,an,nn,on,rn,sn,ln,dn,un,cn,pn,vn,hn,fn,mn,gn,yn,bn,wn,Tn,xn,kn,Cn,Vn,En,Pn,Rn,Sn,In,Mn,_n,On,Nn,Un,An,Dn,Ln,jn,Fn,qn,Bn,Hn,zn,Wn,Yn,Qn,Gn,Xn,Kn,Jn,$n,Zn,eo,to,io,ao,no,oo,ro,so,lo,uo,co,po,vo,ho,fo,mo,go,yo,bo,wo,To,xo,ko,Co,Vo,Eo,Po,Ro,So,Io,Mo,_o,Oo,No,Uo,Ao,Do,Lo,jo,Fo,qo,Bo,Ho,zo,Wo,Yo,Qo,Go,Xo,Ko,Jo,$o,Zo,er,tr,ir,ar=WPSVPUtils.isIOS(),nr=WPSVPUtils.isiPhoneIpod(),or=WPSVPUtils.isAndroid(),rr=WPSVPUtils.hasFullscreen(),sr=WPSVPUtils.hasDownloadSupport(),lr=WPSVPUtils.volumeCanBeSet(),dr=WPSVPUtils.supportsWebGL(),ur=WPSVPUtils.canPlayMp4(),cr=WPSVPUtils.canPlayMp3(),pr=WPSVPUtils.canPlayWav(),vr=WPSVPUtils.isChrome(),hr=WPSVPUtils.isSafari(),fr=document.pictureInPictureEnabled,mr=!1,gr=!0,yr=this,br=e("body"),wr=e(window),Tr=e(document),xr=e("html"),kr="scroll."+Vi,Cr=[],Vr=window.MediaSource,Er=0,Pr=0,Rr=0,Sr=!0,Ir=t.thumbScrollValue,Mr=!0,_r=0,Or=!0,Nr=[],Ur=[],Ar=[],Dr=[],Lr=[{width:0,size:18},{width:480,size:20},{width:768,size:22},{width:1024,size:24},{width:1280,size:36}],jr=[],Fr=0,qr=[],Br=[];if(window.playlistScrollLoading=!1,"scroll"==Va&&WPSVPUtils.checkCssExist(WPSVPUtils.qualifyURL(Ci+"css/jquery.mCustomScrollbar.css")),void 0===window.wpsvp_mediaArr&&(window.wpsvp_mediaArr=[]),wpsvp_mediaArr.push({inst:yr,id:Vi}),ra){if("undefined"==typeof ga){var Hr=document.createElement("script");Hr.type="text/javascript",Hr.src="//www.google-analytics.com/analytics.js",Hr.onload=Hr.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||ga("create",t.gaTrackingId,"auto")},Hr.onerror=function(){alert("Error loading "+this.src)};var zr=document.getElementsByTagName("script")[0];zr.parentNode.insertBefore(Hr,zr)}else ga("create",t.gaTrackingId,"auto");bt.on("click",function(){e(yr).trigger("mediaDownload",{instance:yr,instanceName:Vi,counter:Oa})})}sa&&(void 0===e.fn.swipe?((Hr=document.createElement("script")).type="text/javascript",Hr.src=WPSVPUtils.qualifyURL(Ci+"js/scripts/jquery.touchSwipe.min.js"),Hr.onload=Hr.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||a()},Hr.onerror=function(){alert("Error loading "+this.src)},(zr=document.getElementsByTagName("script")[0]).parentNode.insertBefore(Hr,zr)):a()),"lightbox"==ha&&(It.css("max-width",Yi+"px"),_t.on("click",function(){Rt.one("transitionend",function(){Rt.css("display","none")}).css("opacity",0),ro&&ue(),ja&&E()}),t.clickOnBackgroundClosesLightbox&&St.on("click",function(e){e.target==this&&(Rt.one("transitionend",function(){Rt.css("display","none")}).css("opacity",0),ro&&ue(),ja&&E())}),Ot.on("click",function(e){e.stopImmediatePropagation(),he()}),Nt.on("click",function(e){e.stopImmediatePropagation(),ve()})),t.logoPosition&&("tl"==t.logoPosition?Ce.find(".wpsvp-logo").css({top:t.logoMargin+"px",left:t.logoMargin+"px"}):"tr"==t.logoPosition?Ce.find(".wpsvp-logo").css({top:t.logoMargin+"px",right:t.logoMargin+"px"}):"bl"==t.logoPosition?Ce.find(".wpsvp-logo").css({bottom:t.logoMargin+"px",left:t.logoMargin+"px"}):"br"==t.logoPosition&&Ce.find(".wpsvp-logo").css({bottom:t.logoMargin+"px",right:t.logoMargin+"px"})),xi?Ii=!1:_i&&(Ii=!1),Mi&&(Ii=!1),Ni&&(Ii=!0),va||(Ui=!1,Ee.css({width:0,height:0}).hide()),Ui?Ee.show():Ee.hide(),nr&&ai.remove(),dr||(Sr=!1,Pt.remove(),vr&&console.log("Turn Hardware Acceleration On Within Chrome Browser to enable 360 video and images!")),"bottom"==Pa&&"vertical"==Ea&&Ee.css({height:zi});var Wr=e('<div class="wpsvp-playlist-item"></div>').prependTo(Ce),Yr="horizontal"==Ea?Wr.outerWidth(!0):Wr.outerHeight(!0);if(Wr.remove(),Wr=null,na&&(window.attachEvent||window.addEventListener)(ar?"pagehide":"beforeunload",function(e){if(window.event&&(window.event.cancelBubble=!0),!mr||!ro)return!1;e={volume:Si,activeItem:Oa,resumeTime:parseInt(yr.getCurrentTime(),10)},localStorage.setItem(aa,JSON.stringify(e))}),Ut.find(".wpsvp-upnext-close").on("click",function(){Ut.removeClass("wpsvp-upnext-on wpsvp-upnext-visible")}),At.on("click",function(){Ut.removeClass("wpsvp-upnext-on wpsvp-upnext-visible"),ve()}),Dt.on("click",function(){Ut.removeClass("wpsvp-upnext-on wpsvp-upnext-visible"),ve()}),pi.on("click",function(){if(!mr||!Ho||!Go)return!1;Ho&&e(yr).trigger("adSkip",{instance:yr,instanceName:Vi,adId:Aa.adId}),be()}),_e.on("click",".wpsvp-annotation-close",function(){var t=e(this).attr("data-id");ta?(e(this).parent().remove(),Br.splice(t,1)):e(this).parent().hide()}),Ce.hasClass("wpsvp-skin-light-flat")||Ce.hasClass("wpsvp-skin-gray-flat"),"ontouchstart"in window)var Qr=!0,Gr="touchstart.ap mousedown.ap",Xr="touchmove.ap mousemove.ap",Kr="touchend.ap mouseup.ap";else window.PointerEvent?(Gr="pointerdown.ap",Xr="pointermove.ap",Kr="pointerup.ap"):(Gr="mousedown.ap",Xr="mousemove.ap",Kr="mouseup.ap");Ue.on("click",function(){if(xo)return!1;if(xi){if(_a&&Or)S();else if(Za)if(Za.paused){var e=Za.play();void 0!==e&&e.then(function(e){}).catch(function(e){mt.show()})}else Za.pause()}else Za?Za.paused?void 0!==(e=Za.play())&&e.then(function(e){}).catch(function(e){mt.show()}):Za.pause():en&&!_a&&W()}),Ne.on("click",function(){if(xo)return!1;if(xi)if(_a&&Or)S();else if(an)if(an.paused){var e=an.play();void 0!==e&&e.then(function(e){}).catch(function(e){mt.show()})}else an.pause();else en&&!_a&&(en.remove(),en=null,W());else an?an.paused?void 0!==(e=an.play())&&e.then(function(e){}).catch(function(e){mt.show()}):an.pause():en&&!_a&&(en.remove(),en=null,W())}),Ce.find(".wpsvp-search-field").on("keyup.apfilter",function(){if(0==Fa)return!1;var t,i=e(this).val(),a=0;for(t=0;t<Fa;t++){-1<Re.children(".wpsvp-playlist-item").eq(t).find(".wpsvp-playlist-title").html().indexOf(i)?Re.children(".wpsvp-playlist-item").eq(t).show():(Re.children(".wpsvp-playlist-item").eq(t).hide(),a++)}a==Fa?Se.show():Se.hide()});var Jr,$r="normal";Tr.on("fullscreenchange mozfullscreenchange MSFullscreenChange webkitfullscreenchange",function(t){Jr==Vi&&(mo&&clearTimeout(mo),"fullscreen"==$r?($r="normal",xr.removeClass("wpsvp-fs-overflow"),Ce.removeClass("wpsvp-fs"),"lightbox"==ha&&Mt.removeClass("wpsvp-fs"),Zr.find(".wpsvp-btn-fullscreen").show(),Zr.find(".wpsvp-btn-normal").hide(),"custom"==ca&&(as.find(".wpsvp-context-fullscreen-enter").show(),as.find(".wpsvp-context-fullscreen-exit").hide()),Ti&&!Ui&&(Ti=!1,Ee.show(),Ui=!0),xi||Tr.off("mousemove",M),document.body.style.cursor="default",Jr=null,e(yr).trigger("fullscreenExit",{instance:yr,instanceName:Vi})):($r="fullscreen",xr.addClass("wpsvp-fs-overflow"),Ce.addClass("wpsvp-fs"),"lightbox"==ha&&Mt.addClass("wpsvp-fs"),Zr.find(".wpsvp-btn-fullscreen").hide(),Zr.find(".wpsvp-btn-normal").show(),"custom"==ca&&(as.find(".wpsvp-context-fullscreen-enter").hide(),as.find(".wpsvp-context-fullscreen-exit").show()),qi&&Ui&&(Ti=!0,Ee.hide(),Ui=!1),xi?mo=setTimeout(function(){clearTimeout(this),mo=null,I()},4e3):(Tr.on("mousemove",M),mo=setTimeout(function(){clearTimeout(this),mo=null,M()},4e3)),e(yr).trigger("fullscreenEnter",{instance:yr,instanceName:Vi}))),hr&&we()});var Zr=Ce.find(".wpsvp-fullscreen-toggle").on("click",function(t){Jr=Vi,t=Ce[0],"normal"==$r&&e(yr).trigger("fullscreenBeforeEnter",{instance:yr,instanceName:Vi}),rr?t.requestFullscreen?document.fullscreenElement?document.exitFullscreen():t.requestFullscreen():t.webkitRequestFullScreen?document.webkitIsFullScreen?document.webkitCancelFullScreen():t.webkitRequestFullScreen():t.msRequestFullscreen?document.msIsFullscreen||document.msFullscreenElement?document.msExitFullscreen():t.msRequestFullscreen():t.mozRequestFullScreen&&(document.fullscreenElement||document.mozFullScreenElement?document.mozCancelFullScreen():t.mozRequestFullScreen()):("fullscreen"==$r?($r="normal",xr.removeClass("wpsvp-fs-overflow"),Ce.removeClass("wpsvp-fs"),"lightbox"==ha&&Mt.removeClass("wpsvp-fs"),document.body.style.cursor="default",Zr.find(".wpsvp-btn-fullscreen").show(),Zr.find(".wpsvp-btn-normal").hide(),Ti&&!Ui&&(Ti=!1,Ee.show(),Ui=!0),e(yr).trigger("fullscreenExit",{instance:yr,instanceName:Vi})):($r="fullscreen",xr.addClass("wpsvp-fs-overflow"),Ce.addClass("wpsvp-fs"),"lightbox"==ha&&Mt.addClass("wpsvp-fs"),Zr.find(".wpsvp-btn-fullscreen").hide(),Zr.find(".wpsvp-btn-normal").show(),qi&&Ui&&(Ti=!0,Ee.hide(),Ui=!1),xi?mo=setTimeout(function(){clearTimeout(this),mo=null,I()},4e3):(Tr.on("mousemove",M),mo=setTimeout(function(){clearTimeout(this),mo=null,M()},4e3)),e(yr).trigger("fullscreenEnter",{instance:yr,instanceName:Vi})),we())});if(Zr.find(".wpsvp-btn-normal").hide(),Zr.find(".wpsvp-btn-fullscreen").show(),"disabled"==ca)Ce.on("contextmenu",function(){return!1});else if("custom"==ca){var es=function(){br.off("click.apcc",es),ts.hide()},ts=Oe.find(".wpsvp-context-menu").on("contextmenu",function(e){return!1}),is=ts.find(".wpsvp-context-playback").on("click",function(e){yr.togglePlayback()}),as=ts.find(".wpsvp-context-fullscreen").on("click",function(e){Zr.click()}),ns=ts.find(".wpsvp-context-volume").on("click",function(e){r()});Oe.on("contextmenu",function(t){if(e(t.target).hasClass("wpsvp-volume-level")||e(t.target).hasClass("wpsvp-volume-bg")||e(t.target).hasClass("wpsvp-progress-level")||e(t.target).hasClass("wpsvp-progress-bg")||e(t.target).hasClass("wpsvp-load-level")||e(t.target).hasClass("wpsvp-embed-code"))return!0;t.preventDefault(),t.stopPropagation();var i=Oe[0].getBoundingClientRect(),a=ts.outerWidth(!0),n=ts.outerHeight(!0),o=parseInt(t.pageX-wr.scrollLeft()-i.left,10);t=parseInt(t.pageY-wr.scrollTop()-i.top,10),o>Oe.width()-a&&(o-=a),t>Oe.height()-n&&(t-=n),ts.css({left:o+"px",top:t+"px"}).show(),br.one("click.apcc",es)}).on("mouseleave",es),br.on("mouseleave",es),Tr.on("contextmenu",es).keyup(function(e){27==e.keyCode&&es()})}var os=Ce.find(".wpsvp-tooltip");xi||Ce.find("[data-tooltip]").on("mouseenter",function(t){t=e(this);var i=Ce[0].getBoundingClientRect(),a=t[0].getBoundingClientRect();if(os.text(t.attr("data-tooltip")),null!=t.attr("data-tooltip-position"))if("left"==t.attr("data-tooltip-position"))var n=parseInt(a.top-i.top-os.outerHeight()/2+t.outerHeight()/2),o=parseInt(a.left-i.left-os.outerWidth()-3);else"bottom"==t.attr("data-tooltip-position")&&(n=parseInt(a.top-i.top+t.outerHeight()),o=parseInt(a.left-i.left-os.outerWidth()/2+t.outerWidth()/2));else n=parseInt(a.top-i.top-os.outerHeight()),o=parseInt(a.left-i.left-os.outerWidth()/2+t.outerWidth()/2);"lightbox"!=ha&&(0>o?o=0:o+os.outerWidth()>Ce.width()&&(o=Ce.width()-os.outerWidth()),0>n+i.top&&(n=parseInt(a.top-i.top+os.outerHeight()+15))),os.css({left:o+"px",top:n+"px"}).show()}).on("mouseleave",function(e){os.hide()});var rs,ss,ls=Xe.hasClass("wpsvp-position-top")?"top":"bottom";if(Xe.on(Gr,function(e){if(mr)return!Ho&&(function(e){if(!rs){if("touchstart"==e.type){if(!((e=e.originalEvent.touches)&&0<e.length))return!1}else e.preventDefault();rs=!0,Tr.on(Xr,function(e){e:{if("touchmove"==e.type){if(e.originalEvent.touches&&e.originalEvent.touches.length)var t=e.originalEvent.touches;else{if(!e.originalEvent.changedTouches||!e.originalEvent.changedTouches.length)break e;t=e.originalEvent.changedTouches}if(1<t.length)break e;t=t[0]}else t=e;e.preventDefault(),n(t)}}).on(Kr,function(e){e:if(rs){if(rs=!1,Tr.off(Xr).off(Kr),"touchend"==e.type){if(e.originalEvent.touches&&e.originalEvent.touches.length)var t=e.originalEvent.touches;else{if(!e.originalEvent.changedTouches||!e.originalEvent.changedTouches.length)break e;t=e.originalEvent.changedTouches}if(1<t.length)break e;t=t[0]}else t=e;e.preventDefault(),n(t)}})}}(e),!1)}),!xi){var ds=function(){_a&&(Xe.off(Xr,o).off("mouseout",ds),Tr.off("mouseout",ds),Aa.previewSeek?Ye.hide():os.hide())};Xe.on("mouseover",function(){_a&&(Xe.on(Xr,o).on("mouseout",ds),Tr.on("mouseout",ds))})}var us=tt.hasClass("wpsvp-volume-horizontal"),cs=.5;us?tt.width():tt.height();var ps,vs,hs=us?it.width():it.height();if(0>Si?Si=0:1<Si&&(Si=1),0!=Si&&(cs=Si),!lr||xi?(tt.remove(),et.on("click",function(e){r()})):et.on("click",function(e){xi&&0!=tt.length&&!tt.hasClass("wpsvp-force-hide")||r()}),tt.on(Gr,function(e){return function(e){if(mr){if(!ps){if("touchstart"==e.type){if(!((e=e.originalEvent.touches)&&0<e.length))return!1}else e.preventDefault();ps=!0,Tr.on(Xr,function(e){e:{if("touchmove"==e.type){if(e.originalEvent.touches&&e.originalEvent.touches.length)var t=e.originalEvent.touches;else{if(!e.originalEvent.changedTouches||!e.originalEvent.changedTouches.length)break e;t=e.originalEvent.changedTouches}if(1<t.length)break e;t=t[0]}else t=e;e.preventDefault(),s(t)}}).on(Kr,function(e){e:if(ps){if(ps=!1,Tr.off(Xr).off(Kr),"touchend"==e.type){if(e.originalEvent.touches&&e.originalEvent.touches.length)var t=e.originalEvent.touches;else{if(!e.originalEvent.changedTouches||!e.originalEvent.changedTouches.length)break e;t=e.originalEvent.changedTouches}if(1<t.length)break e;t=t[0]}else t=e;e.preventDefault(),s(t)}})}}}(e),!1}),!xi){var fs=function(){tt.off(Xr,d).off("mouseout",fs),Tr.off("mouseout",fs),os.hide()};tt.on("mouseover",function(){tt.on(Xr,d).on("mouseout",fs),Tr.on("mouseout",fs)})}WPSVPUtils.isEmpty(t.facebookAppId)?console.log("facebookAppId has not been set in settings!"):"file:"!=window.location.protocol&&(vs=t.facebookAppId,function(e,t,i){var a=e.getElementsByTagName(t)[0];e.getElementById(i)||((e=e.createElement(t)).id=i,e.src="//connect.facebook.net/en_US/sdk.js",a.parentNode.insertBefore(e,a))}(document,"script","facebook-jssdk"),window.fbAsyncInit=function(){FB.init({appId:vs,xfbml:!0,version:"v2.9"})});var ms=Ce.find(".wpsvp-settings-wrap"),gs=Ce.find(".wpsvp-settings-holder"),ys=Ce.find(".wpsvp-settings-home"),bs=gs.length;Ft.on("click",function(){vo&&_(!1),ho&&N(!1),fo&&O(!1),gs.is(":visible")?(gs.hide(),gs.find(".wpsvp-settings-menu").css("display","none"),ys.css("display","block")):gs.show()}),bs&&(ys.find(".wpsvp-menu-item").on("click",function(){var t=e(this).attr("data-target");ys.hide(),gs.find(".wpsvp-settings-menu").css("display","none"),gs.find("."+t+"-holder").css("display","block"),gs.height()>Ft.offset().top-wr.scrollTop()&&(gs.addClass("wpsvp-menu-bottom"),Ce.addClass("wpsvp-holder-visible"))}),gs.find(".wpsvp-menu-header").on("click",function(){gs.find(".wpsvp-settings-menu").css("display","none"),ys.css("display","block"),gs.removeClass("wpsvp-menu-bottom"),Ce.removeClass("wpsvp-holder-visible")}),Ht.find(".wpsvp-menu-item").each(function(){e(this).on("click",u)})),qt.length&&(qt.on("mouseenter",function(){Bt.show(),Ht.height()>qt.offset().top-wr.scrollTop()&&(Bt.addClass("wpsvp-menu-bottom"),Ce.addClass("wpsvp-holder-visible"))}).on("mouseleave",function(){Bt.hide().removeClass("wpsvp-menu-bottom"),Ce.removeClass("wpsvp-holder-visible")}),Ht.find(".wpsvp-menu-item").each(function(){e(this).on("click",u)})),zt.length&&zt.on("mouseenter",function(){Wt.show(),Yt.height()>zt.offset().top-wr.scrollTop()&&(Wt.addClass("wpsvp-menu-bottom"),Ce.addClass("wpsvp-holder-visible"))}).on("mouseleave",function(){Wt.hide().removeClass("wpsvp-menu-bottom"),Ce.removeClass("wpsvp-holder-visible")}),ei.length&&ei.on("mouseenter",function(){Zt.show(),$t.height()>ei.offset().top-wr.scrollTop()&&(Zt.addClass("wpsvp-menu-bottom"),Ce.addClass("wpsvp-holder-visible"))}).on("mouseleave",function(){Zt.hide().removeClass("wpsvp-menu-bottom"),Ce.removeClass("wpsvp-holder-visible")}),Gt.length&&Gt.on("mouseenter",function(){Xt.show(),Kt.height()>Gt.offset().top-wr.scrollTop()&&(Xt.addClass("wpsvp-menu-bottom"),Ce.addClass("wpsvp-holder-visible"))}).on("mouseleave",function(){Xt.hide().removeClass("wpsvp-menu-bottom"),Ce.removeClass("wpsvp-holder-visible")}),this.setSubtitle=function(e){if(!mr||!ro)return!1;if(Me.empty(),Ie.show(),e==Zi||""==e)Po=!1,Ro=null,Eo&&Eo.removeClass("wpsvp-menu-active"),Eo=Kt.find(".wpsvp-menu-item[data-label='"+Zi+"']").addClass("wpsvp-menu-active");else if(Ar[e])Po=!1,Ro=null,Eo&&Eo.removeClass("wpsvp-menu-active"),Eo=Kt.find(".wpsvp-menu-item[data-label='"+e+"']").addClass("wpsvp-menu-active"),Dr=Ar[e],Po=!0;else{var t,i=Aa.subtitles.length;for(t=0;t<i;t++){var a=Aa.subtitles[t];if(a.label==e){Po=!1,Ro=null,Eo&&Eo.removeClass("wpsvp-menu-active"),Eo=Kt.find(".wpsvp-menu-item[data-label='"+e+"']").addClass("wpsvp-menu-active"),"hls"==so?y(a):"dash"!=so&&b(a);break}}}bs&&gs.find(".wpsvp-subtitle-menu-value").text(e)},Ri&&Tr.keyup(function(t){if(t.stopImmediatePropagation(),t.preventDefault(),!mr)return!1;var i=t.keyCode;if(t=e(t.target),37==i)yr.seekBackward();else if(39==i)yr.seekForward();else if(33==i)he();else if(34==i)ve();else if(32==i){if(t.hasClass("wpsvp-search-field")||t.hasClass("wpsvp-pwd-field"))return!1;yr.togglePlayback()}else if(77==i){if(t.hasClass("wpsvp-search-field")||t.hasClass("wpsvp-pwd-field"))return!1;r()}});var ws,Ts=[Be,vt,Zr,mt,Ze,ot,wt,xt,kt,Ct,gt,yt,dt,Lt,jt,ai,Ce.find(".wpsvp-pwd-confirm"),Ce.find(".wpsvp-embed-close"),Ce.find(".wpsvp-info-close"),Ce.find(".wpsvp-share-item"),Ce.find(".wpsvp-share-close")],xs=Ts.length;for(ws=0;ws<xs;ws++)e(Ts[ws]).css("cursor","pointer").on("click",x);var ks=Ce.find(".wpsvp-link-code").text(window.location.href);if(ni.on("click",function(){WPSVPUtils.selectText(ks[0]);try{document.execCommand("copy"),ni.text(ni.attr("data-copied-text"))}catch(e){alert("Please press Ctrl/Cmd+C to copy code!")}oi.text(oi.attr("data-copy-text"))}),t.embedWidth&&!WPSVPUtils.isEmpty(t.embedWidth)&&t.embedHeight&&!WPSVPUtils.isEmpty(t.embedHeight)){var Cs=t.embedSrc||window.location.href,Vs=Ce.find(".wpsvp-embed-code").text('<iframe width="'+t.embedWidth+'" height="'+t.embedHeight+'" src="'+Cs+'" frameborder="0" scrolling="no" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>');Ce.find(".wpsvp-embed-copy").on("click",function(){WPSVPUtils.selectText(Vs[0]);try{document.execCommand("copy"),oi.text(oi.attr("data-copied-text"))}catch(e){alert("Please press Ctrl/Cmd+C to copy code!")}ni.text(ni.attr("data-copy-text"))})}Ce.find(".wpsvp-embed-inner");var Es=new WPSVPPlaylistManager(t);e(Es).on("WPSVPPlaylistManager.COUNTER_READY",function(t,i){tn=!1,Aa=La=null,Bo=!1,jo=Wo=qo=null,qr=[],Ke.find(".wpsvp-ad-indicator").remove(),Ko=!1,Ke.find(".wpsvp-chapter-indicator").remove(),ii.css({display:"none",opacity:0}),jr=[],Lo=!1,Xe.removeClass("wpsvp-seekbar-chapters"),$o=!1,Zo=null,function(){if(ja&&E(),Oa=Es.getCounter(),(ja=Re.children(".wpsvp-playlist-item").eq(Oa)).length){if(ja.addClass("wpsvp-playlist-item-selected"),va&&0<Fa){if(!co)if("scroll"==Va)if("undefined"!=typeof mCustomScrollbar)"horizontal"==Ea?Pe.mCustomScrollbar("scrollTo",parseInt(ja.position().left),{scrollInertia:500}):Pe.mCustomScrollbar("scrollTo",parseInt(ja.position().top),{scrollInertia:500});else var t=setInterval(function(){"undefined"!=typeof mCustomScrollbar&&(clearInterval(t),"horizontal"==Ea?Pe.mCustomScrollbar("scrollTo",parseInt(ja.position().left),{scrollInertia:500}):Pe.mCustomScrollbar("scrollTo",parseInt(ja.position().top),{scrollInertia:500}))},500);else if("buttons"==Va){if("horizontal"==Ea)var i=Ee.width(),a=Re.width(),n="translateX";else i=Ee.height(),a=Re.height(),n="translateY";if(a<i)return;Vt.show(),Et.show();var o=-Re.find(".wpsvp-playlist-item").index(ja)*Yr;0<=o?(o=0,Vt.hide()):o<=i-a&&(o=i-a,Et.hide()),Zn=o,Re.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){$n=!1}).css({"-webkit-transform":n+"("+o+"px)","-ms-transform":n+"("+o+"px)",transform:n+"("+o+"px)"})}co=!1}e(yr).trigger("playlistItemDisabled",{instance:yr,instanceName:Vi})}}(),W()}).on("WPSVPPlaylistManager.RANDOM_CHANGE",function(e,t){t?yt.addClass("wpsvp-contr-btn-hover"):yt.removeClass("wpsvp-contr-btn-hover")}).on("WPSVPPlaylistManager.LOOP_CHANGE",function(e,t){t?gt.addClass("wpsvp-contr-btn-hover"):gt.removeClass("wpsvp-contr-btn-hover")}),window.onYouTubeIframeAPIReady=function(){},wr.on("resize",function(){if(!mr)return!1;Ma&&clearTimeout(Ma),Ma=setTimeout(we,100)}),this.playMedia=function(){if(!mr||!ro||uo)return!1;if("audio"==ro){if(Za){var e=Za.play();void 0!==e&&e.then(function(e){}).catch(function(e){mt.show()})}}else"video"==ro?en?(en.remove(),en=null,W()):an&&(void 0!==(e=an.play())&&e.then(function(e){}).catch(function(e){mt.show()})):"youtube"==ro?ln.playVideo():"vimeo"==ro&&gn.play();uo=!0},this.pauseMedia=function(){if(!mr||!ro||!uo)return!1;"audio"==ro?Za&&Za.pause():"video"==ro?an&&an.pause():"youtube"==ro?ln.pauseVideo():"vimeo"==ro&&gn.pause(),uo=!1},this.togglePlayback=function(){if(!mr||!ro)return!1;if(!xo)if("audio"==ro){if(en&&!_a)mt.hide(),ht.show(),W();else if(Za)if(Za.paused){var e=Za.play();void 0!==e&&e.then(function(e){}).catch(function(e){mt.show()})}else Za.pause()}else"video"==ro?en&&!_a?(en.remove(),en=null,mt.hide(),ht.show(),W()):an&&(an.paused?void 0!==(e=an.play())&&e.then(function(e){}).catch(function(e){mt.show()}):an.pause()):"youtube"==ro?en&&!_a?(en.remove(),en=null,mt.hide(),W()):1==(e=ln.getPlayerState())?ln.pauseVideo():2==e?ln.playVideo():(-1==e||5==e||0==e)&&ln.playVideo():"vimeo"==ro&&(en&&!_a?(en.remove(),en=null,mt.hide(),W()):gn.getPaused().then(function(e){e?gn.play():gn.pause()}))},this.nextMedia=function(){if(!mr)return!1;ve()},this.previousMedia=function(){if(!mr)return!1;he()},this.setVolume=function(e){if(!mr)return!1;0>e?e=0:1<e&&(e=1),l(e)},this.toggleMute=function(){if(!mr)return!1;r()},this.seek=function(e){if(!mr||!ro)return!1;"audio"==ro?Za.currentTime=e:"video"==ro?an.currentTime=e:"youtube"==ro?ln.seekTo(e):"vimeo"==ro&&gn.setCurrentTime(e)},this.seekBackward=function(e){if(!mr||!ro)return!1;if("audio"==ro){if(Za)try{Za.currentTime=Math.max(Za.currentTime-(e||ya),0)}catch(e){console.log(e)}}else if("video"==ro){if(an)try{an.currentTime=Math.max(an.currentTime-(e||ya),0)}catch(e){console.log(e)}}else if("youtube"==ro){var t=Math.max(ln.getCurrentTime()-(e||ya),0);ln.seekTo(t)}else"vimeo"==ro&&gn.getCurrentTime().then(function(t){gn.setCurrentTime(Math.max(t-(e||ya),0))})},this.seekForward=function(e){if(!mr||!ro)return!1;if("audio"==ro){if(Za)try{Za.currentTime=Math.min(Za.currentTime+(e||ya),Za.duration)}catch(e){console.log(e)}}else if("video"==ro){if(an)try{an.currentTime=Math.min(an.currentTime+(e||ya),an.duration)}catch(e){console.log(e)}}else if("youtube"==ro){var t=Math.min(ln.getCurrentTime()+(e||ya),ln.getDuration());ln.seekTo(t)}else"vimeo"==ro&&(0!=Er&&0!=Pr?(t=Math.min(Pr+(e||ya),Er),gn.setCurrentTime(t)):gn.getCurrentTime().then(function(t){gn.getDuration().then(function(i){gn.setCurrentTime(Math.min(t+(e||ya),i))})}))},this.getCurrentTime=function(){return!(!mr||!ro)&&("audio"==ro?Za.currentTime:"video"==ro?an.currentTime:"youtube"==ro?ln.getCurrentTime():"vimeo"==ro?Pr:void 0)},this.getDuration=function(){return!(!mr||!ro)&&("audio"==ro?Za.duration:"video"==ro?an.duration:"youtube"==ro?ln.getDuration():"vimeo"==ro?Er:void 0)},this.getLoadProgress=function(){if(!mr||!ro)return!1;var e;if("audio"==ro){if(void 0!==Za.buffered&&0!=Za.buffered.length){try{var t=Za.buffered.end(Za.buffered.length-1)}catch(e){}isNaN(t)||(e=t/Math.floor(Za.duration))}}else if("video"==ro){if(void 0!==an.buffered&&0!=an.buffered.length){try{t=an.buffered.end(an.buffered.length-1)}catch(e){}isNaN(t)||(e=t/Math.floor(an.duration))}}else"youtube"==ro?e=ln.getVideoLoadedFraction():"vimeo"==ro&&(e=Rr);return e},this.togglePlaylist=function(e){if(!mr)return!1;Te(e)},this.toggleRandom=function(e){if(!mr||void 0===Es)return!1;Es.setRandom(e)},this.toggleLoop=function(e){if(!mr||void 0===Es)return!1;Es.setLooping(e)},this.setPlaybackRate=function(e){if(!mr||!ro)return!1;Aa.playbackRate=e,"audio"==ro?Za&&(Za.playbackRate=e):"video"==ro?an&&(an.playbackRate=e):"youtube"==ro?ln.setPlaybackRate(e):"vimeo"==ro&&gn.setPlaybackRate(e).then(function(e){}).catch(function(e){console.log(e.name)})},this.setPlaybackQuality=function(e){if(!mr||!ro)return!1;"image"==ro||"audio"==ro||"video"==ro?"hls"==so&&"dash"==so||(Aa.quality=e,h(e),W(!0)):"youtube"==ro&&ln.setPlaybackQuality(e)},this.toggleInfo=function(e){if(!mr||!ro)return!1;_(e)},this.toggleShare=function(e){if(!mr||!ro)return!1;O(e)},this.toggleFullscreen=function(){if(!mr)return!1;Zr.click()},this.openLightbox=function(){if(!mr)return!1;ro&&ue(),Rt.css("display","block"),setTimeout(function(){clearTimeout(this),Rt.css("opacity",1)},50)},this.closeLightbox=function(){if(!mr)return!1;Rt.one("transitionend",function(){Rt.css("display","none")}).css("opacity",0),ro&&ue()},this.destroyMedia=function(){if(!mr)return!1;ce()},this.destroyPlaylist=function(){if(!mr)return!1;pe()},this.loadPlaylist=function(e){return!(!mr||gr)&&("string"!=typeof e?(alert("Invalid value loadPlaylist!"),!1):Ss!=e&&void U(e))},this.setAutoPlay=function(e){Ii=e},this.inputMedia=function(e){return!(!mr||gr)&&(void 0===e?(alert("inputMedia method requires data parameter. inputMedia failed."),!1):(ja&&E(),Es.reSetCounter(),Da=e,void W()))},this.loadMedia=function(e){return!(!mr||gr||!go)&&("number"!=typeof e?(alert("Invalid value loadMedia!"),!1):(0>e?e=0:e>Fa-1&&(e=Fa-1),void Es.processPlaylistRequest(e)))},this.addTrack=function(t,i,a,n){if(!mr||gr)return!1;if(void 0===t)return alert("addTrack method requires format parameter. AddTrack failed."),!1;if(void 0===i)return alert("addTrack method requires track parameter. AddTrack failed."),!1;_o=!1,void 0!==a&&(_o=a),a=1;var o=!1;if("string"!=typeof i&&"[object Object]"!==Object.prototype.toString.call(i)){if("[object Array]"!==Object.prototype.toString.call(i))return alert("addTrack method requires track as string, object or array parameter. AddTrack failed."),!1;a=i.length,o=!0}if(Io=n,So=!1,Mo=!0,go)if(void 0!==Io){if(0>Io||Io>Fa)return alert('Invalid position to insert track to. Position number "'+n+'" doesnt exist. AddTrack failed.'),!1;Io==Fa&&(So=!0)}else So=!0,Io=Fa;else{if(void 0!==Io){if(0!=Io)return alert('Invalid position to insert track to. Position number "'+n+'" doesnt exist. AddTrack failed.'),!1}else Io=0;So=!0}for(gr=!0,ft.show(),bo=-1,Nr=[],Ur=[],n=0;n<a;n++){var r=o?i[n]:i;r="html"==t?e(e.parseHTML(r)):r,Ur.push(r)}Fa=Ur.length,Oo=!1,go||(Oo=!0),go="exist",Is=!1,D()},this.removeTrack=function(t){if(!mr||gr)return!1;if(0!=Fa){if(void 0===t)return alert("removeTrack method requires id parameter. removeTrack failed."),!1;if("string"==typeof t){var i=!1;if(Re.find(".wpsvp-playlist-item").each(function(){if(e(this).find(".wpsvp-playlist-title").html()==t)return a=e(this),t=Re.find(".wpsvp-playlist-item").index(a),i=!0,!1}),!i)return alert('Track with title "'+t+'" doesnt exist. RemoveTrack failed.'),!1}else{if("number"!=typeof t)return alert("removeTrack method requires either a id number or a track title to remove. removeTrack failed."),!1;if(0>(t=parseInt(t,10))||t>Fa-1)return alert('Invalid id number. Track number  "'+t+'" doesnt exist. RemoveTrack failed.'),!1;var a=Re.find(".wpsvp-playlist-item").eq(t)}if(a.remove(),0<(Fa=Re.children(".wpsvp-playlist-item").length)){var n=Es.getCounter();t==n?(ue(),Es.setPlaylistItems(Fa)):(Es.setPlaylistItems(Fa,!1),t<n&&Es.reSetCounter(Es.getCounter()-1)),ki&&xa&&ke()}else pe()}},this.setLoadMore=function(e){Ms=e},this.loadMore=function(){if(!gr){gr=!0,ft.show(),Sa=!0,Nr=[];var e=Ia;"youtube"==e?(rn||A("youtube"),rn.resumeLoad(_s)):"vimeo"==e&&(fn||A("vimeo"),fn.resumeLoad(_s))}},this.getTitle=function(){return!(!mr||!Aa)&&(Aa.title||Aa.domTitle||"")},this.getMediaPlaying=function(){return!!mr&&uo},this.getPlaylistLength=function(){return!!mr&&Fa},this.getSetupDone=function(){return mr},this.getSettings=function(){return t},this.getActiveItemId=function(){return!!mr&&(void 0!==Es?Es.getCounter():null)},this.adSkip=function(){if(!mr||!Ho||!Go)return!1;pi&&pi.trigger("click")};var Ps=WPSVPUtils.getUrlParameter();if(Ps.t&&(t.playbackPositionTime=Ps.t),Ps.media_id&&(t.activeItem=Ps.media_id),aa)if(na){if(ki&&localStorage.getItem(aa)){var Rs=JSON.parse(localStorage.getItem(aa));t.playbackPositionTime=Rs.resumeTime,Si=Rs.volume,t.activeItem=Rs.activeItem,localStorage.removeItem(aa)}}else localStorage.removeItem(aa);if(ki)if(xa){if(t.activePlaylist&&!WPSVPUtils.isEmpty(t.activePlaylist)&&localStorage.getItem(Ta))if((Rs=JSON.parse(localStorage.getItem(Ta))).date+xa>Math.floor(Date.now()/1e3))if(Rs.activePlaylist==t.activePlaylist){var Ss=t.activePlaylist;t.activePlaylist="",Re.html(Rs.playlist);var Is=!0;if(Rs.loadMoreOnTotalScroll){var Ms=Rs.loadMoreOnTotalScroll,_s=Rs.nextPageToken,Os=Rs.loadMoreItem;Rs.channelId&&(Os=Os.replace(/youtube_user/g,"youtube_channel").replace(/data-path="(.*?)"/g,"data-path='"+Rs.channelId+"'"))}}else localStorage.removeItem(Ta);else localStorage.removeItem(Ta)}else localStorage.removeItem(Ta);return this.deletePlaylistCache=function(){ki&&localStorage.removeItem(Ta)},t.activePlaylist&&!WPSVPUtils.isEmpty(t.activePlaylist)?U(t.activePlaylist):(console.log("setupFromDom"),function(){if(Re.find(".wpsvp-global-playlist-data").length&&((wo=Re.find(".wpsvp-global-playlist-data").remove()).find(".wpsvp-ad-section").length&&(Fo=wo.find(".wpsvp-ad-section")),wo.find(".wpsvp-annotation-section").length&&(er=wo.find(".wpsvp-annotation-section")),null!=wo.attr("data-upnext-time")&&(To=parseInt(wo.attr("data-upnext-time"),10)),null!=wo.attr("data-pwd")&&(ir=wo.attr("data-pwd")),null!=wo.attr("data-display-poster-on-mobile")&&xi&&(xo=!0,Oi=_i=Mi=Ii=!1)),Fa=Re.children(".wpsvp-playlist-item").length,console.log("playlistLength: ",Fa),0<Fa){Re.find(".wpsvp-playlist-item").each(function(){var t=e(this).on("click",k);xi||t.on("mouseenter",C).on("mouseleave",V)}),Es.setPlaylistItems(Fa),go="exist","horizontal"==Ea&&Re.width(Fa*Yr);var i=[];Re.find(".wpsvp-thumbimg:not(.wpsvp-visible)").each(function(){i.push(e(this))});var a,n=0,o=i.length;for(a=0;a<o;a++)setTimeout(function(){clearTimeout(this),i[n].addClass("wpsvp-visible"),n++},50+50*a);t.truncatePlaylistDescription&&(void 0!==e.fn.dotdotdot?Re.find(".wpsvp-playlist-info:not(.is-truncated)").each(function(){e(this).dotdotdot({watch:t.truncateWatch})}):((o=document.createElement("script")).type="text/javascript",o.src=WPSVPUtils.qualifyURL(Ci+"js/scripts/jquery.dotdotdot.min.js"),o.onload=o.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||Re.find(".wpsvp-playlist-info:not(.is-truncated)").each(function(){e(this).dotdotdot({watch:t.truncateWatch})})},o.onerror=function(){alert("Error loading "+this.src)},(a=document.getElementsByTagName("script")[0]).parentNode.insertBefore(o,a)))}mr||(mr=!0,Li&&((o=document.createElement("script")).type="text/javascript",o.src=WPSVPUtils.qualifyURL(Ci+"js/scripts/jquery-ui.min.js"),o.onload=o.onreadystatechange=function(){if(!this.readyState||"complete"==this.readyState){var e=document.createElement("script");e.type="text/javascript",e.src=WPSVPUtils.qualifyURL(Ci+"js/scripts/jquery.ui.touch-punch.min.js"),e.onload=e.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||Re.sortable({helper:"clone"})},e.onerror=function(){alert("Error loading "+this.src)};var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}},o.onerror=function(){alert("Error loading "+this.src)},(a=document.getElementsByTagName("script")[0]).parentNode.insertBefore(o,a)),va&&!No&&j(),xi||Oe.on("mouseenter",P).on("mouseleave",R),we(),e(yr).trigger("setupDone",{instance:yr,instanceName:Vi}),Ce.css("opacity",1),Bi&&(io=WPSVPUtils.getElementOffsetTop(Ce[0]),wr.on(kr,function(){ao||(ao=!0,z(),setTimeout(function(){ao=!1},100))}))),ft.hide(),gr=!1,e(yr).trigger("playlistEndLoad",{instance:yr,instanceName:Vi}),(o=t.activeItem)>Fa-1&&(o=Fa-1),-1<o&&Es.setCounter(o,!1),yo=!0}()),this}}(jQuery);