var myVar,i=0,partTime=0,randomTime=0,playSequence=0,partFirstRandomTime=0,partSecondRandomTime=0,randomVal=0,partFlag=0,measureTime=0,playingMode=2,wpsvpjq=jQuery,testVal=0;!function(e){var t=function(){};t.test=document.createElement("div"),t.isEmpty=function(e){return 0==e.replace(/^\s+|\s+$/g,"").length},t.strip=function(e){return e.replace(/^\s+|\s+$/g,"")},t.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},t.isMobile=function(){return/Android|webOS|iPhone|iPad|iPod|sony|BlackBerry/i.test(navigator.userAgent)},t.isIE=function(){return-1!=t.getInternetExplorerVersion()},t.isChrome=function(){return!!e.chrome&&!!e.chrome.webstore},t.isSafari=function(){return 0<Object.prototype.toString.call(e.HTMLElement).indexOf("Constructor")},t.hasLocalStorage=function(){try{return"localStorage"in e&&null!==e.localStorage}catch(e){return!1}},t.getInternetExplorerVersion=function(){var e=-1;if("Microsoft Internet Explorer"==navigator.appName){var t=navigator.userAgent,a=/MSIE ([0-9]{1,}[.0-9]{0,})/;null!=a.exec(t)&&(e=parseFloat(RegExp.$1))}else"Netscape"==navigator.appName&&(t=navigator.userAgent,null!=(a=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/).exec(t)&&(e=parseFloat(RegExp.$1)));return e},t.isIOS=function(){return navigator.userAgent.match(/(iPad|iPhone|iPod)/g)},t.isiPhoneIpod=function(){var e=navigator.userAgent;return-1<e.indexOf("iPhone")||-1<e.indexOf("iPod")},t.isAndroid=function(){return-1<navigator.userAgent.indexOf("Android")},t.hasHistory=function(){return!(!e.history||!history.pushState)},t.hasDownloadSupport=function(){return"download"in document.createElement("a")},t.volumeCanBeSet=function(){var e=document.createElement("audio");return!!e&&(e.volume=0,0==e.volume)},t.supportsWebGL=function(){try{return!!e.WebGLRenderingContext&&!!document.createElement("canvas").getContext("experimental-webgl")}catch(e){return!1}},t.canPlayMp4=function(){var e=document.createElement("video");return!(!e.canPlayType||!e.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"').replace(/no/,""))},t.canPlayMp3=function(){var e=document.createElement("audio");return!(!e.canPlayType||!e.canPlayType("audio/mpeg;").replace(/no/,""))},t.canPlayWav=function(){var e=document.createElement("audio");return!(!e.canPlayType||!e.canPlayType("audio/wav;").replace(/no/,""))},t.relativePath=function(e){return/^(?:[a-z]+:)?\/\//i.test(e)},t.qualifyURL=function(e){var t=document.createElement("a");return t.href=e,t.href},t.hasFullscreen=function(){return t.test.requestFullscreen||t.test.mozRequestFullScreen||t.test.msRequestFullscreen||t.test.oRequestFullscreen||t.test.webkitRequestFullScreen},t.selectText=function(t){var a=document;if(a.body.createTextRange)(a=a.body.createTextRange()).moveToElementText(t),a.select();else if(e.getSelection){var i=e.getSelection();(a=a.createRange()).selectNodeContents(t),i.removeAllRanges(),i.addRange(a)}},t.randomiseArray=function(e){var t,a=[],i=[];for(t=0;t<e;t++)a[t]=t;for(t=0;t<e;t++){var n=Math.round(Math.random()*(a.length-1));i[t]=a[n],a.splice(n,1)}return i},t.sortArray=function(e,t){var a,i=e.length,n=[];for(a=0;a<i;a++)n[a]=e[t[a]];return n},t.keysrt=function(e,t,a){var i=1;return a&&(i=-1),e.sort(function(e,a){var n=e[t],o=a[t];return i*(n<o?-1:n>o?1:0)})},t.formatTime=function(e){e=parseInt(e,10);var t=Math.floor(e/3600),a=Math.floor((e-3600*t)/60);return e=e-3600*t-60*a,0<t?(10>t&&(t="0"+t),10>a&&(a="0"+a),10>e&&(e="0"+e),t+":"+a+":"+e):(10>a&&(a="0"+a),10>e&&(e="0"+e),a+":"+e)},t.toSeconds=function(e){return e=e.split(/[\.:,]+/),Number(3600*+e[0]+60*+e[1]+ +e[2])},t.isScrolledIntoView=function(t){var a=(t=t.getBoundingClientRect()).bottom;return 0<=t.top&&a<=e.innerHeight},t.getElementOffsetTop=function(t){t=t.getBoundingClientRect();var a=document.body,i=document.documentElement;return Math.round(t.bottom-100+(e.pageYOffset||i.scrollTop||a.scrollTop)-(i.clientTop||a.clientTop||0))},t.getScrollTop=function(t){return t=document.documentElement,(e.pageYOffset||t.scrollTop)-(t.clientTop||0)},t.rgbToHex=function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)?e:(e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===e.length?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""},t.getUrlParameter=function(t){var a={};return e.location.search.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,t,i){a[t]=i}),t?a[t]:a},t.checkCssExist=function(e){for(var t=document.styleSheets,a=0,i=t.length;a<i;a++)if(t[a].href==e)return;(t=document.createElement("link")).rel="stylesheet",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)},e.WPSVPUtils=t}(window),function(e,t){e.WPSVPYoutubeLoader=function(e){function a(e){t.ajax({url:"https://www.googleapis.com/youtube/v3/videos?id="+e+"&key="+y+"&part=statistics,contentDetails",dataType:"jsonp"}).done(function(e){if(e.error&&e.error.message)console.log(e.error.message);else{var a,i=e.items.length;for(a=0;a<i;a++){var n=e.items[a];v[a].statistics=n.statistics;var o=v[a],s=n.contentDetails.duration,r=s.match(/\d+/g);0<=s.indexOf("M")&&-1==s.indexOf("H")&&-1==s.indexOf("S")&&(r=[0,r[0],0]),0<=s.indexOf("H")&&-1==s.indexOf("M")&&(r=[r[0],0,r[1]]),0<=s.indexOf("H")&&-1==s.indexOf("M")&&-1==s.indexOf("S")&&(r=[r[0],0,0]),s=0,3==r.length&&(s+=3600*parseInt(r[0]),s+=60*parseInt(r[1]),s+=parseInt(r[2])),2==r.length&&(s+=60*parseInt(r[0]),s+=parseInt(r[1])),1==r.length&&(s+=parseInt(r[0])),o.duration=s,"360"==n.contentDetails.projection&&(v[a].is360=!0)}t(m).trigger("WPSVPYoutubeLoader.END_LOAD",{info:u,data:v,nextPageToken:d})}}).fail(function(e,t,a){console.log(e,t,a)})}function i(e){t.ajax({url:e,dataType:"jsonp"}).done(function(e){if(e.error&&e.error.message)console.log(e.error.message);else{var r,p=e.items.length;for((d=e.nextPageToken)&&(d=l+"&pageToken="+d),r=0;r<p&&v.length!=c;r++){var f=e.items[r];"youtube_playlist"==o||"youtube_single"==o||"youtube_single_list"==o?f.status&&"private"!=f.status.privacyStatus&&(!f.snippet.title||"Deleted video"!=f.snippet.title)&&v.push(n(f,o)):("youtube_video_query"==o||"youtube_channel"==o)&&v.push(n(f,o))}if("youtube_single"==o||"youtube_single_list"==o)t(m).trigger("WPSVPYoutubeLoader.END_LOAD",{info:u,data:v,nextPageToken:d});else if(v.length<c)if(e.nextPageToken){if(v.length+g>c&&(g=c-v.length),"youtube_playlist"==o)var b="https://www.googleapis.com/youtube/v3/playlistItems?pageToken="+e.nextPageToken+"&part=snippet,status,contentDetails&maxResults="+g+"&playlistId="+s.path+"&key="+y;else"youtube_video_query"==o?b="https://www.googleapis.com/youtube/v3/search?pageToken="+e.nextPageToken+"&part=id,snippet&type=video&maxResults="+g+"&order="+h+"&q="+encodeURIComponent(s.path)+"&key="+y:"youtube_channel"!=o&&"youtube_user"!=o||(b="https://www.googleapis.com/youtube/v3/search?pageToken="+e.nextPageToken+"&part=id,snippet&type=video&maxResults="+g+"&order=date&channelId="+s.path+"&key="+y);i(b)}else if(w&&v.length){for(e="",p=v.length,r=0;r<p;r++)e+=v[r].id+",";a(e=e.substr(0,e.length-1))}else t(m).trigger("WPSVPYoutubeLoader.END_LOAD",{info:u,data:v,nextPageToken:d});else if(w){for(e="",p=v.length,r=0;r<p;r++)e+=v[r].id+",";a(e=e.substr(0,e.length-1))}else t(m).trigger("WPSVPYoutubeLoader.END_LOAD",{info:u,data:v,nextPageToken:d})}}).fail(function(e,t,a){console.log(e,t,a)})}function n(e,t){var a=jQuery.extend(!0,{},s);return a.type="youtube",a.deeplink&&"youtube_single"!=a.origtype&&(a.deeplink+=r.toString(),r++),"youtube_single"==t||"youtube_single_list"==t?a.id=e.id:"youtube_playlist"==t?a.id=e.contentDetails.videoId:"youtube_video_query"!=t&&"youtube_channel"!=t||(a.id=e.id.videoId),e.snippet&&(a.snippet=e.snippet,e.snippet.publishedAt&&(a.publishedAt=e.snippet.publishedAt)),!a.title&&e.snippet.title&&(a.title=e.snippet.title),!a.description&&e.snippet.description&&(a.description=e.snippet.description),a.url||(a.url="https://www.youtube.com/watch?v="+a.id),e.contentDetails&&e.contentDetails.projection&&"360"==e.contentDetails.projection&&(a.is360=!0),e.statistics&&(a.statistics=e.statistics),a}var o,s,r,l,d,p,u,c,h,f,m=this,v=[],g=50,w=e.getStats,y=e.youtubeAppId;this.resumeLoad=function(e){v=[],e?(l=e.substr(0,e.lastIndexOf("&pageToken=")),i(e)):t(m).trigger("WPSVPYoutubeLoader.END_LOAD",{data:v,nextPageToken:e})},this.getData=function(e){if(u=null,"youtube_channel"==e.type){var a="https://www.googleapis.com/youtube/v3/channels?part=id,snippet,statistics,brandingSettings&id="+e.path+"&fields=items(id,snippet%2Ftitle,snippet%2Fdescription,snippet%2FpublishedAt,snippet%2Fthumbnails,statistics%2FsubscriberCount,statistics%2FviewCount,statistics%2FvideoCount,brandingSettings%2Fimage)&key="+y;t.ajax({url:a,dataType:"jsonp"}).done(function(t){(u=t).fetch_type=e.type,m.setData(e)}).fail(function(e,t,a){console.log(e,t,a)})}else"youtube_playlist"==e.type?m.setData(e):"youtube_video_query"==e.type?m.setData(e):"youtube_user"==e.type&&(a="https://www.googleapis.com/youtube/v3/channels?part=id,snippet,statistics,brandingSettings&forUsername="+e.path+"&fields=items(id,snippet%2Ftitle,snippet%2Fdescription,snippet%2FpublishedAt,snippet%2Fthumbnails,statistics%2FsubscriberCount,statistics%2FviewCount,statistics%2FvideoCount,brandingSettings%2Fimage)&key="+y,t.ajax({url:a,dataType:"jsonp"}).done(function(t){u=t,e.type="youtube_channel",e.path=t.items[0].id,u.fetch_type=e.type,m.setData(e)}).fail(function(e,t,a){console.log(e,t,a)}))},this.getChannelId=function(){return f},this.setDataFromCache=function(e){v=[],(c=(s=e).limit||400)<(g=50)&&(g=c),h=s.sort||"relevance",o=s.type},this.setData=function(e){if(y){if(v=[],r=0,(c=(s=e).limit||400)<(g=50)&&(g=c),h=s.sort||"relevance",o=s.type,d=null,"youtube_single"==o||"youtube_single_list"==o)l="https://www.googleapis.com/youtube/v3/videos?id="+s.path+"&key="+y+"&part=snippet,contentDetails,status,statistics";else if("youtube_playlist"==o)l="https://www.googleapis.com/youtube/v3/playlistItems?part=snippet,status,contentDetails&maxResults="+g+"&playlistId="+s.path+"&key="+y;else if("youtube_video_query"==o)l="https://www.googleapis.com/youtube/v3/search?part=id,snippet&type=video&maxResults="+g+"&order="+h+"&q="+encodeURIComponent(s.path)+"&key="+y;else{if("youtube_channel"!=o)return void("youtube_user"==o?t.ajax({url:"https://www.googleapis.com/youtube/v3/channels?part=id&forUsername="+s.path+"&fields=items(id)&key="+y,dataType:"jsonp"}).done(function(t){o=e.type="youtube_channel",f=t.items[0].id,e.path=f,u&&(u.fetch_type=e.type),m.setData(e)}).fail(function(e,t,a){console.log(e,t,a)}):console.log("Wrong youtube type!"));l="https://www.googleapis.com/youtube/v3/search?part=id,snippet&type=video&order=date&maxResults="+g+"&order=date&channelId="+s.path+"&key="+y}i(l)}else alert("Youtube API key missing! Set API key in settings.")},this.getChannelInfo=function(e){t.ajax({url:"https://www.googleapis.com/youtube/v3/channels?part=snippet,statistics&id="+e+"&fields=items(snippet%2Fthumbnails,statistics%2FsubscriberCount)&key="+y,dataType:"jsonp"}).done(function(e){t(m).trigger("WPSVPYoutubeLoader.CHANNEL_INFO",{data:e})}).fail(function(e,t,a){console.log(e,t,a)})},this.getComments=function(e){p="https://www.googleapis.com/youtube/v3/commentThreads?part=snippet,replies&order=time&videoId="+e+"&key="+y,t.ajax({url:p,dataType:"jsonp"}).done(function(e){t(m).trigger("WPSVPYoutubeLoader.COMMENTS_END_LOAD",{data:e})}).fail(function(e,a,i){console.log(e,a,i),t(m).trigger("WPSVPYoutubeLoader.COMMENTS_ERROR_LOAD")})},this.resumeComments=function(e){p+="&pageToken="+e,t.ajax({url:p,dataType:"jsonp"}).done(function(e){t(m).trigger("WPSVPYoutubeLoader.COMMENTS_END_LOAD",{data:e})}).fail(function(e,a,i){console.log(e,a,i),t(m).trigger("WPSVPYoutubeLoader.COMMENTS_ERROR_LOAD")})},this.getNextPageToken=function(){return d}}}(window,jQuery),function(e,t){e.WPSVPVimeoLoader=function(a){function i(e){t.ajax({type:"GET",url:u+"includes/vimeo/vimeo_data.php",data:{type:"next_page",path:e,vai:m},dataType:"json"}).done(function(e){n(e)}).fail(function(e,t,a){console.log(e,t,a)})}function n(e){var a;r=e.body.paging&&e.body.paging.next?e.body.paging.next:null;var n=e.body.data?e.body.data.length:1;for(a=0;a<n&&f.length!=s;a++){var d=e.body.uri?e.body:e.body.data[a];f.push(o(d))}f.length<s&&r?(f.length+c>s&&(c=s-f.length,e=r.split("per_page=")[1].split("&")[0],r=r.replace("per_page="+e,"per_page="+c)),i(r)):t(p).trigger("WPSVPVimeoLoader.END_LOAD",{info:l,data:f,nextPageToken:r})}function o(e){var a=t.extend(!0,{},h);return a.deeplink&&"vimeo_single"!=a.origtype&&(a.deeplink+=(d+1).toString(),d++),a.type="vimeo",-1<e.uri.indexOf(":")&&(e.uri=e.uri.substr(0,e.uri.lastIndexOf(":"))),a.id=e.uri.substr(e.uri.lastIndexOf("/")+1),e.duration&&(a.duration=e.duration),!a.title&&e.name&&(a.title=e.name),!a.description&&e.description&&(a.description=e.description),!a.thumb&&e.pictures&&(a.pictures=e.pictures),a.url||(a.url="https://vimeo.com/"+a.id),a.release_time=e.release_time,a.plays=e.stats.plays,a.comments=e.metadata.connections.comments.total,a.likes=e.metadata.connections.likes.total,a.categories=e.categories,a.user=e.user,e.download&&e.download.link&&(a.download=e.download.link),a}var s,r,l,d,p=this,u=a.sourcePath,c=100,h=[],f=[],m=a.vai;this.resumeLoad=function(e){f=[],e?i(e):t(p).trigger("WPSVPVimeoLoader.END_LOAD",{data:f,nextPageToken:e})},this.getData=function(e){l=null,"vimeo_channel"==e.type||"vimeo_group"==e.type||"vimeo_user_album"==e.type?t.ajax({type:"GET",url:u+"includes/vimeo/vimeo_data.php",data:{type:"vimeo_user_album"==e.type?"vimeo_user_info":e.type+"_info",path:e.path,user_id:e.user_id,vai:m},dataType:"json"}).done(function(t){(l=t.body).fetch_type=e.type,p.setData(e)}).fail(function(e,t,a){console.log(e,t,a)}):"vimeo_album"==e.type?p.setData(e):"vimeo_video_query"==e.type&&p.setData(e)},this.setDataFromCache=function(e){f=[],c=100,(s=(h=e).limit||1e3)<c&&(c=s)},this.setData=function(a){if("file:"==e.location.protocol)console.log("Using Vimeo locally is not possible! This requires online server connection!");else{f=[],c=100,(s=(h=a).limit||1e3)<c&&(c=s),d=0,r=null,"vimeo_single"==h.type&&-1<h.path.indexOf("/")&&(h.path=h.path.replace("/",":"));var i=u+"includes/vimeo/vimeo_data.php";a={type:h.type,path:h.path,user_id:h.user_id,sort:h.sort,sortDirection:h.sortDirection,page:1,perPage:s<c?s:c,vai:m},t.ajax({type:"GET",url:i,data:a,dataType:"json"}).done(function(e){if(!e.body)return console.log("Vimeo response null!"),!1;n(e)}).fail(function(e,t,a){console.log(e,t,a)})}},this.getComments=function(e,a){t.ajax({type:"GET",url:u+"includes/vimeo/vimeo_data.php",data:{type:"video_comments",video_id:e,sortDirection:"desc",page:1,perPage:a,vai:m},dataType:"json"}).done(function(e){t(p).trigger("WPSVPVimeoLoader.COMMENTS_END_LOAD",{data:e.body})}).fail(function(e,a,i){console.log(e,a,i),t(p).trigger("WPSVPVimeoLoader.COMMENTS_ERROR_LOAD")})},this.resumeComments=function(e){t.ajax({type:"GET",url:u+"includes/vimeo/vimeo_data.php",data:{type:"next_page",path:e,vai:m},dataType:"json"}).done(function(e){t(p).trigger("WPSVPVimeoLoader.COMMENTS_END_LOAD",{data:e.body})}).fail(function(e,a,i){console.log(e,a,i),t(p).trigger("WPSVPVimeoLoader.COMMENTS_ERROR_LOAD")})},this.getNextPageToken=function(){return r}}}(window,jQuery),function(e,t){e.WPSVPPlaylistManager=function(e){function a(){c=WPSVPUtils.randomiseArray(i)}var i,n,o,s=this,r=e.loopingOn,l=e.randomPlay,d=!1,p=-1,u=!1,c=[],h=!1;setTimeout(function(){clearTimeout(this),t(s).trigger("WPSVPPlaylistManager.RANDOM_CHANGE",l),t(s).trigger("WPSVPPlaylistManager.LOOP_CHANGE",r)},50),this.setCounter=function(e,n){if(void 0===n&&(n=!0),p=n?p+parseInt(e,10):parseInt(e,10),isNaN(p))alert("WPSVPPlaylistManager message: No active media, counter = "+p);else if(d=!1,r){if(l)if(p>i-1){if(p=c[i-1],a(),c[0]==p){var o=c.splice(0,1);c.push(o)}p=0}else 0>p&&(p=c[0],a(),c[i-1]==p&&(o=c.splice(i-1,1),c.unshift(o)),p=i-1);else p>i-1?p=0:0>p&&(p=i-1);t(s).trigger("WPSVPPlaylistManager.COUNTER_READY",p)}else p>i-1?(p=i-1,d=!0):0>p&&(p=0),d?t(s).trigger("WPSVPPlaylistManager.PLAYLIST_END"):t(s).trigger("WPSVPPlaylistManager.COUNTER_READY",p)},this.getCounter=function(){return l?h?p:c[p]:p},this.advanceHandler=function(e){h=!1,u?(u=!1,o+e>i-1?(p=i-1,t(s).trigger("WPSVPPlaylistManager.COUNTER_READY",p)):0>o+e?(p=0,t(s).trigger("WPSVPPlaylistManager.COUNTER_READY",p)):s.setCounter(o+e,!1)):s.setCounter(e)},this.processPlaylistRequest=function(e){h=!1,l&&(h=!0,n=e,u||(o=p,u=!0)),s.setCounter(e,!1)},this.setPlaylistItems=function(e,t){void 0===t&&(t=!0),t&&(p=-1),i=e,l&&a()},this.reSetCounter=function(e){void 0===e?p=-1:(e=parseInt(e,10),i?(e>i-1?e=i-1:0>e&&(e=0),p=e):p=-1)},this.setRandom=function(e){if((l=void 0!==e?e:!l)&&a(),l){var i=c.length;for(e=0;e<i;e++)if(c[e]==p){if(0==e)break;e=c.splice(e,1),c.unshift(parseInt(e,10));break}p=0}else u?(p=n,u=!1):p=c[p];t(s).trigger("WPSVPPlaylistManager.RANDOM_CHANGE",l)},this.getRandom=function(e){return l},this.setLooping=function(e){r=void 0!==e?e:!r,t(s).trigger("WPSVPPlaylistManager.LOOP_CHANGE",r)},this.getLooping=function(e){return r},this.getPosition=function(e){return c.indexOf(e)}}}(window,jQuery),function(e,t){function a(e,t,a,n){var o={},s=a.width(),r=(s-0)/((a=a.height())-0),l=(t=(n=i(t,n)).width)/(n=n.height);return l<r?e?(o.width=(a-0)/n*t,o.height=a-0):(o.height=(s-0)/t*n,o.width=s-0):l>r?e?(o.height=(s-0)/t*n,o.width=s-0):(o.width=(a-0)/n*t,o.height=a-0):(o.width=s-0,o.height=a-0),o}function i(e,t){var a={};return"video"==e?t.videoWidth&&t.videoHeight?(a.width=t.videoWidth,a.height=t.videoHeight):t[0]&&t[0].videoWidth&&t[0].videoHeight?(a.width=t[0].videoWidth,a.height=t[0].videoHeight):(a.width=16,a.height=9):"iframe"==e?t.sw&&t.sh?(a.width=t.sw,a.height=t.sh):(a.width=16,a.height=9):"image"==e&&(a.width=t.width(),a.height=t.height()),a}var n=function(){};n.resizeMedia=function(e,t,n,o){var s,r=n.width(),l=n.height();0==t?s=i(e,o):1==t?s=a(!0,e,n,o):2==t&&(s=a(!1,e,n,o)),e=parseInt((r-s.width)/2,10),l=parseInt((l-s.height)/2,10),o.css({width:s.width+"px",height:s.height+"px",left:e+"px",top:l+"px"})},e.WPSVPAspectRatio=n}(window,jQuery),function(e){e.fn.wpsvp=function(t){function a(){Se.swipe({swipeLeft:function(e,t,a,i,n,o){if(!vs)return!1;("audio"==so||"video"==so&&"video_360"!=ro||"image"==so&&"image_360"!=ro||"youtube"==so&&"chromeless"==Xa&&!Ui.is360||"vimeo"==so&&"chromeless"==yn&&!Ui.is360)&&he()},swipeRight:function(e,t,a,i,n,o){if(!vs)return!1;("audio"==so||"video"==so&&"video_360"!=ro||"image"==so&&"image_360"!=ro||"youtube"==so&&"chromeless"==Xa&&!Ui.is360||"vimeo"==so&&"chromeless"==yn&&!Ui.is360)&&fe()}})}function n(e){0>(e=e.pageX-Ke.offset().left)?e=0:e>rr&&(e=rr);var t=Math.max(0,Math.min(1,e/rr));if("audio"==so){var a=Zi.duration,i=t*a;try{Zi.currentTime=i.toFixed(1)}catch(e){}}else if("video"==so){a=an.duration,i=t*a;try{an.currentTime=i.toFixed(1)}catch(e){}}else"youtube"==so?(a=ln.getDuration(),i=t*a,ln.seekTo(i)):"vimeo"==so&&(0!=Cs?(i=t*(a=Cs),gn.setCurrentTime(i)):gn.getDuration().then(function(e){i=t*(a=e),gn.setCurrentTime(i)}),"chromeless"==yn&po&&ft.show());if(po||(we(!0),$e.width(i/a*rr)),xa&&Ls.length){var n=Ls.length;for(e=0;e<n;e++){var o=Ls[e];if(i>=o.start&&i<=o.end){aa.css("opacity",1).text(o.text),po||vt.hide();break}}}}function o(e){var t=e.pageX-Ke.offset().left;if(!WPSVPUtils.isNumber(t))return!1;0>t?t=0:t>rr&&(t=rr);var a=Math.max(0,Math.min(1,t/rr));if(!WPSVPUtils.isNumber(a))return!1;t=ke[0].getBoundingClientRect();var i=Xe[0].getBoundingClientRect();if("audio"==so)var n=Zi.duration;else"video"==so?n=an.duration:"youtube"==so?n=ln.getDuration():"vimeo"==so&&(n=Cs);if(Ui.previewSeek&&ks.length){var o=n*a;for(WPSVPUtils.isNumber(n)&&Ge.html(WPSVPUtils.formatTime(o)),a=ks.length,n=0;n<a;n++){var s=ks[n],r=s.start,l=s.end;if(o>=r&&o<=l){if(!Fi){var d=(s=s.url).substr(s.lastIndexOf("=")+1).split(",");d="-"+d[0]+"px -"+d[1]+"px",(Fi={}).start=r,Fi.end=l,Qe.css({"background-image":"url("+s+")","background-position":d})}}else Fi&&(o<Fi.start||o>Fi.end)&&(Fi=null)}e=e.pageX-bs.scrollLeft()-t.left-Ye.outerWidth()/2,o=i.top-t.top-Ye.outerHeight()-10,"lightbox"!=mi&&(0>e?e=0:e+Ye.outerWidth()>Fe.width()&&(e=Fe.width()-Ye.outerWidth())),Ye.css({left:parseInt(e,10)+"px",top:parseInt(o,10)+"px"}).show()}else e=e.pageX-bs.scrollLeft()-t.left-or.outerWidth()/2,o="top"==lr?i.top-t.top+Xe.outerHeight()+10:i.top-t.top-or.outerHeight(),"lightbox"!=mi&&(0>e?e=0:e+or.outerWidth()>ke.width()&&(e=ke.width()-or.outerWidth())),or.css({left:parseInt(e,10)+"px",top:parseInt(o,10)+"px"}).show(),WPSVPUtils.isNumber(n)&&or.text(WPSVPUtils.formatTime(n*a)+" / "+WPSVPUtils.formatTime(n))}function s(){if(!vs)return!1;0<Ma?(ur=Ma,Ma=0):Ma=ur,l()}function r(e){pr?Ma=Math.max(0,Math.min(1,(e.pageX-at.offset().left)/fr)):Ma=1-(Ma=Math.max(0,Math.min(1,(e.pageY-at.offset().top)/fr))),l()}function l(t){void 0!==t&&(Ma=t),void 0!==Ma&&("audio"==so?Zi&&(Zi.volume=Ma,Zi.muted=0==Ma):"video"==so?an&&(an.volume=Ma,an.muted=0==Ma):"youtube"==so?ln&&(ln.setVolume(100*Ma),0==Ma?ln.mute():ln.unMute()):"vimeo"==so&&gn&&gn.setVolume(Ma)),et.children().hide(),0==Ma?(et.find(".wpsvp-btn-volume-off").show(),"custom"==ci&&(nr.find(".wpsvp-context-volume-mute").hide(),nr.find(".wpsvp-context-volume-unmute").show())):0<Ma&&.5>Ma?(et.find(".wpsvp-btn-volume-down").show(),"custom"==ci&&(nr.find(".wpsvp-context-volume-unmute").hide(),nr.find(".wpsvp-context-volume-mute").show())):.5<=Ma&&1>=Ma&&(et.find(".wpsvp-btn-volume-up").show(),"custom"==ci&&(nr.find(".wpsvp-context-volume-unmute").hide(),nr.find(".wpsvp-context-volume-mute").show())),it.css(pr?"width":"height",Ma*fr+"px"),e(ws).trigger("volumeChange",{instance:ws,instanceName:Ca,volume:Ma})}function d(e){var t=pr?e.pageX-at.offset().left:e.pageY-at.offset().top;if(0>t?t=0:t>fr&&(t=fr),t=Math.max(0,Math.min(1,t/fr)),!WPSVPUtils.isNumber(t))return!1;pr||(t=1-t),t=parseInt(100*t,10),or.text(t+" %");var a=ke[0].getBoundingClientRect(),i=tt[0].getBoundingClientRect();pr?(t=parseInt(e.pageX-bs.scrollLeft()-a.left-or.outerWidth()/2),e=parseInt(i.top-a.top-or.outerHeight())):(t=parseInt(i.left-a.left-or.outerWidth()/2+tt.outerWidth()/2),e=parseInt(e.pageY-bs.scrollTop()-a.top-or.outerHeight()-10)),or.css({left:t+"px",top:e+"px"}).show()}function p(){if(e(this).hasClass("wpsvp-menu-active"))return!1;var t=e(this).attr("data-value");"audio"==so?Zi.playbackRate=Number(t):"video"==so?an.playbackRate=Number(t):"youtube"==so?ln.setPlaybackRate(Number(t)):"vimeo"==so&&gn.setPlaybackRate(Number(t)).then(function(e){}).catch(function(e){console.log(e.name)}),Ui.playbackRate=t,yr&&(gr.find(".wpsvp-settings-menu").hide(),wr.show())}function u(e){xo&&xo.removeClass("wpsvp-menu-active"),xo=Bt.find(".wpsvp-menu-item[data-value='"+e+"']").addClass("wpsvp-menu-active"),yr&&gr.find(".wpsvp-playback-rate-menu-value").text(xo.text())}function c(t,a){var i,n=t.length;for(i=0;i<n;i++){var o=t[i];o.label?e("<li/>").addClass("wpsvp-menu-item").attr({"data-value":o.value,"data-label":o.label}).text(o.label).on("click",h).appendTo(Yt):e("<li/>").addClass("wpsvp-menu-item").attr("data-value",o).text(o).on("click",h).appendTo(Yt)}f(a),Ht.show(),Qt.removeClass("wpsvp-force-hide")}function h(){if(e(this).hasClass("wpsvp-menu-active"))return!1;ko&&ko.removeClass("wpsvp-menu-active");var t=(ko=e(this).addClass("wpsvp-menu-active")).attr("data-value");if(Ui.quality=t,"image"==so||"audio"==so||"video"==so)if("hls"==ro){var a=parseInt(t,10);-1==t?(qi.currentLevel=a,qi.nextLevel=a,qi.loadLevel=a):qi.currentLevel=t}else"dash"!=ro&&z(!0);else"youtube"==so&&ln.setPlaybackQuality(t);yr&&(gr.find(".wpsvp-quality-menu-value").text(ko.text()),gr.find(".wpsvp-settings-menu").hide(),wr.show())}function f(e){ko&&ko.removeClass("wpsvp-menu-active"),ko=Yt.find(".wpsvp-menu-item[data-value='"+e+"']").addClass("wpsvp-menu-active"),yr&&gr.find(".wpsvp-quality-menu-value").text(ko.text())}function m(){var t=e(this).attr("data-value");"hls"==ro&&(qi.audioTrack=t)}function v(){var t,a=Ui.subtitles.length,i=ei;for(e("<li/>").addClass("wpsvp-menu-item").attr("data-label",ei).text(ei).on("click",g).appendTo(Kt),t=0;t<a;t++){var n=Ui.subtitles[t];e("<li/>").addClass("wpsvp-menu-item").attr({"data-value":n.value,"data-label":n.label}).text(n.label).on("click",g).appendTo(Kt),n.default&&(i=n.label)}ws.setSubtitle(i),Gt.show(),Jt.removeClass("wpsvp-force-hide")}function g(){if(e(this).hasClass("wpsvp-menu-active"))return!1;Co&&Co.removeClass("wpsvp-menu-active");var t=(Co=e(this).addClass("wpsvp-menu-active")).attr("data-label");ws.setSubtitle(t),yr&&(gr.find(".wpsvp-settings-menu").hide(),wr.show())}function w(t){e.ajax({url:t.src}).done(function(e){var a;for(a in e=e.split(/[\r\n]/)){var i=e[a];if(/.vtt/.test(i)){t.src=t.src.substr(0,t.src.lastIndexOf("/")+1)+i;var n=!0;break}}n?y(t):console.log("Error loading subtitle!")}).fail(function(e,t,a){console.log(e,t,a)})}function y(t){As=[];var a=t.src;-1!=a.indexOf("ebsfm:")&&(a=atob(a.substr(6))),e.ajax({url:a}).done(function(e){e=e.replace(/\r\n|\r|\n/g,"\n"),e=(e=WPSVPUtils.strip(e)).split("\n\n");var a,i,n=0;for(a in e){var o=e[a].split("\n");if("WEBVTT"!=o){if(2<=o.length)if(2<o.length){var s=WPSVPUtils.strip(o[1].split(" --\x3e ")[0]),r=WPSVPUtils.strip(o[1].split(" --\x3e ")[1]),l=o[2];if(2<o.length)for(i=3;i<o.length;i++)l+="\n"+o[i]}else s=WPSVPUtils.strip(o[0].split(" --\x3e ")[0]),r=WPSVPUtils.strip(o[0].split(" --\x3e ")[1]),l=o[1];As[n]={},As[n].start=WPSVPUtils.toSeconds(s),As[n].end=WPSVPUtils.toSeconds(r),As[n].text=l,n++}}Us[t.label]=As,Eo=!0}).fail(function(e,t,a){console.log(e,t,a)})}function b(t){console.log("makeChapters");var a,i=Ls.length;for(a=0;a<i;a++){var n=Ls[a],o=Math.abs(n.end-n.start);o=o/t*100;var s=n.start/t*100;n=e('<div class="wpsvp-chapter-indicator"><div class="wpsvp-chapter-indicator-highlight"></div></div>').css({width:o+"%",left:s+"%"}).attr({"data-title":n.text,"data-start":n.start,"data-end":n.end}),Ls[a].chapter=n,xa||n.on("mouseenter",function(){var t=e(this);t.find(".wpsvp-chapter-indicator-highlight").addClass("wpsvp-chapter-indicator-highlight-visible"),aa.css("opacity",1).text(t.attr("data-title")),po||vt.hide()}).on("mouseleave",function(){e(this).find(".wpsvp-chapter-indicator-highlight").removeClass("wpsvp-chapter-indicator-highlight-visible"),aa.css("opacity",0),po||vt.show()}).appendTo(Ke)}}function P(t){var a,i=Fs.length;for(a=0;a<i;a++){var n=Fs[a],o=Math.round(n.begin/t*100);n.marker=e('<div class="wpsvp-ad-indicator"></div>').css({left:o+"%"}).appendTo(Ke)}}function T(t){if(t.preventDefault(),!vs)return!1;if((t=e(t.currentTarget)).hasClass("wpsvp-playback-toggle")||t.hasClass("wpsvp-big-play"))ws.togglePlayback();else if(t.hasClass("wpsvp-playlist-toggle"))Pe();else if(t.hasClass("wpsvp-info-toggle"))_();else if(t.hasClass("wpsvp-info-close"))_(!1);else if(t.hasClass("wpsvp-embed-toggle"))O();else if(t.hasClass("wpsvp-share-close"))W(!1);else if(t.hasClass("wpsvp-pwd-confirm")){var a=ut.val();if(WPSVPUtils.isEmpty(a))alert(ct);else if("undefined"==typeof md5){(t=document.createElement("script")).type="text/javascript",t.src=WPSVPUtils.qualifyURL(Sa+"js/scripts/md5.min.js"),t.onload=t.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||(md5(a)!=Ui.pwd?alert(ct):(delete Ui.pwd,pt.hide(),ut.val(""),"video"==so&&en?z():Y(!0)))},t.onerror=function(){alert("Error loading "+this.src)};var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t,i)}else md5(a)!=Ui.pwd?alert(ct):(delete Ui.pwd,pt.hide(),ut.val(""),"video"==so&&en?z():Y(!0))}else if(t.hasClass("wpsvp-embed-close"))O(!1);else if(t.hasClass("wpsvp-previous-toggle"))fe();else if(t.hasClass("wpsvp-next-toggle"))he();else if(t.hasClass("wpsvp-loop-toggle"))Cr.setLooping();else if(t.hasClass("wpsvp-shuffle-toggle"))Cr.setRandom();else if(t.hasClass("wpsvp-rewind-toggle"))ws.seek(0);else if(t.hasClass("wpsvp-seek-backward"))ws.seekBackward();else if(t.hasClass("wpsvp-seek-forward"))ws.seekForward();else if(t.hasClass("wpsvp-share-toggle"))W();else if(t.hasClass("wpsvp-pip-toggle"))if(ms)if(document.pictureInPictureElement)try{document.exitPictureInPicture()}catch(e){}else try{an.requestPictureInPicture()}catch(e){}else an.webkitSupportsPresentationMode&&"function"==typeof an.webkitSetPresentationMode&&an.webkitSetPresentationMode("picture-in-picture"===an.webkitPresentationMode?"inline":"picture-in-picture");else t.hasClass("wpsvp-share-item")&&function(e){var t="https:"==window.location.protocol?"https:":"http:",a=(window.screen.width-600)/2,i=(window.screen.height-300)/2,n=Ui.title||"",o=Ui.description||"",s=Ui.thumb||Ui.thumbDefault,r=Ui.share||window.location.href;if(WPSVPUtils.relativePath(s)||(s=WPSVPUtils.qualifyURL(Ui.thumb)),"facebook"==e){if(ke.find('.wpsvp-share-item[data-type="facebook"]').length)return void alert("Facebook API key has not been set in settings!");if(window.FB)return void FB.ui({method:"share_open_graph",action_type:"og.shares",action_properties:JSON.stringify({object:{"og:url":r,"og:title":n,"og:description":o,"og:image":s}})},function(e){})}else if("twitter"==e)var l=t+"//twitter.com/intent/tweet?url="+encodeURIComponent(r)+"&text="+encodeURIComponent(n);else if("googleplus"==e)l=t+"//plus.google.com/share?url="+encodeURIComponent(r);else if("tumblr"==e)l=t+"//www.tumblr.com/share/link?url="+encodeURIComponent(r)+"&amp;name="+encodeURIComponent(n)+"&amp;description="+encodeURIComponent(o);else if("reddit"==e)l=t+"//www.reddit.com/submit?url="+encodeURIComponent(r);else if("linkedin"==e)l=t+"//www.linkedin.com/shareArticle?mini=true&url="+encodeURIComponent(r)+"&title="+encodeURIComponent(n)+"&summary="+encodeURIComponent(o)+"&source="+document.title;else if("digg"==e)l=t+"//digg.com/submit?url="+encodeURIComponent(r)+"&title="+encodeURIComponent(n);else if("pinterest"==e)l=t+"//www.pinterest.com/pin/create/button/?url="+encodeURIComponent(r)+"&media="+encodeURIComponent(s)+"&description="+encodeURIComponent(o);else if("whatsapp"==e){if(xa)return e=encodeURIComponent(n)+" - "+encodeURIComponent(r),void(window.location.href="whatsapp://send?text="+e);alert("Please share this content on mobile device!")}l&&window.open(l,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,width=600,height=300,left="+a+",top="+i)}(t.attr("data-type").toLowerCase());xa&&(vo&&clearTimeout(vo),vo=setTimeout(function(){clearTimeout(this),vo=null,M()},4e3))}function x(t){return t.preventDefault(),!!vs&&(t=e(t.currentTarget),(!Li||!Li.is(t))&&(uo=!0,t=Re.find(".wpsvp-playlist-item").index(t),Cr.processPlaylistRequest(t),e(ws).trigger("clickPlaylistItem",{instance:ws,instanceName:Ca}),void(hi?(t=We.offset().top,bs.scrollTop()>t&&e("html,body").animate({scrollTop:t},500)):xa&&Ce.hasClass("wpsvp-playlist-holder-bottom")&&(t=We.offset().top,bs.scrollTop()>t&&e("html,body").animate({scrollTop:t},500)))))}function k(t){if(t.preventDefault(),!vs)return!1;if(t=e(t.currentTarget),!xa&&t.attr("data-hover-preview")){var a=t.find(".wpsvp-thumbimg");a.attr("data-src",a.attr("src")).attr("src",t.attr("data-hover-preview"))}if(Li&&Li.is(t))return!1;t.addClass("wpsvp-playlist-item-selected")}function S(t){if(t.preventDefault(),!vs)return!1;if(t=e(t.currentTarget),!xa&&t.attr("data-hover-preview")){var a=t.find(".wpsvp-thumbimg");a.attr("src",a.attr("data-src"))}if(Li&&Li.is(t))return!1;t.removeClass("wpsvp-playlist-item-selected")}function C(){Li.removeClass("wpsvp-playlist-item-selected"),e(ws).trigger("playlistItemEnabled",{instance:ws,instanceName:Ca}),Li=null}function E(e){if(e.preventDefault(),!vs||!so||!Ws||"youtube"==so&&"default"==Xa||"vimeo"==so&&"default"==yn)return!1;I()}function R(e){if(e.relatedTarget||e.toElement){if(e.preventDefault(),!vs||!so||"youtube"==so&&"default"==Xa||"vimeo"==so&&"default"==yn)return!1;po&&M()}}function I(){!Ui||!_i||Bo||"youtube"==so&&"default"==Xa||"vimeo"==so&&"default"==yn||(Fe.addClass("wpsvp-interface-visible"),Ro&&Ve.addClass("wpsvp-subtitle-bottom"),Ws=!1,xa&&(vo&&clearTimeout(vo),vo=setTimeout(function(){clearTimeout(this),vo=null,M()},4e3)))}function M(){!po||Bo||"youtube"==so&&"default"==Xa||"vimeo"==so&&"default"==yn||(Fe.removeClass("wpsvp-interface-visible"),Ro&&Ve.removeClass("wpsvp-subtitle-bottom"),or.hide(),Xt.removeClass("wpsvp-menu-bottom"),zt.removeClass("wpsvp-menu-bottom"),qt.removeClass("wpsvp-menu-bottom"),aa.css("opacity",0),Ws=!0)}function V(e){vo&&clearTimeout(vo),e&&(_s!=e.clientX&&(I(),document.body.style.cursor="default"),_s=e.clientX),vo=setTimeout(function(){clearTimeout(this),vo=null,po&&(M(),document.body.style.cursor="none")},4e3)}function _(e){if(void 0!==e){if(ho&&1==e||!ho&&0==e)return!1;ho=!e}fo&&O(!1),mo&&W(!1),yr&&(gr.hide().removeClass("wpsvp-menu-bottom").find(".wpsvp-settings-menu").css("display","none"),wr.show()),ho?(nt.hide(),co&&(ws.playMedia(),co=!1)):(po&&(ws.pauseMedia(),co=!0),nt.show()),ho=!ho}function W(e){if(void 0!==e){if(mo&&1==e||!mo&&0==e)return!1;mo=!e}ho&&_(!1),fo&&O(!1),yr&&(gr.hide().removeClass("wpsvp-menu-bottom").find(".wpsvp-settings-menu").css("display","none"),wr.show()),mo?(Pt.hide(),co&&(ws.playMedia(),co=!1)):(po&&(ws.pauseMedia(),co=!0),Pt.show()),mo=!mo}function O(e){if(void 0!==e){if(fo&&1==e||!fo&&0==e)return!1;fo=!e}ho&&_(!1),mo&&W(!1),yr&&(gr.hide().removeClass("wpsvp-menu-bottom").find(".wpsvp-settings-menu").css("display","none"),wr.show()),fo?(lt.hide(),oa.text(oa.attr("data-copy-text")),na.text(na.attr("data-copy-text")),co&&(ws.playMedia(),co=!1)):(po&&(ws.pauseMedia(),co=!0),lt.show()),fo=!fo}function N(t){gs=!0,mt.show(),go?ce():Re.find(".wpsvp-playlist-item, .wpsvp-global-playlist-data").remove();var a,i,n,o=Ea?e(Ea).find(t):e(t);if(0==o.length)return alert("Failed playlist selection! Playlist - "+t+" does not exist. Check activePlaylist option in settings!"),!1;(o.find(".wpsvp-global-playlist-data").length&&((bo=o.find(".wpsvp-global-playlist-data")).find(".wpsvp-ad-section").length&&(jo=bo.find(".wpsvp-ad-section")),bo.find(".wpsvp-annotation-section").length&&(es=bo.find(".wpsvp-annotation-section")),null!=bo.attr("data-upnext-time")&&(Po=parseInt(bo.attr("data-upnext-time"),10)),null!=bo.attr("data-pwd")&&(as=bo.attr("data-pwd")),null!=bo.attr("data-display-poster-on-mobile")&&xa&&(To=!0,Oa=Wa=_a=Va=!1)),Ir=t,e(ws).trigger("playlistStartLoad",{instance:ws,instanceName:Ca}),yo=-1,Os=[],Ns=[],null!=o.attr("data-type")&&"xml"==o.attr("data-type"))?function(t){e.ajax({type:"GET",url:t.path,dataType:"html"}).done(function(t){var a,i,n;e(t).children(".wpsvp-playlist-item").each(function(){a=e(this),i=a.attr("data-type"),RegExp(/^image|^audio|^video|^hls|^dash/).test(i)?Ns.push(a):null!=a.attr("data-noapi")?Ns.push(a):(n=Te(a),Ns.push(n))}),ji=Ns.length,A()}).fail(function(e,t,a){console.log(e,t,a),A()})}(Te(o)):(o.children(".wpsvp-playlist-item").each(function(){i=e(this),n=i.attr("data-type"),RegExp(/^image|^audio|^video|^hls|^dash/).test(n)?Ns.push(i.clone()):null!=i.attr("data-noapi")?Ns.push(i.clone()):(a=Te(i),Ns.push(a))}),ji=Ns.length,A())}function U(a){"youtube"==a?(sn=new WPSVPYoutubeLoader(t),e(sn).on("WPSVPYoutubeLoader.END_LOAD",function(e,t){var a,i=t.data.length;for(a=0;a<i;a++){var n=t.data[a];Os.push(n)}_r=t.nextPageToken,Ii?D():A()}),Wr&&_r&&(sn.setDataFromCache(Te(e(Wr))),Mr=!1)):"vimeo"==a&&(mn=new WPSVPVimeoLoader(t),e(mn).on("WPSVPVimeoLoader.END_LOAD",function(e,t){var a,i=t.data.length;for(a=0;a<i;a++){var n=t.data[a];Os.push(n)}_r=t.nextPageToken,Ii?D():A()}),Wr&&_r&&(mn.setDataFromCache(Te(e(Wr))),Mr=!1))}function A(){if(++yo>ji-1)D();else{var t=Ns[yo],a=t.type;a?RegExp(/^youtube/).test(a)?(Mi="youtube",sn||U("youtube"),sn.setData(t)):RegExp(/^vimeo/).test(a)?(Mi="vimeo",mn||U("vimeo"),mn.setData(t)):RegExp(/^folder/).test(a)?function(t){if("file:"==window.location.protocol)return console.log("Reading files from folders locally is not possible! This requires online server connection."),A(),!1;var a=t.type;if("folder_video"==a)var i=["mp4"];else"folder_audio"==a?(t.id3&&(Ki=Xi=Os.length-1),i=["mp3","wav"]):"folder_image"==a&&(i=["jpg","jpeg","png","gif"]);e.ajax({type:"GET",url:Sa+"includes/folder_parser.php",data:{type:i,dir:t.path,limit:t.limit||100},dataType:"json"}).done(function(i){WPSVPUtils.keysrt(i,"filename");var n,o=i.length;for(n=0;n<o;n++){var s=i[n];if("folder_audio"==a){if(/mp3|wav/.test(s.basename)){var r=e.extend(!0,{},t);r.type="audio",r.origtype="folder_audio";var l=s.fullpath,d={};r.path=[(d.quality="default",d[s.extension]=l,d)],r.share||(r.share=l),r.title||(r.title=s.filename),Os.push(r),Xi++}}else"folder_video"==a?/mp4/.test(s.basename)&&((r=e.extend(!0,{},t)).type="video",r.origtype="folder_video",l=s.fullpath,r.path=[{quality:"default",mp4:l}],r.share||(r.share=l),r.title||(r.title=s.filename),Os.push(r)):"folder_image"==a&&/jpg|jpeg|png|gif/.test(s.basename)&&((r=e.extend(!0,{},t)).type="image",r.origtype="folder_image",l=s.fullpath,r.path=[{quality:"default",image:l}],r.thumb||(r.thumb=l.substr(0,l.lastIndexOf("/")+1)+"thumb/"+s.filename+".jpg"),r.share||(r.share=l),r.title||(r.title=s.filename),Os.push(r))}"folder_audio"==a&&t.id3?function e(){if("undefined"==typeof jsmediatags){var t=document.createElement("script");t.type="text/javascript",t.src=WPSVPUtils.qualifyURL(Sa+"js/scripts/jsmediatags.min.js"),t.onload=t.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||e()},t.onerror=function(){alert("Error loading "+this.src)};var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(t,a)}else{var i=Os[Xi];jsmediatags.read(i.path[0].mp3||i.path[0].wav,{onSuccess:function(t){var a=t.tags;if(t=a.picture,a.artist&&(i.artist=a.artist),a.title&&(i.title=a.title),a.album&&(i.album=a.album),t){a="";var n,o=t.data.length;for(n=0;n<o;n++)a+=String.fromCharCode(t.data[n]);i.thumb="data:"+t.format+";base64,"+window.btoa(a)}--Xi>Ki?e():A()},onError:function(t){console.log("ID3 error: ",t.type,t.info),--Xi>Ki?e():A()}})}}():A()}).fail(function(e,t,a){console.log(e,t,a),A()})}(t):RegExp(/^iframe/).test(a)?(Os.push(t),A()):RegExp(/^image|^audio|^video|^hls|^dash/).test(a)&&(Os.push(t),A()):(Os.push(t),A())}}function D(){var t,a,i=Os.length,n=0;for(t=0;t<i;t++){Vo&&n++;var o=Os[t],s=o.type;if(o instanceof e&&o.hasClass("wpsvp-playlist-item"))s=o;else{o.origclasses||(o.origclasses="wpsvp-playlist-item"),s=e('<div class="'+o.origclasses+'"/>').attr("data-type",s),delete o.origclasses;var r=null;if("youtube"==o.type)o.snippet.thumbnails&&(o.snippet.thumbnails.medium?r=o.snippet.thumbnails.medium.url:o.snippet.thumbnails.high?r=o.snippet.thumbnails.high.url:o.snippet.thumbnails.standard&&(r=o.snippet.thumbnails.standard.url));else if("vimeo"==o.type){var l=o.pictures.sizes,d=l.length;for(a=0;a<d;a++){if(295==l[a].width){r=l[a].link;break}if(640==l[a].width){r=l[a].link;break}}}else r=o.thumb;if(r||(r=o.thumbDefault),r&&(a=e("<div/>").addClass("wpsvp-playlist-thumb").appendTo(s),l=o.alt?o.alt:o.title?o.title.replace(/"/g,"'"):"image",e(new Image).addClass("wpsvp-thumbimg").appendTo(a).attr({src:r,alt:l}),s.attr("data-thumb",r)),o.title||o.description||o.publishedAt)for(r=e('<div class="wpsvp-playlist-info"></div>').appendTo(s),a=pi.length,l=0;l<a;l++)"title"==(d=pi[l])&&o.title?(d=o.title.replace(/"/g,"'"),e('<span class="wpsvp-playlist-title">'+d+"</span>").appendTo(r),s.attr("data-title",d)):"date"==d&&o.publishedAt?(d=(d=new Date(o.publishedAt)).getMonth()+1+"/"+d.getDate()+"/"+d.getFullYear(),e('<span class="wpsvp-playlist-published-date">'+d+"</span>").appendTo(r)):"description"==d&&o.description&&(d=o.description.replace(/"/g,"'"),s.attr("data-description",d),0<di&&(d=d.substr(0,di)+"..."),e('<span class="wpsvp-playlist-description">'+d+"</span>").appendTo(r));if(o.subtitles)for(r=e('<div class="wpsvp-subtitles"></div>').appendTo(s),a=o.subtitles.length,l=0;l<a;l++){var p='<div data-label="'+(d=o.subtitles[l]).label+'" data-src="'+d.src+'"';p=d.default?p+" data-default></div>":p+"></div>",e(p).appendTo(r)}if("iframe"==o.type)s.attr("data-path",o.path);else if("video"==o.type||"audio"==o.type||"image"==o.type){for(a=o.path.length,p="[",l=0;l<a;l++)p+='{"quality": "'+(d=o.path[l]).quality+'", "'+d.ext+'": "'+d.src+'"}',l<a-1&&(p+=",");p+="]",s.attr("data-path",p),o.defaultQuality&&s.attr("data-quality",o.defaultQuality)}o.deeplink&&s.attr("data-deeplink",o.deeplink),o.id&&s.attr("data-path",o.id),o.mp4&&s.attr("data-mp4",o.mp4),o.poster&&s.attr("data-poster",o.poster),o.download&&s.attr("data-download",o.download),o.share&&s.attr("data-share",o.share),o.duration&&s.attr("data-duration",o.duration),o.start&&s.attr("data-start",o.start),o.end&&s.attr("data-end",o.end),o.normalPlayMode&&s.attr("data-normal-play-mode",o.normalPlayMode),o.randomClipTime&&s.attr("data-random-clip-time",o.randomClipTime),o.aspectRatio&&s.attr("data-aspect-ratio",o.aspectRatio),o.playbackRate&&s.attr("data-playback-rate",o.playbackRate),o.quality&&s.attr("data-quality",o.quality),o.origtype&&("folder_audio"==o.origtype||"folder_video"==o.origtype||"folder_image"==o.origtype)&&s.attr("data-path",JSON.stringify(o.path)),o.width&&s.attr("data-width",o.width),o.height&&s.attr("data-height",o.height),o.is360&&s.attr("data-is360","1"),o.customContent&&(s.append(o.customContent),delete o.customContent),o.previewSeek&&s.attr("data-preview-seek",o.previewSeek),o.chapters&&s.attr("data-chapters",o.chapters),o.endLink&&(s.attr("data-end-link",o.endLink),o.endTarget&&s.attr("data-end-target",o.endTarget)),o.user&&o.user.account&&s.attr("data-user-account",o.user.account),o.pwd&&s.attr("data-pwd",o.pwd),o.liveStream&&s.attr("data-live-stream",o.liveStream)}if(Vo){u?u.after(s):Io?s.appendTo(Re):Re.children("div").eq(Mo).before(s);var u=s}else s.appendTo(Re);fi&&(s.on("click",x),!xa)&&s.on("mouseenter",k).on("mouseleave",S)}go="exist",ji=Re.children(".wpsvp-playlist-item").length,console.log("playlistLength = ",ji),"horizontal"==Ci&&Re.width(ji*Ys),Vo?(t=Cr.getCounter(),Cr.setPlaylistItems(ji,!1),Mo<=t&&(Io||Cr.reSetCounter(t+n)),_o&&!xa&&(Va=!0),Wo?(Wo=!1,Cr.setCounter(Mo,!1)):_o&&(tn=!1,Cr.setCounter(Mo,!1))):Cr.setPlaylistItems(ji),e(ws).trigger("playlistEndLoad",{instance:ws,instanceName:Ca,nextPageToken:_r}),F()}function L(){if("scroll"==Si){if("undefined"==typeof mCustomScrollbar){if(window.playlistScrollLoading)return void setInterval(function(){playlistScrollLoading||(clearInterval(this),L())},100);window.playlistScrollLoading=!0;var e=document.createElement("script");e.type="text/javascript",e.src=WPSVPUtils.qualifyURL(Sa+"js/scripts/jquery.mCustomScrollbar.concat.min.js"),e.onload=e.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||(L(),window.playlistScrollLoading=!1)},e.onerror=function(){alert("Error loading "+this.src)};var a=document.getElementsByTagName("script")[0];return void a.parentNode.insertBefore(e,a)}Ee.mCustomScrollbar({axis:"horizontal"==Ci?"x":"y",theme:t.playlistScrollTheme,scrollInertia:0,scrollButtons:{enable:!0},mouseWheel:{normalizeDelta:!0,deltaFactor:50,preventDefault:!0},keyboard:{enable:!1},advanced:{autoExpandHorizontalScroll:!0},callbacks:{onOverflowYNone:function(){Ee.find(".mCSB_container").addClass("wpsvp-mCSB_full")},onOverflowY:function(){Ee.find(".mCSB_container").removeClass("wpsvp-mCSB_full")},onTotalScroll:function(){Vr&&_r&&!gs&&(gs=!0,mt.show(),Ii=!0,Os=[],"youtube"==so?(sn||U("youtube"),sn.resumeLoad(_r)):"vimeo"==so&&(mn||U("vimeo"),mn.resumeLoad(_r)))},alwaysTriggerOffsets:!1}})}else"buttons"==Si?(xa||Ee.on("mousewheel DOMMouseScroll",function(e){if(!vs||gs||!Vs)return!1;if("horizontal"==Ci)var t=Ee.width(),a=Re.width(),i="translateX";else t=Ee.height(),a=Re.height(),i="translateY";if(!(a<t)){if(St.show(),Ct.show(),e.originalEvent.wheelDelta)var n=0<e.originalEvent.wheelDelta?1:-1;else e.originalEvent.detail&&(n=0>e.originalEvent.detail?1:-1);return Zn?e=Zn:(e=Re[0].style.transform.replace(/[^\d.]/g,""),e=parseInt(e)||0),0<(e+=Ms*n)?(e=0,St.hide()):e<=t-a&&(e=t-a,Ct.hide(),Vr&&_r&&!gs&&(gs=!0,mt.show(),Ii=!0,Os=[],"youtube"==so?(sn||U("youtube"),sn.resumeLoad(_r)):"vimeo"==so&&(mn||U("vimeo"),mn.resumeLoad(_r)))),Zn=e,Re.css({"-webkit-transform":i+"("+e+"px)","-ms-transform":i+"("+e+"px)",transform:i+"("+e+"px)"}),!1}}),St.on("click",function(){if(!vs||gs||$n)return!1;if($n=!0,"horizontal"==Ci)var e=Ee.width(),t=Re.width(),a="translateX";else e=Ee.height(),t=Re.height(),a="translateY";if(!(t<e)){if(St.show(),Ct.show(),Zn?t=Zn:(t=Re[0].style.transform.replace(/[^\d.]/g,""),t=parseInt(t)||0),0!=t%Ys){for(var i=-(t%Ys+Ys);i<=e-Ys;)i+=Ys;t+=i}else t+=Ys*Math.floor(e/Ys);0<=t&&(t=0,St.hide()),Zn=t,Re.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){$n=!1}).css({"-webkit-transform":a+"("+t+"px)","-ms-transform":a+"("+t+"px)",transform:a+"("+t+"px)"})}}),Ct.on("click",function(){if(!vs||gs||$n)return!1;if($n=!0,"horizontal"==Ci)var e=Ee.width(),t=Re.width(),a="translateX";else e=Ee.height(),t=Re.height(),a="translateY";if(!(t<e)){if(St.show(),Ct.show(),Zn)var i=Zn;else i=Re[0].style.transform.replace(/[^\d.]/g,""),i=parseInt(i)||0;if(0!=i%Ys){for(var n=i%Ys+Ys;n<=e-Ys;)n+=Ys;i-=n}else i-=Ys*Math.floor(e/Ys);i<=e-t&&(i=e-t,Ct.hide(),Vr&&_r&&!gs&&(gs=!0,mt.show(),Ii=!0,Os=[],"youtube"==so?(sn||U("youtube"),sn.resumeLoad(_r)):"vimeo"==so&&(mn||U("vimeo"),mn.resumeLoad(_r)))),Zn=i,Re.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){$n=!1}).css({"-webkit-transform":a+"("+i+"px)","-ms-transform":a+"("+i+"px)",transform:a+"("+i+"px)"})}}),Qs&&j()):"hover"==Si&&(xa||Ee.on("mousemove",function(e){if(!vs||gs||!Vs)return!1;if("horizontal"==Ci){var t=Ce.width(),a=Re.width();if(a<t)return;var i=parseInt(Ee.css("left"),10)+Ce.offset().left;e=(t-a)/t*(e.pageX-i),Re.css("left",e+"px")}else{if(t=Ce.height(),(a=Re.height())<t)return;i=parseInt(Ee.css("top"),10)+Ce.offset().top,e=(t-a)/t*(e.pageY-i),Re.css("top",e+"px")}return!1}),Qs&&j());Oo=!0}function j(){var e,t,a,i,n,o=!1;Re.off("touchstart.ap touchmove.ap touchend.ap click.ap-touchclick").on("touchstart.ap",function(s){if(!vs||gs)return!1;s=s.originalEvent.touches[0],e=Re.position().left,t=Re.position().top,a=s.pageX,i=s.pageY,n=!1,o=!0}).on("touchmove.ap",function(s){if(o){if(s=s.originalEvent.touches[0],St.show(),Ct.show(),"horizontal"==Ci){var r=e-a+s.pageX,l=Ce.width(),d=Re.width();if(d<l)return;0<r?(r=0,St.hide()):r<=l-d&&(r=l-d,Ct.hide(),Vr&&_r&&!gs&&(gs=!0,mt.show(),Ii=!0,Os=[],"youtube"==so?(sn||U("youtube"),sn.resumeLoad(_r)):"vimeo"==so&&(mn||U("vimeo"),mn.resumeLoad(_r)))),Re.css("left",r+"px")}else{if(r=t-i+s.pageY,l=Ce.height(),(d=Re.height())<l)return;0<r?(r=0,St.hide()):r<=l-d&&(r=l-d,Ct.hide(),Vr&&_r&&!gs&&(gs=!0,mt.show(),Ii=!0,Os=[],"youtube"==so?(sn||U("youtube"),sn.resumeLoad(_r)):"vimeo"==so&&(mn||U("vimeo"),mn.resumeLoad(_r)))),Re.css("top",r+"px")}return n=n||5<Math.abs(a-s.pageX)||5<Math.abs(i-s.pageY),!1}}).on("touchend.ap",function(e){o=!1}).on("click.ap-touchclick",function(e){if(n)return n=!1})}function F(){if(mt.hide(),gs=!1,!vs){if(vs=!0,La){var a=document.createElement("script");a.type="text/javascript",a.src=WPSVPUtils.qualifyURL(Sa+"js/scripts/jquery-ui.min.js"),a.onload=a.onreadystatechange=function(){if(!this.readyState||"complete"==this.readyState){var e=document.createElement("script");e.type="text/javascript",e.src=WPSVPUtils.qualifyURL(Sa+"js/scripts/jquery.ui.touch-punch.min.js"),e.onload=e.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||Re.sortable()},e.onerror=function(){alert("Error loading "+this.src)};var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}},a.onerror=function(){alert("Error loading "+this.src)};var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(a,i)}fi&&!Oo&&L(),xa||We.on("mouseenter",E).on("mouseleave",R),be(),e(ws).trigger("setupDone",{instance:ws,instanceName:Ca}),ke.css("opacity",1),Ba&&(ao=WPSVPUtils.getElementOffsetTop(ke[0]),bs.on(xs,function(){io||(io=!0,H(),setTimeout(function(){io=!1},100))}))}if(ka&&Ti&&!Mr&&xe(),fi){Ri&&(q(),Ao=No,Re.find(".wpsvp-playlist-item").each(function(){if(0<Uo){var t=100/No;e(this).css({marginLeft:0,marginTop:0,marginRight:Uo+"px",marginBottom:Uo+"px",width:"calc("+t+"% - "+Uo+"px)"})}else e(this).css({marginLeft:0,marginTop:0,marginRight:Uo+"px",marginBottom:Uo+"px",width:100/No+"%"})}));var n=[];Re.find(".wpsvp-thumbimg:not(.wpsvp-visible)").each(function(){n.push(e(this))});var o=0;for(a=n.length,i=0;i<a;i++)setTimeout(function(){clearTimeout(this),n[o].addClass("wpsvp-visible"),o++},50+50*i);t.truncatePlaylistDescription&&(void 0!==e.fn.dotdotdot?Re.find(".wpsvp-playlist-info:not(.is-truncated)").each(function(){e(this).dotdotdot({watch:t.truncateWatch})}):((a=document.createElement("script")).type="text/javascript",a.src=WPSVPUtils.qualifyURL(Sa+"js/scripts/jquery.dotdotdot.min.js"),a.onload=a.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||Re.find(".wpsvp-playlist-info:not(.is-truncated)").each(function(){e(this).dotdotdot({watch:t.truncateWatch})})},a.onerror=function(){alert("Error loading "+this.src)},(i=document.getElementsByTagName("script")[0]).parentNode.insertBefore(a,i)))}!wo&&!Vo&&0<ji&&((a=t.activeItem)>ji-1&&(a=ji-1),-1<a&&Cr.setCounter(a,!1),wo=!0),Vo=!1,Ii&&(Ii=!1,"buttons"==Si&&Ct.show())}function q(){var e,t=ke.width(),a=Ja.length;for(e=0;e<a;e++){var i=Ja[e];t>i.width&&(No=i.column,Uo=i.gutter)}Ee.css({paddingTop:Uo+"px",paddingLeft:Uo+"px"})}function B(){WPSVPUtils.isScrolledIntoView(ke[0])?(Va=to=!0,ws.playMedia()):eo=setInterval(function(){WPSVPUtils.isScrolledIntoView(ke[0])&&(clearInterval(eo),eo=null,Va=to=!0,ws.playMedia())},400)}function H(){WPSVPUtils.getScrollTop()>ao?ke.hasClass(Ha)||ke.addClass(Ha):ke.hasClass(Ha)&&ke.removeClass(Ha),be()}function z(a){if(no=a,so&&!tn)if(no){if(Un=!1,Ni&&cancelAnimationFrame(Ni),Oi&&clearInterval(Oi),oo=null,Dn&&(Dn.removeEventListener("change",re),Dn.reset()),"audio"==so)Zi&&(oo=Zi.currentTime,Zi.pause(),Zi.src=""),$i&&$i.off("ended pause play ratechange loadedmetadata error");else if("video"==so){if(Is&&"video_360"==ro&&_n&&_n.hide(),an){oo=an.currentTime,an.pause();try{an.currentTime=0}catch(e){}an.src="",an=null}nn&&nn.off("ended loadedmetadata ratechange waiting playing play pause error seeked")}else"image"==so&&("image_360"==ro?(Yn&&Yn.hide(),zn=!1):(Ue.hide().find(".wpsvp-media").remove(),jn=null));vt.hide(),_i=po=!1}else pe();if(!no&&!tn){if(Ui=Ai||(Di||Te(Li)),Ai=null,qo?Lo&&(Ho?(Ui=Te(Ho),Bo=!0):zo&&Yo&&(Ui=Te(zo),Bo=!0,zo=null)):(qo=!0,jo?Lo=jo:Ui.adSection&&(Lo=Ui.adSection),Lo&&(Di=Ui,Lo.find(".wpsvp-ad").each(function(){var t=e(this);if(t.hasClass("wpsvp-ad-pre"))Bo=!0,Ui=Te(t);else if(t.hasClass("wpsvp-ad-mid")){var a=parseInt(t.attr("data-begin"),10);Fs.push({begin:a,data:t})}else t.hasClass("wpsvp-ad-end")&&(zo=t)}))),"youtube_single"==Ui.type?Ui.type="youtube":"vimeo_single"==Ui.type&&(Ui.type="vimeo"),"video_360"==(so=Ui.type)?(so="video",ro="video_360"):"image_360"==so&&(so="image",ro="image_360"),Pa=null!=Ui.aspectRatio?Ui.aspectRatio:t.aspectRatio,Ui.subtitles&&v(),!$o&&!Bo&&($o=!0,es?Zo=es:Ui.annotationSection&&(Zo=Ui.annotationSection),Zo)){var i=0;if(Zo.find(".wpsvp-annotation").each(function(){var t=e(this).clone().attr("data-id",i++).appendTo(_e);t.hasClass("wpsvp-adsense-detail")?(e('<ins class="adsbygoogle" style="display:inline-block;width:'+t.attr("data-width")+"px;height:"+t.attr("data-height")+'px" data-ad-client="'+t.attr("data-ad-client")+'" data-ad-slot="'+t.attr("data-ad-slot")+'"></ins>').prependTo(t),ts=!0):t.hasClass("wpsvp-adsense-code")&&(ts=!0),qs.push({start:isNaN(parseInt(t.attr("data-show"),10))?0:parseInt(t.attr("data-show"),10),end:isNaN(parseInt(t.attr("data-hide"),10))?1e5:parseInt(t.attr("data-hide"),10),item:t})}),_e.show(),ts)if("undefined"==typeof adsbygoogle){if("file:"!=window.location.protocol){var n=document.createElement("script");n.type="text/javascript",n.src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",n.onload=n.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||_e.find(".adsbygoogle").each(function(){(adsbygoogle=window.adsbygoogle||[]).push({})})},n.onerror=function(){alert("Error loading "+this.src)},(a=document.getElementsByTagName("script")[0]).parentNode.insertBefore(n,a)}}else _e.find(".adsbygoogle").each(function(){(adsbygoogle=window.adsbygoogle||[]).push({})})}var o,s;if(Ui.chapters&&(Ls=[],e.ajax({url:Ui.chapters}).done(function(e){e=e.replace(/\r\n|\r|\n/g,"\n"),e=(e=WPSVPUtils.strip(e)).split("\n\n");var t,a,i=0;for(t in e){var n=e[t].split("\n");if("WEBVTT"!=n){if(2<=n.length)if(2<n.length){var o=WPSVPUtils.strip(n[1].split(" --\x3e ")[0]),s=WPSVPUtils.strip(n[1].split(" --\x3e ")[1]),r=n[2];if(2<n.length)for(a=3;a<n.length;a++)r+="\n"+n[a]}else o=WPSVPUtils.strip(n[0].split(" --\x3e ")[0]),s=WPSVPUtils.strip(n[0].split(" --\x3e ")[1]),r=n[1];Ls[i]={},Ls[i].start=WPSVPUtils.toSeconds(o),Ls[i].end=WPSVPUtils.toSeconds(s),Ls[i].text=r,i++}}}).fail(function(e,t,a){console.log("Error loading chapters: ",e.responseText,t,a)}),Xe.addClass("wpsvp-seekbar-chapters"),aa.css("display","block")),!xa&&Ui.previewSeek&&(ks=[],e.ajax({url:Ui.previewSeek}).done(function(e){e=e.replace(/\r\n|\r|\n/g,"\n"),e=(e=WPSVPUtils.strip(e)).split("\n\n");var t,a=0;for(t in e){var i=e[t].split("\n");if("WEBVTT"!=i){if(2<=i.length){var n=WPSVPUtils.strip(i[0].split(" --\x3e ")[0]),o=WPSVPUtils.strip(i[0].split(" --\x3e ")[1]);i=i[1],ks[a]={},ks[a].start=WPSVPUtils.toSeconds(n),ks[a].end=WPSVPUtils.toSeconds(o),ks[a].url=i}a++}}}).fail(function(e,t,a){console.log(e,t,a)})),Po&&(0==(a=Li.next()).length&&t.loopingOn&&(a=Re.find(".wpsvp-playlist-item").eq(0)),a.length))null!=a.attr("data-thumb")?o=a.attr("data-thumb"):a.find(".wpsvp-thumbimg").length&&(o=a.find(".wpsvp-thumbimg").attr("src")),null!=a.attr("data-title")?s=a.attr("data-title"):a.find(".wpsvp-playlist-title").length&&(s=a.find(".wpsvp-playlist-title").html()),(o||s)&&(o&&Ut.css("background-image","url("+o+")"),s&&At.html(s),Nt.addClass("wpsvp-upnext-on"));if("lightbox"==mi&&(Rt.css("display","block"),"normal"==$s&&(o=Vt.width()/Fa,Vt.height(o)),1!=Rt.css("opacity")&&setTimeout(function(){clearTimeout(this),Rt.css("opacity",1)},50)),"audio"==so)if(Ui.poster&&!tn){if(tn=!0,e(new Image).addClass("wpsvp-media").appendTo(Ne.show()).on("load",function(){en=e(this),WPSVPAspectRatio.resizeMedia("image",Pa,We,en),en.addClass("wpsvp-visible")}).on("error",function(e){console.log(e)}).attr("src",Ui.poster),To)return;if(!Va)return void vt.show()}else Ne.show();else if(!("video"!=so&&"youtube"!=so&&"vimeo"!=so||Wa&&!to||Va||!Ui.poster||tn)){var r;return tn=!0,"video"==so?r=Oe:"youtube"==so?r=Ae:"vimeo"==so&&(r="default"==Ka?De:Le),e(new Image).addClass("wpsvp-media").appendTo(r.show()).on("load",function(){en=e(this),WPSVPAspectRatio.resizeMedia("image",Pa,We,en),en.addClass("wpsvp-visible"),To||vt.show()}).on("error",function(e){console.log(e)}).attr("src",Ui.poster),void(Bo||Ui.pwd&&pt.show())}}if(tn&&(oo=Ui.start||0,tn=!1),Fo&&!Bo&&(oo=Fo,Fo=null),t.playbackPositionTime&&(oo=t.playbackPositionTime,delete t.playbackPositionTime),"audio"==so||"video"==so||"image"==so){if(function(){var e=Ui.path.length;Ui.quality||(Ui.quality=Ui.path[0].quality);var t=0;e:for(;t<e;t++){var a=Ui.path[t];for(var i in a)if(a[i]==Ui.quality){"audio"==so?cs&&a.wav?lo=a.wav:cs&&"wav"==a.ext?lo=a.src:us&&a.mp3?lo=a.mp3:us&&"mp3"==a.ext&&(lo=a.src):"video"==so?ps&&a.mp4?lo=a.mp4:ps&&"mp4"==a.ext&&(lo=a.src):"image"==so&&(a.image?lo=a.image:a.src&&(lo=a.src));break e}}-1!=lo.indexOf("ebsfm:")&&(lo=atob(lo.substr(6)))}(),no||(r=function(){var e=[],t=Ui.path.length;for(br=0;br<t;br++){var a=Ui.path[br];e.push(a.quality)}return e}(),Aa&&1==r.length||c(r,Ui.quality)),("video_360"==ro||"image_360"==ro)&&"undefined"==typeof THREE)return(n=document.createElement("script")).type="text/javascript",n.src=WPSVPUtils.qualifyURL(Sa+"js/scripts/three.min.js"),n.onload=n.onreadystatechange=function(){if(!this.readyState||"complete"==this.readyState){var e=document.createElement("script");e.type="text/javascript",e.src=WPSVPUtils.qualifyURL(Sa+"js/scripts/orbitControls.min.js"),e.onload=n.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||Y()},e.onerror=function(){alert("Error loading "+this.src)};var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}},n.onerror=function(){alert("Error loading "+this.src)},void(a=document.getElementsByTagName("script")[0]).parentNode.insertBefore(n,a)}else if("hls"==so){if(lo=Ui.path,so="video",ro="hls",!zi)return void("undefined"==typeof Hls?(n=document.createElement("script"),n.type="text/javascript",n.src="https://cdn.jsdelivr.net/npm/hls.js@latest",n.onload=n.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||(le(),Y())},n.onerror=function(){alert("Error loading "+this.src)},a=document.getElementsByTagName("script")[0],a.parentNode.insertBefore(n,a)):(le(),Y()))}else if("dash"==so&&(lo=Ui.path,so="video",ro="dash",!Qi))return void("undefined"==typeof dashjs?(n=document.createElement("script"),n.type="text/javascript",n.src="https://cdn.dashjs.org/latest/dash.all.min.js",n.onload=n.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||(de(),Y())},n.onerror=function(){alert("Error loading "+this.src)},a=document.getElementsByTagName("script")[0],a.parentNode.insertBefore(n,a)):(de(),Y()));Y()}function Y(a){if(!Bo&&Ui.pwd)pt.show();else{if(a&&(Oa&&(Va=!0),_a&&(Va=!0)),"audio"==so)Ji||($i=e(document.createElement("audio")).attr("preload",ja),Zi=$i[0],Ji=!0),Zi.src=lo,$i.on("ended",function(){ye()}).on("loadedmetadata",function(){if(0==playingMode&&clearInterval(myVar),1==Ui.normalPlayMode?playingMode=2:null!=Ui.randomClipTime?(Ui.start=Math.random()*Zi.duration,Ui.end=Ui.randomClipTime+Ui.start,playingMode=1):null==Ui.randomClipTime&&(playingMode=0),Zi.playbackRate?Zi.playbackRate=Number(Zi.playbackRate):u(1),is)var e=setInterval(function(){3<=Zi.readyState&&(clearInterval(e),null!=oo?Zi.currentTime=oo:null!=Ui.start&&(Zi.currentTime=Ui.start))},100);else null!=oo?Zi.currentTime=oo:null!=Ui.start&&(Zi.currentTime=Ui.start);if(null!=oo){var t=Zi.play();void 0!==t&&t.then(function(e){}).catch(function(e){vt.show()})}else Va?void 0!==(t=Zi.play())&&t.then(function(e){}).catch(function(e){vt.show()}):vt.show();oo=null,Wa&&!to&&B()}).on("play",function(){1==playingMode?null!=an?an.playbackRate=1:null!=Zi&&(Zi.playbackRate=1):0==playingMode&&(console.log("before"),myVar=setInterval(function(){i++,0==partFirstRandomTime&&0==partSecondRandomTime&&(randomVal=10*Math.random(),partFlag=randomVal>4?1:randomVal<=2?2:3,partFirstRandomTime=20*Math.random()+10),partFirstRandomTime>0&&(0==measureTime&&(null!=an?(an.playbackRate=1,an.volume=.5):null!=Zi&&(Zi.playbackRate=1,Zi.volume=.5)),measureTime<partFirstRandomTime?measureTime++:(partSecondRandomTime=1==partFlag?5*Math.random()+2:2==partFlag?20*Math.random()+10:18*Math.random()+2,partFirstRandomTime=0,measureTime=0)),partSecondRandomTime>0&&(0==measureTime&&(1==partFlag?null!=an?(an.playbackRate=2*Math.random()+2,an.volume=0):null!=Zi&&(Zi.playbackRate=2*Math.random()*2,Zi.volume=0):2==partFlag?null!=an?(an.playbackRate=1/(2*Math.floor(4*Math.random()+1)),an.volume=0):null!=Zi&&(Zi.playbackRate=1/(2*Math.floor(4*Math.random()+1)),Zi.volume=0):3==partFlag&&(null!=an?(an.playbackRate=0,an.volume=0):null!=Zi&&(Zi.playbackRate=1,Zi.volume=0))),measureTime<partSecondRandomTime?measureTime++:(partSecondRandomTime=0,measureTime=0))},100)),me()}).on("pause",function(){ve()}).on("ratechange",function(){u(Zi.playbackRate)}).on("error",function(t){e(ws).trigger("mediaError",{instance:ws,instanceName:Ca,counter:Wi})}),Va&&Zi.load();else if("video"==so){if(Ui.posterFrameTime&&(lo+="#t="+Ui.posterFrameTime),on)Oe.show(),nn=Oe.find(".wpsvp-media"),an=nn[0];else{var n=" playsinline";si&&(n=""),a='<video class="wpsvp-media" preload="'+ja+'"'+n+">",a+='<source src="'+lo+'" />',a+="</video>",Oe.show().html(a),nn=Oe.find(".wpsvp-media"),an=nn[0],Na&&l(0)}if(Is&&"video_360"==ro&&("file:"==window.location.protocol&&console.log("Playing 360 video and images requires online server connection!"),!Vn)){(Wn=new THREE.WebGLRenderer({antialias:!0})).setSize(640,360),Wn.domElement.className+="wpsvp-canvas-video",Se.prepend(e(Wn.domElement)),_n=Se.find(".wpsvp-canvas-video"),(On=new THREE.Texture(an)).minFilter=THREE.LinearFilter,On.magFilter=THREE.LinearFilter,On.format=THREE.RGBFormat,Nn=new THREE.Scene,(a=new THREE.SphereGeometry(500,60,40)).scale(-1,1,1);var o=new THREE.MeshBasicMaterial({map:On});a=new THREE.Mesh(a,o),Nn.add(a),Vn=!0}if(nn.on("ended",function(){ye()}).on("loadedmetadata",function(){if(WPSVPAspectRatio.resizeMedia("video",Pa,We,nn),nn.addClass("wpsvp-visible"),0==playingMode&&clearInterval(myVar),1==Ui.normalPlayMode?playingMode=2:null!=Ui.randomClipTime?(Ui.start=Math.random()*an.duration,Ui.end=Ui.randomClipTime+Ui.start,playingMode=1):null==Ui.randomClipTime&&(playingMode=0),is)var e=setInterval(function(){3<=an.readyState&&(clearInterval(e),null!=oo?an.currentTime=oo:null!=Ui.start&&(an.currentTime=Ui.start))},100);else null!=oo?an.currentTime=oo:null!=Ui.start&&(an.currentTime=Ui.start);if(null!=oo){var t=an.play();void 0!==t&&t.then(function(e){}).catch(function(e){vt.show()})}else Va?void 0!==(t=an.play())&&t.then(function(e){}).catch(function(e){vt.show()}):vt.show();oo=null,nn.find("source").remove(),Wa&&!to&&B()}).on("waiting",function(){xa&&"hls"==ro||xa&&"dash"==ro||ft.show()}).on("playing",function(){ft.hide()}).on("play",function(){1==playingMode?null!=an?an.playbackRate=1:null!=Zi&&(Zi.playbackRate=1):0==playingMode&&(console.log("after"),myVar=setInterval(function(){i++,0==partFirstRandomTime&&0==partSecondRandomTime&&(randomVal=10*Math.random(),partFlag=randomVal>4?1:randomVal<=2?2:3,partFirstRandomTime=20*Math.random()+10),partFirstRandomTime>0&&(0==measureTime&&(null!=an?(an.playbackRate=1,an.volume=.5):null!=Zi&&(Zi.playbackRate=1,Zi.volume=.5)),measureTime<partFirstRandomTime?measureTime++:(partSecondRandomTime=1==partFlag?5*Math.random()+2:2==partFlag?20*Math.random()+10:18*Math.random()+2,partFirstRandomTime=0,measureTime=0)),partSecondRandomTime>0&&(0==measureTime&&(1==partFlag?null!=an?(an.playbackRate=2*Math.random()+2,an.volume=0):null!=Zi&&(Zi.playbackRate=2*Math.random()*2,Zi.volume=0):2==partFlag?null!=an?(an.playbackRate=1/(2*Math.floor(4*Math.random()+1)),an.volume=0):null!=Zi&&(Zi.playbackRate=1/(2*Math.floor(4*Math.random()+1)),Zi.volume=0):3==partFlag&&(null!=an?(an.playbackRate=0,an.volume=0):null!=Zi&&(Zi.playbackRate=1,Zi.volume=0))),measureTime<partSecondRandomTime?measureTime++:(partSecondRandomTime=0,measureTime=0))},100)),me()}).on("pause",function(){ve()}).on("seeking",function(){Un=!1}).on("seeked",function(){ft.hide(),Is&&"video_360"==ro&&(Un=!0,Ni=requestAnimationFrame(ge))}).on("ratechange",function(){u(an.playbackRate)}).on("error",function(e){switch(e.target.error.code){case e.target.error.MEDIA_ERR_ABORTED:console.log("You aborted the video playback.");break;case e.target.error.MEDIA_ERR_NETWORK:console.log("A network error caused the video download to fail part-way.");break;case e.target.error.MEDIA_ERR_DECODE:console.log("The video playback was aborted due to a corruption problem or because the video used features your browser did not support.");break;case e.target.error.MEDIA_ERR_SRC_NOT_SUPPORTED:console.log("The video could not be loaded, either because the server or network failed or because the format is not supported.");break;default:console.log("An unknown error occurred.")}}),"hls"==ro)if(Bi)qi.attachMedia(an);else if(an.canPlayType("application/vnd.apple.mpegurl"))an.src=lo;else if(Ui.mp4)an.src=Ui.mp4,an.load();else try{an.src=lo,an.load()}catch(e){alert("This browser or device does not support HLS extension. Please use mp4 video for playback!")}else"dash"==ro?Ss?Gi?Yi.attachSource(lo):(Yi.initialize(an,lo,Va),Gi=!0):Ui.mp4?(an.src=Ui.mp4,an.load()):alert("This browser or device does not support MPEG-DASH extension. Please use mp4 video for playback!"):(an.src=lo,an.load());os&&!on&&(void 0!==(a=an.play())&&a.then(function(e){}).catch(function(e){vt.show()})),on=!0}else if("image"==so)"image_360"==ro?("file:"==window.location.protocol&&console.log("Playing 360 video and images requires online server connection!"),Hn||(Xn=new THREE.Scene,(a=new THREE.SphereBufferGeometry(500,60,40)).scale(-1,1,1),Qn=new THREE.TextureLoader,Gn=new THREE.MeshBasicMaterial({map:Qn}),Jn=new THREE.Mesh(a,Gn),Xn.add(Jn),(Kn=new THREE.WebGLRenderer).setPixelRatio(window.devicePixelRatio),Kn.setSize(640,360),Kn.domElement.className+="wpsvp-canvas-image",Se.prepend(e(Kn.domElement)),Yn=Se.find(".wpsvp-canvas-image"),Ln||(Ln=!0,(An=new THREE.PerspectiveCamera(90,640/360,.1,1e4)).position.x+=.1,(Dn=new THREE.OrbitControls(An,Se[0])).enableZoom=!1),Hn=!0),Qn.load(lo,function(e){Yn.show(),Gn.map=e,e=Se.width();var t=Se.height();Kn.setSize(e,t),An.aspect=e/t,An.updateProjectionMatrix(),Dn.addEventListener("change",re),Kn.render(Xn,An),po=_i=!0,Et.show(),zn=Mn=!0,Ui.duration&&(Bn&&clearTimeout(Bn),Bn=setTimeout(function(){clearTimeout(this),ye()},1e3*Ui.duration))},function(e){},function(e){})):(ft.show(),e(new Image).addClass("wpsvp-media").prependTo(Ue.show()).on("load",function(){ft.hide(),jn=e(this),WPSVPAspectRatio.resizeMedia("image",Pa,We,jn),jn.addClass("wpsvp-visible"),po=_i=!0,Ui.duration&&(Fn=(new Date).getTime(),qn=1e3*Ui.duration,Bn&&clearTimeout(Bn),Bn=setTimeout(function(){clearTimeout(this),ye()},1e3*Ui.duration))}).on("error",function(e){console.log(e)}).attr("src",lo)),Bo?Ui.duration&&(ra.show(),js=la.width(),Oi&&clearInterval(Oi),Oi=setInterval(we,250)):Fe.show();else if("youtube"==so){if(dn)pn&&(a=0,null!=oo?a=oo:null!=Ui.start&&(a=Ui.start),Va?ln.loadVideoById({videoId:Ui.path,startSeconds:a,endSeconds:Ui.end,suggestedQuality:Ui.quality}):ln.cueVideoById({videoId:Ui.path,startSeconds:a,endSeconds:Ui.end,suggestedQuality:Ui.quality}));else{a=(a=window.location.href.split("/"))[0]+"//"+a[2];var s=t.youtubeNoCookie?"//www.youtube-nocookie.com/embed/":"//www.youtube.com/embed/";n="1",si&&(n="0");var r="ytplayer"+Math.floor(16777215*Math.random()),d="https:"==window.location.protocol?"https:":"http:",p="&controls=0",c="&color="+t.youtubePlayerColor,h="&showinfo=0",f="&modestbranding=1";o="&origin="+a,"chromeless"!=Xa&&(p="&controls=1",h="&showinfo=1",f="&modestbranding=1"),n=d+s+Ui.path+"?enablejsapi=1"+p+"&rel=0"+h+"&playsinline="+n+f+"&wmode=transparent&iv_load_policy=3&cc_load_policy=0"+c,/^http/.test(a)&&(n+=o),null!=oo?n+="&start="+oo:Ui.start&&(n+="&start="+Ui.start),Ui.end&&(n+="&end="+Ui.end),rn=e("<iframe/>",{id:r,frameborder:0,src:n,width:"100%",height:"100%",webkitAllowFullScreen:!0,mozallowfullscreen:!0,allowFullScreen:!0,allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"}),"chromeless"==Xa&&bi&&rn.addClass("wpsvp-yt-clean"),Ae.show().prepend(rn),window.YT||((a=document.createElement("script")).src="https://www.youtube.com/iframe_api",(o=document.getElementsByTagName("script")[0]).parentNode.insertBefore(a,o));var m=setInterval(function(){window.YT&&window.YT.Player&&(m&&clearInterval(m),ln=new YT.Player(r,{events:{onReady:Q,onPlaybackQualityChange:G,onPlaybackRateChange:X,onStateChange:K,onError:J}}))},100);dn=!0}Ae.show(),"chromeless"==Xa&&Ui.width&&Ui.height&&(rn.sw=Ui.width,rn.sh=Ui.height,WPSVPAspectRatio.resizeMedia("iframe",Pa,Ae,rn))}else"vimeo"==so?("file:"==window.location.protocol&&console.log("Playing Vimeo requires online server connection!"),"default"==(yn="chromeless"==Ka&&Ui.userAccount?"basic"==Ui.userAccount?"default":"chromeless":"default")?Tn?(wn=De,vn=kn,gn=bn,Cn&&(wn.show(),gn.loadVideo(Ui.path),setTimeout(function(){clearTimeout(this),ae()},500))):(kn=$("0"),De.show().append(kn),wn=De,vn=kn,window.Vimeo||((a=document.createElement("script")).src="//player.vimeo.com/api/player.js",(o=document.getElementsByTagName("script")[0]).parentNode.insertBefore(a,o)),m=setInterval(function(){window.Vimeo&&(m&&clearInterval(m),(gn=bn=new Vimeo.Player(kn[0])).on("loaded",ae),gn.on("play",Z),gn.on("pause",ee),gn.on("ended",ne),gn.on("error",se),"chromeless"==yn&&(gn.on("playbackratechange",te),gn.on("timeupdate",ie)),Cn=!0)},100),Tn=!0):(xn?(wn=Le,vn=Sn,gn=Pn,En&&(wn.show(),gn.loadVideo(Ui.path),setTimeout(function(){clearTimeout(this),ae()},500))):(Sn=$("1"),Le.show().append(Sn),wn=Le,vn=Sn,window.Vimeo||((a=document.createElement("script")).src="//player.vimeo.com/api/player.js",(o=document.getElementsByTagName("script")[0]).parentNode.insertBefore(a,o)),m=setInterval(function(){window.Vimeo&&(m&&clearInterval(m),(gn=Pn=new Vimeo.Player(Sn[0])).on("loaded",ae),gn.on("play",Z),gn.on("pause",ee),gn.on("ended",ne),gn.on("error",se),gn.on("seeked",oe),"chromeless"==yn&&(gn.on("playbackratechange",te),gn.on("timeupdate",ie)),En=!0)},100),xn=!0),Ui.width&&Ui.height&&(vn.sw=Ui.width,vn.sh=Ui.height,WPSVPAspectRatio.resizeMedia("iframe",Pa,wn,vn)))):"iframe"==so&&e('<iframe src="'+Ui.path+'" style="border: 0px none transparent; width:100%; height:100%;" webkitAllowFullScreen mozallowfullscreen allowFullScreen allow="autoplay"></iframe>').appendTo(je.show());no||("video"==so&&(ms||an.webkitSupportsPresentationMode&&"function"==typeof an.webkitSetPresentationMode)&&ia.show(),"audio"==so||"video"==so||"youtube"==so&&"chromeless"==Xa||"vimeo"==so&&"chromeless"==yn?(Ui.liveStream?(Be.hide(),He.hide(),ze.hide(),Xe.hide(),Tt.hide(),xt.hide(),kt.hide()):(Be.show(),He.show(),ze.show(),Xe.show(),Tt.show(),xt.show(),kt.show()),qe.show(),Ft.show(),Ze.show()):(qe.hide(),Ft.hide(),Ze.hide(),Be.hide(),He.hide(),ze.hide(),Xe.hide(),Tt.hide(),xt.hide(),kt.hide()),(a=Ui.title||Ui.domTitle)&&(st.html(a),sa.html(a)),Ui.description?(rt.html(Ui.description),ot.show()):ot.hide(),rs&&Ui.download?yt.show().find("a").attr("href",Ui.download).attr("download",""):yt.hide()),("iframe"==so||"youtube"==so&&"default"==Xa||"vimeo"==so&&"default"==yn)&&Fe.hide(),Bo?e(ws).trigger("adRequest",{instance:ws,instanceName:Ca,adId:Ui.adId}):e(ws).trigger("mediaRequest",{instance:ws,instanceName:Ca,counter:Wi})}}function Q(e){pn=!0,Na&&(Va=!0,l(0)),Va?!hs&&!fs||ya||Na?ln.playVideo():"wall"==Ei&&ln.playVideo():null!=oo&&Ui.poster&&ln.playVideo(),Wa&&!to&&B()}function G(e){f(e.data)}function X(e){u(e.data)}function K(t){Ae.is(":visible")&&-1!=t.data&&(0==t.data?cn||(cn=!0,ye()):1==t.data?(un||(cn=!1,ya=!0,oo=null,Ui.quality&&ln.setPlaybackQuality(Ui.quality),t=ln.getAvailableQualityLevels(),Aa&&1==t.length||"chromeless"==Xa&&c(t,ln.getPlaybackQuality()),Ui.playbackRate&&1!=Ui.playbackRate?ln.setPlaybackRate(Number(Ui.playbackRate)):"chromeless"==Xa&&u(1),Ga&&(hn||(hn=e('<div class="wpsvp-iframe-blocker"></div>').css("display","block").on("click",function(){if(Bo)1==(e=ln.getPlayerState())?ln.pauseVideo():2==e?ln.playVideo():(-1==e||5==e||0==e)&&ln.playVideo();else if(un&&Ws)I();else{var e=ln.getPlayerState();1==e?ln.pauseVideo():2==e?ln.playVideo():(-1==e||5==e||0==e)&&ln.playVideo()}}).appendTo(Ae)),Ui.is360?hn.css("display","none"):hn.css("display","block")),un=!0),"default"==Xa?po=!0:me()):2==t.data?"default"==Xa?po=!1:ve():3!=t.data&&5==t.data&&(null!=oo&&Ui.poster?ln.playVideo():Va&&"outer"==Ei&&ln.playVideo()))}function J(e){switch(e.data){case 2:console.log("Error code = "+e.data+": The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.");break;case 100:console.log("Error code = "+e.data+": Video not found, removed, or marked as private");break;case 101:console.log("Error code = "+e.data+": Embedding disabled for this video");break;case 150:console.log("Error code = "+e.data+": Video not found, removed, or marked as private [same as error 100]")}}function $(a){var i=WPSVPUtils.rgbToHex(t.vimeoPlayerColor);"#"==i.charAt(0)&&(i=i.substr(1));var n="1";si&&(n="0");var o=Oa?"1":"0",s="player"+Math.floor(16777215*Math.random());i="?color="+i,n="&playsinline="+n;var r="&muted=0";return o="&autoplay="+o,a="&background="+a,Na&&(r="&muted=1",o="&autoplay=1",Va=!0,l(0)),i="https://player.vimeo.com/video/"+Ui.path+i+"&byline=1&portrait=1&title=1&autopause=1"+n+"&loop=0&dnt=1"+a+"&speed=1"+r+o,Ui.quality&&(i+="&quality="+Ui.quality),e("<iframe/>",{id:s,frameborder:0,src:i,width:"100%",height:"100%",webkitAllowFullScreen:!0,mozallowfullscreen:!0,allowFullScreen:!0,allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"})}function Z(){if(!Rn){if(Ui.start||null!=oo){if(null!=oo)var e=oo;else Ui.start&&(e=Ui.start);oo=null,gn.setCurrentTime(e).then(function(e){}).catch(function(e){console.log(e.name)})}Ui.playbackRate&&1!=Ui.playbackRate?gn.setPlaybackRate(Ui.playbackRate).then(function(e){}).catch(function(e){Ft.hide(),console.log(e.name)}):"chromeless"==yn&&Ft.hide(),ba=!0,Oa&&(Va=!0),Rn=!0}"default"==yn?po=!0:me()}function ee(){"default"==yn?po=!1:ve()}function te(e){u(e.playbackRate)}function ae(){"default"!=yn&&(In||(In=e('<div class="wpsvp-iframe-blocker"></div>').css("display","block").on("click",function(){Bo?gn.getPaused().then(function(e){e?gn.play():gn.pause()}):Rn&&Ws?I():gn.getPaused().then(function(e){e?gn.play():gn.pause()})}).appendTo(wn)),Ui.is360?In.css("display","none"):In.css("display","block")),Va?xa?ba?("chromeless"==yn&&vt.show(),gn.play()):ba=!0:((!hs&&!fs||ba)&&gn.play().then(function(){me()}).catch(function(e){}),"chromeless"==yn&&vt.show()):null!=oo&&Ui.poster?gn.play():"chromeless"==yn&&vt.show(),Wa&&!to&&B()}function ie(e){Cs=e.duration,Es=e.seconds,Rs=e.percent}function ne(){gn.off("timeupdate"),gn.off("ended"),ye()}function oe(){ft.hide()}function se(e){console.log("Vimeo Player Error!",e)}function re(){"image_360"==ro&&Kn.render(Xn,An),xa&&Ws&&I(),Mn&&(Mn=!1,setTimeout(function(){clearTimeout(this),Et.hide()},1e3))}function le(){qi=new Hls,Bi=Hls.isSupported(),zi=!0,qi.subtitleDisplay=!1,qi.subtitleTrack=-1,qi.on(Hls.Events.MEDIA_ATTACHED,function(){qi.loadSource(lo)}),qi.on(Hls.Events.MANIFEST_PARSED,function(e,t){if(vi){var a,i=[],n=t.levels.length;for(a=0;a<n;a++){var o=t.levels[a];o.width&&i.push({label:o.width+"x"+o.height+", "+Math.ceil(Math.round(o.bitrate/1e3))+"kbps",value:a.toString()})}i.push({label:"auto",value:"-1",selected:!0}),Aa&&1==i.length||c(i,"-1")}}),qi.on(Hls.Events.MANIFEST_LOADED,function(e,t){}),qi.on(Hls.Events.LEVEL_LOADED,function(e,t){}),qi.on(Hls.Events.AUDIO_TRACKS_UPDATED,function(t,a){if(gi){var i=qi.audioTracks,n=i.length;if(1<n){var o;for(o=0;o<n;o++){var s=i[o],r=s.groupId+" - "+s.name;s=s.id.toString(),e("<li/>").addClass("wpsvp-menu-item").attr({"data-value":s,"data-label":r}).text(r).on("click",m).appendTo($t)}Hi=!0,ea.show(),ta.removeClass("wpsvp-force-hide")}}}),qi.on(Hls.Events.AUDIO_TRACK_SWITCHED,function(e,t){if(Hi){var a=t.id;So&&So.removeClass("wpsvp-menu-active"),So=$t.find(".wpsvp-menu-item[data-value='"+a+"']").addClass("wpsvp-menu-active"),yr&&(gr.find(".wpsvp-audio-language-menu-value").text(So.text()),gr.find(".wpsvp-settings-menu").hide(),wr.show())}}),qi.on(Hls.Events.AUDIO_TRACK_LOADED,function(e,t){}),qi.on(Hls.Events.SUBTITLE_TRACK_SWITCH,function(e,t){var a=qi.subtitleTracks.length;if(0<a&&!Ui.subtitles){var i;for(Ui.subtitles=[],i=0;i<a;i++){var n=qi.subtitleTracks[i],o=i.toString();o={label:n.name,value:o,src:n.url},n.default&&(o.default=!0),Ui.subtitles.push(o)}v()}}),qi.on(Hls.Events.SUBTITLE_TRACK_LOADED,function(e,t){}),qi.on(Hls.Events.ERROR,function(e,t){if(t.fatal)switch(t.type){case Hls.ErrorTypes.NETWORK_ERROR:console.log("fatal network error encountered, try to recover"),qi.startLoad();break;case Hls.ErrorTypes.MEDIA_ERROR:console.log("fatal media error encountered, try to recover"),qi.recoverMediaError();break;default:qi.destroy()}})}function de(){Yi=dashjs.MediaPlayer().create(),Qi=!0,Yi.setFastSwitchEnabled=!0,Yi.on(dashjs.MediaPlayer.events.STREAM_INITIALIZED,function(t){if(vi){var a=Yi.getBitrateInfoListFor("video");console.log(a);var i=[],n=a.length;for(t=0;t<n;t++){var o=a[t];o.width&&i.push({label:o.width+"x"+o.height+", "+Math.ceil(Math.round(o.bitrate/1e3))+"kbps",value:o.qualityIndex.toString()})}i.push({label:"auto",value:"-1",selected:!0}),Aa&&1==i.length||c(i,"-1")}if(gi&&(a=Yi.getBitrateInfoListFor("audio"),console.log(a),1<(n=a.length))){for(t=0;t<n;t++)o=a[t],i=Math.ceil(Math.round(o.bitrate/1e3))+"kbps",o=o.qualityIndex.toString(),e("<li/>").addClass("wpsvp-menu-item").attr({"data-value":o,"data-label":i}).text(i).on("click",m).appendTo($t);Hi=!0,ea.show(),ta.removeClass("wpsvp-force-hide")}}),Yi.on(dashjs.MediaPlayer.events.QUALITY_CHANGE_REQUESTED,function(e){console.log("QUALITY_CHANGE_REQUESTED",e.oldQuality,e.newQuality)}),Yi.on(dashjs.MediaPlayer.events.QUALITY_CHANGE_RENDERED,function(e){console.log("dashjs.MediaPlayer.events.QUALITY_CHANGE_RENDERED",e.newQuality)}),Yi.on(dashjs.MediaPlayer.events.TRACK_CHANGE_RENDERED,function(e){console.log("TRACK_CHANGE_RENDERED",e)}),Yi.on(dashjs.MediaPlayer.events.TEXT_TRACKS_ADDED,function(e){}),Yi.on(dashjs.MediaPlayer.events.ERROR,function(e){console.log("dashjs.MediaPlayer.events.ERROR "+e.error+" : "+e.event.message)}),Yi.on(dashjs.MediaPlayer.events.PLAYBACK_ERROR,function(e){console.log("dashjs.MediaPlayer.events.PLAYBACK_ERROR")})}function pe(){if(Un=!1,Ni&&cancelAnimationFrame(Ni),Oi&&clearInterval(Oi),Bn&&(clearTimeout(Bn),Bn=null),eo&&(clearInterval(eo),eo=null),Et.hide(),Mn=!1,Bi&&"hls"==ro&&qi.detachMedia(),Ss&&"dash"==ro&&Yi.attachSource(null),Dn&&(Dn.removeEventListener("change",re),Dn.reset()),"audio"==so)Zi&&(Zi.pause(),Zi.src=""),$i&&$i.off("ended pause play ratechange loadedmetadata error"),Ne.hide();else if("video"==so){if(Is&&"video_360"==ro&&_n&&_n.hide(),an){an.pause();try{an.currentTime=0}catch(e){}an.src="",an=null}nn&&nn.off("ended loadedmetadata ratechange waiting playing play pause error seeked"),Oe.hide()}else"image"==so?"image_360"==ro?(Yn&&Yn.hide(),zn=!1):(Ue.hide().find(".wpsvp-media").remove(),jn=null):"youtube"==so?ln&&(cn=!0,Ae.hide(),pn&&ln.stopVideo(),un=!1,rn&&(rn.sw=null,rn.sh=null)):"vimeo"==so?(Rs=Es=Cs=0,gn&&(gn.unload().then(function(){}).catch(function(e){console.log(e)}),vn&&(vn.sw=null,vn.sh=null)),Rn=!1,wn&&wn.hide()):"iframe"==so&&je.empty().hide();en&&(en.remove(),en=null),Bo&&(Bo=!1,ca.removeClass("wpsvp-ad-skip-btn-visible"),ra.hide(),va.hide(),Yo=Ho=null,fa.html(ma),Xo=!1),_e.hide().empty(),qs=[],ts=!1,ia.hide(),ke.removeClass("wpsvp-holder-visible"),Xe.hide(),qe.hide(),Ft.hide(),Ze.hide(),gr.hide().removeClass("wpsvp-menu-bottom").find(".wpsvp-settings-menu").css("display","none"),wr.show(),Be.hide(),He.hide(),ze.hide(),Vr=!1,Jo=null,Me.hide(),Ve.empty(),Eo=!1,As=[],Us=[],Co=Ro=null,Kt.empty(),Gt.hide(),Jt.addClass("wpsvp-force-hide"),Ht.hide(),Yt.empty(),Qt.addClass("wpsvp-force-hide"),ea.hide(),$t.empty(),ta.addClass("wpsvp-force-hide"),Hi=!1,Va||Fe.hide(),Fe.removeClass("wpsvp-interface-visible"),Ro&&Ve.removeClass("wpsvp-subtitle-bottom"),or.hide(),Fi=null,ks=[],Ye.hide(),Xt.removeClass("wpsvp-menu-bottom"),zt.removeClass("wpsvp-menu-bottom"),qt.removeClass("wpsvp-menu-bottom"),co=!1,nt.hide(),st.html(""),sa.html(""),rt.html(""),ot.hide(),ho=!1,lt.hide(),oa.text(oa.attr("data-copy-text")),na.text(na.attr("data-copy-text")),Pt.hide(),mo=!1,vt.hide(),Nt.removeClass("wpsvp-upnext-on wpsvp-upnext-visible"),Ut.css("background-image","none"),At.html(""),pt.hide(),ut.val(""),Ui=ro=so=oo=null,tn=_i=po=!1,Ws=!0,da.width(0),pa.width(0),Je.width(0),$e.width(0)}function ue(){vs&&so&&(Li&&C(),pe(),Cr.reSetCounter())}function ce(){so&&pe(),Re.find(".wpsvp-playlist-item").remove(),ji=0,Cr.reSetCounter(),wo=!1,Ir="",go=null,Ii=$n=!1,as=Po=es=jo=bo=null,To=!1}function he(){vs&&0!=ji&&Cr.advanceHandler(1,!0)}function fe(){vs&&0!=ji&&Cr.advanceHandler(-1,!0)}function me(){if(ft.hide(),vt.hide(),qe.find(".wpsvp-btn-play").hide(),qe.find(".wpsvp-btn-pause").show(),"custom"==ci&&(ar.find(".wpsvp-context-playback-play").hide(),ar.find(".wpsvp-context-playback-pause").show()),!_i){if(Oa&&(Va=!0),_a&&(Va=!0),l(),As.length&&Me.show(),Is&&"video_360"==ro){Oe.hide(),_n.show(),Et.show(),Mn=!0,Ln||(Ln=!0,(An=new THREE.PerspectiveCamera(90,640/360,.1,1e4)).position.x+=.1,(Dn=new THREE.OrbitControls(An,Se[0])).enableZoom=!1),Dn.addEventListener("change",re);var t=Se.width(),a=Se.height();Wn.setSize(t,a),An.aspect=t/a,An.updateProjectionMatrix(),Un=!0,Ni&&cancelAnimationFrame(Ni),Ni=requestAnimationFrame(ge)}if(("audio"==so||"video"==so||"youtube"==so&&"chromeless"==Xa||"vimeo"==so&&"chromeless"==yn)&&(Oi&&clearInterval(Oi),Oi=setInterval(we,250)),Bo?e(ws).trigger("adStart",{instance:ws,instanceName:Ca,adId:Ui.adId}):e(ws).trigger("mediaStart",{instance:ws,instanceName:Ca,counter:Wi}),_i=!0,"audio"==so||"video"==so||"youtube"==so&&"chromeless"==Xa||"vimeo"==so&&"chromeless"==yn)if(t=ws.getDuration(),isNaN(t))var i=setTimeout(function(){clearTimeout(i);var e=ws.getDuration();Be.html(WPSVPUtils.formatTime(0)),ze.html(WPSVPUtils.formatTime(e)),Fe.show(),rr=Ke.width(),Bo?Fe.hide():ii&&I(),Do||(Ls.length&&b(e),Do=!0),Ko||(yi&&Fs.length&&P(e),Ko=!0)},500);else Be.html(WPSVPUtils.formatTime(0)),ze.html(WPSVPUtils.formatTime(t)),Fe.show(),rr=Ke.width(),Bo?Fe.hide():ii&&I(),Do||(Ls.length&&b(t),Do=!0),Ko||(yi&&Fs.length&&P(t),Ko=!0);Bo&&(ra.show(),js=la.width())}if(Da&&1<wpsvp_mediaArr.length)for(a=wpsvp_mediaArr.length,t=0;t<a;t++)ws!=wpsvp_mediaArr[t].inst&&wpsvp_mediaArr[t].inst.pauseMedia();Bo?e(ws).trigger("adPlay",{instance:ws,instanceName:Ca,adId:Ui.adId}):e(ws).trigger("mediaPlay",{instance:ws,instanceName:Ca,counter:Wi}),po=!0}function ve(){if(ft.hide(),qe.find(".wpsvp-btn-play").show(),qe.find(".wpsvp-btn-pause").hide(),"custom"==ci&&(ar.find(".wpsvp-context-playback-pause").hide(),ar.find(".wpsvp-context-playback-play").show()),ho||mo||fo||(_i?("audio"==so||"video"==so||"youtube"==so&&"chromeless"==Xa||"vimeo"==so&&"chromeless"==yn)&&vt.show():"audio"!=so&&"video"!=so||vt.show()),Bo?e(ws).trigger("adPause",{instance:ws,instanceName:Ca,adId:Ui.adId}):e(ws).trigger("mediaPause",{instance:ws,instanceName:Ca,counter:Wi}),Bo&&Ui.link){if(!Ui.target||"_blank"!=Ui.target){var t=Ui.link;return ue(),void(window.location=t)}window.open(Ui.link)}po=!1}function ge(){Un&&(nn.readyState===nn.HAVE_ENOUGH_DATA&&(On.needsUpdate=!0),Wn.render(Nn,An),Ni=requestAnimationFrame(ge))}function we(a){if(void 0!==a||po){var i;if("audio"==so){var n=Zi.currentTime,o=Zi.duration;if(void 0!==Zi.buffered&&0!=Zi.buffered.length){try{var s=Zi.buffered.end(Zi.buffered.length-1)}catch(e){}isNaN(s)||(i=s/Math.floor(Zi.duration))}}else if("video"==so){if(n=an.currentTime,o=an.duration,void 0!==an.buffered&&0!=an.buffered.length){try{s=an.buffered.end(an.buffered.length-1)}catch(e){}isNaN(s)||(i=s/Math.floor(an.duration))}}else"youtube"==so?(n=ln.getCurrentTime(),o=ln.getDuration(),i=ln.getVideoLoadedFraction()):"vimeo"==so?(n=Es,o=Cs,i=Rs):"image"==so&&(i=1e3*Ui.duration,n=(new Date).getTime()-Fn,0>(qn-=n)&&(qn=0),Fn=(new Date).getTime(),n=(i-qn)/1e3,o=Ui.duration,i=1);if(WPSVPUtils.isNumber(n)&&WPSVPUtils.isNumber(o)){if(a=parseInt(n,10),Bo){if(a!=Jo&&(ua.html("&nbsp;(-"+WPSVPUtils.formatTime(o-a)+")"),0<a)){var r;if(!Xo&&(Xo=!0,Go=!1,Qo=null,void 0!==Ui.skipEnable))Qo=Ui.skipEnable,Yo?(0==(s=Li.next()).length&&t.loopingOn&&(s=Re.find(".wpsvp-playlist-item").eq(0)),s.length&&(null!=s.attr("data-thumb")?r=s.attr("data-thumb"):s.find(".wpsvp-thumbimg").length&&(r=s.find(".wpsvp-thumbimg").attr("src")))):Di.thumb?r=Di.thumb:Li.find(".wpsvp-thumbimg").length&&(r=Li.find(".wpsvp-thumbimg").attr("src")),r&&e('<img src="'+r+'" alt=""/>').appendTo(wa.empty().show()),ha.show(),ca.addClass("wpsvp-ad-skip-btn-visible");null==Qo||Go||(a<Qo?fa.html(ma+"&nbsp;"+(Qo-a).toString()):(Go=!0,wa.hide(),ha.hide(),va.show()))}i&&da.width(i*js),pa.width(n/o*js)}else{if(a!=Jo){if(Ui.end&&n>=Ui.end)return"loop"!=Ra&&"rewind"!=Ra&&(Oi&&clearInterval(Oi),Un=!1,Ni&&cancelAnimationFrame(Ni)),void ye();if(Fs.length)for(s=Fs.length,r=0;r<s;r++){var l=Fs[r];if(a==l.begin)return Oi&&clearInterval(Oi),Un=!1,Ni&&cancelAnimationFrame(Ni),Ho=l.data,Fo=l.begin+1,ti&&(Fs[r].marker.remove(),Fs.splice(r,1)),void z()}if(qs.length)for(s=qs.length,r=0;r<s;r++){var d=(l=qs[r]).start,p=l.end;l=l.item,a>=d&&a<=p-1?l.wpsvpvisible||(l.hasClass("wpsvp-iframe")&&l.find("iframe").each(function(){e(this).attr("src",e(this).attr("data-src"))}),l.css("display","block"),l.wpsvpvisible=!0):l.wpsvpvisible&&(l.css("display","none"),l.hasClass("wpsvp-iframe")&&l.find("iframe").each(function(){e(this).attr("src","about:blank")}),l.wpsvpvisible=!1)}if(Eo&&As.length)for(s=As.length,r=0;r<s;r++)d=(l=As[r]).start,p=l.end,a>=d&&a<=p?Ro||(Ro=e('<div class="wpsvp-subtitle">'+l.text+"</div>"),Ws||Ve.addClass("wpsvp-subtitle-bottom"),Ro.start=d,Ro.end=p,Ve.append(Ro)):Ro&&(a<Ro.start||a>Ro.end)&&(Ro.remove(),Ro=null);0<o&&Nt.hasClass("wpsvp-upnext-on")&&(a>o-Po?Nt.addClass("wpsvp-upnext-visible"):Nt.removeClass("wpsvp-upnext-visible")),Be.html(WPSVPUtils.formatTime(a)),ze.html(WPSVPUtils.formatTime(o))}i&&1!=i&&Je.width(i*rr),$e.width(n/o*rr)}Jo=a}}}function ye(){if(Bo&&e(ws).trigger("adEnd",{instance:ws,instanceName:Ca,adId:Ui.adId}),void 0!==Ui.endLink){if("_blank"!=Ui.endTarget)return ue(),void(window.location=Ui.endLink);window.open(Ui.endLink)}if(Bo&&!Yo)z();else if(zo)Yo=!0,z();else{e(ws).trigger("mediaEnd",{instance:ws,instanceName:Ca,counter:Wi});var t=Ui.start||0;"next"==Ra?he():"loop"==Ra?"audio"==so?Zi&&(Zi.currentTime=t,Zi.play()):"video"==so?an&&(an.currentTime=t,an.play()):"youtube"==so?ln&&(ln.seekTo(t),ln.playVideo()):"vimeo"==so&&gn&&(gn.pause(),gn.setCurrentTime(t),gn.play()):"rewind"==Ra&&("audio"==so?Zi&&(Zi.currentTime=t,Zi.pause()):"video"==so?an&&(an.currentTime=t,an.pause()):"youtube"==so?ln&&(ln.seekTo(t),ln.pauseVideo()):"vimeo"==so&&gn&&(gn.pause(),gn.setCurrentTime(t)))}}function be(){if("left_bottom"==Ei||"right_bottom"==Ei)if(ke.width()>$a){Ce.removeClass("wpsvp-playlist-holder-bottom").width(Ya);var t=Ua?ke.width()-Ce.width():ke.width();if(We.width(t),"100%"==ki){var a=ke.height();We.height(a),Ce.height(a)}else a="fullscreen"==$s?ke.height():t/Fa,We.height(a),Ce.height(a),ke.height(a)}else Ce.addClass("wpsvp-playlist-holder-bottom"),"100%"==ki?(Ce.css({height:za,width:"100%"}),t=ke.width(),a=Ua?ke.height()-Ce.height():ke.height(),We.css({height:a,width:t})):(a=(t=ke.width())/Fa,We.css({height:a,width:t}),Ce.css({height:za,width:"100%"}),Ua?ke.height(a+Ce.height()):ke.height(a),"fullscreen"==$s&&(Ua?We.height(ke.height()-Ce.height()):We.height(ke.height())));else"left"==Ei||"right"==Ei?(t=Ua?ke.width()-Ce.width():ke.width(),We.width(t),"100%"==ki&&(a=ke.height(),We.height(a))):"bottom"==Ei||"top"==Ei?"100%"==ki?(t=Ua?ke.height()-Ce.height():ke.height(),We.height(t)):(a=(t=ke.width())/Fa,We.height(a),Ua?ke.height(a+Ce.height()):ke.height(a),"fullscreen"==$s&&(Ua?We.height(ke.height()-Ce.height()):We.height(ke.height()))):"lightbox"==mi?"normal"==$s&&(a=(t=Vt.width())/Fa,Vt.height(a)):"outer"==Ei?(a=(t=ke.width())/Fa,We.height(a)):"no-playlist"==Ei&&(a=(t=ke.width())/Fa,We.height(a),ke.height(a),"fullscreen"==$s&&We.height(ke.height()));if(fi&&Ri&&(q(),No!=Ao&&(Ao=No,Re.find(".wpsvp-playlist-item").each(function(){if(0<Uo){var t=100/No;e(this).css({marginLeft:0,marginTop:0,marginRight:Uo+"px",marginBottom:Uo+"px",width:"calc("+t+"% - "+Uo+"px)"})}else e(this).css({marginLeft:0,marginTop:0,marginRight:Uo+"px",marginBottom:Uo+"px",width:100/No+"%"})}))),fi)if("buttons"==Si){if("horizontal"==Ci){t=Ee.width();var i=Re.width();a="translateX"}else t=Ee.height(),i=Re.height(),a="translateY";if(i<t){Vs=!1,St.hide(),Ct.hide();var n=parseInt(t/2-i/2,10)}else Vs=!0,Zn?n=Zn:(n=Re[0].style.transform.replace(/[^\d.]/g,""),n=parseInt(n)||0),0<n?(n=0,Ct.show()):n<t-i&&(n=t-i,St.show());Zn=n,Re.css({"-webkit-transform":a+"("+n+"px)","-ms-transform":a+"("+n+"px)",transform:a+"("+n+"px)"})}else"hover"==Si&&("horizontal"==Ci?(t=Ee.width(),(i=Re.width())<t?(Vs=!1,n=parseInt(t/2-i/2,10)):(Vs=!0,0<(n=parseInt(Re.css("left"),10))?n=0:n<t-i&&(n=t-i)),Re.css("left",n+"px")):(a=Ee.height(),(i=Re.height())<a?(Vs=!1,n=parseInt(a/2-i/2,10)):(Vs=!0,0<(n=parseInt(Re.css("top"),10))?n=0:n<a-i&&(n=a-i)),Re.css("top",n+"px")));if(rr=Ke.width(),js=la.width(),so&&("audio"==so?en&&WPSVPAspectRatio.resizeMedia("image",Pa,We,en):"video"==so?Is&&"video_360"==ro?Un&&(t=Se.width(),a=Se.height(),Wn.setSize(t,a),An.aspect=t/a,An.updateProjectionMatrix()):en?WPSVPAspectRatio.resizeMedia("image",Pa,We,en):nn&&WPSVPAspectRatio.resizeMedia("video",Pa,We,nn):"image"==so?"image_360"==ro?zn&&(t=Se.width(),a=Se.height(),Kn.setSize(t,a),An.aspect=t/a,An.updateProjectionMatrix(),Kn.render(Xn,An)):jn&&WPSVPAspectRatio.resizeMedia("image",Pa,We,jn):"youtube"==so?"chromeless"==Xa&&Ui.width&&Ui.height&&WPSVPAspectRatio.resizeMedia("iframe",Pa,Ae,rn):"vimeo"==so&&"chromeless"==yn&&Ui.width&&Ui.height&&WPSVPAspectRatio.resizeMedia("iframe",Pa,wn,vn)),Za)for(n=Za.length,t=ke.width(),i=0;i<n;i++)t<(a=Za[i]).width?(-1==a.elements.indexOf("controls")&&Fe.addClass("wpsvp-force-hide"),-1==a.elements.indexOf("seekbar")&&Xe.addClass("wpsvp-force-hide"),-1==a.elements.indexOf("play")&&qe.addClass("wpsvp-force-hide"),-1==a.elements.indexOf("time")&&(Be.addClass("wpsvp-force-hide"),ze.addClass("wpsvp-force-hide"),He.addClass("wpsvp-force-hide")),-1==a.elements.indexOf("download")&&yt.addClass("wpsvp-force-hide"),-1==a.elements.indexOf("pip")&&ia.addClass("wpsvp-force-hide"),-1==a.elements.indexOf("share")&&bt.addClass("wpsvp-force-hide"),-1==a.elements.indexOf("info")&&ot.addClass("wpsvp-force-hide"),-1==a.elements.indexOf("embed")&&dt.addClass("wpsvp-force-hide"),-1==a.elements.indexOf("next")&&Dt.addClass("wpsvp-force-hide"),-1==a.elements.indexOf("previous")&&Lt.addClass("wpsvp-force-hide"),-1==a.elements.indexOf("seek_backward")&&Tt.addClass("wpsvp-force-hide"),-1==a.elements.indexOf("seek_forward")&&xt.addClass("wpsvp-force-hide"),-1==a.elements.indexOf("rewind")&&kt.addClass("wpsvp-force-hide"),-1==a.elements.indexOf("volume")&&Ze.addClass("wpsvp-force-hide"),-1==a.elements.indexOf("fullscreen")&&Zs.addClass("wpsvp-force-hide"),-1==a.elements.indexOf("playlist")&&ht.addClass("wpsvp-force-hide"),-1==a.elements.indexOf("quality")&&Ht.addClass("wpsvp-force-hide"),-1==a.elements.indexOf("playback_rate")&&Ft.addClass("wpsvp-force-hide"),-1==a.elements.indexOf("subtitles")&&(Gt.addClass("wpsvp-force-hide"),Me.addClass("wpsvp-force-hide")),-1==a.elements.indexOf("annotations")&&_e.addClass("wpsvp-force-hide"),-1==a.elements.indexOf("audio_language")&&ea.addClass("wpsvp-force-hide"),-1==a.elements.indexOf("upnext")&&Nt.addClass("wpsvp-force-hide"),-1==a.elements.indexOf("settings")&&vr.addClass("wpsvp-force-hide")):(-1==a.elements.indexOf("controls")&&Fe.removeClass("wpsvp-force-hide"),-1==a.elements.indexOf("seekbar")&&Xe.removeClass("wpsvp-force-hide"),-1==a.elements.indexOf("play")&&qe.removeClass("wpsvp-force-hide"),-1==a.elements.indexOf("time")&&(Be.removeClass("wpsvp-force-hide"),ze.removeClass("wpsvp-force-hide"),He.removeClass("wpsvp-force-hide")),-1==a.elements.indexOf("download")&&yt.removeClass("wpsvp-force-hide"),-1==a.elements.indexOf("pip")&&ia.removeClass("wpsvp-force-hide"),-1==a.elements.indexOf("share")&&bt.removeClass("wpsvp-force-hide"),-1==a.elements.indexOf("info")&&ot.removeClass("wpsvp-force-hide"),-1==a.elements.indexOf("embed")&&dt.removeClass("wpsvp-force-hide"),-1==a.elements.indexOf("next")&&Dt.removeClass("wpsvp-force-hide"),-1==a.elements.indexOf("previous")&&Lt.removeClass("wpsvp-force-hide"),-1==a.elements.indexOf("seek_backward")&&Tt.removeClass("wpsvp-force-hide"),-1==a.elements.indexOf("seek_forward")&&xt.removeClass("wpsvp-force-hide"),-1==a.elements.indexOf("rewind")&&kt.removeClass("wpsvp-force-hide"),-1==a.elements.indexOf("volume")&&Ze.removeClass("wpsvp-force-hide"),-1==a.elements.indexOf("fullscreen")&&Zs.removeClass("wpsvp-force-hide"),-1==a.elements.indexOf("playlist")&&ht.removeClass("wpsvp-force-hide"),-1==a.elements.indexOf("quality")&&Ht.removeClass("wpsvp-force-hide"),-1==a.elements.indexOf("playback_rate")&&Ft.removeClass("wpsvp-force-hide"),-1==a.elements.indexOf("subtitles")&&(Gt.removeClass("wpsvp-force-hide"),Me.removeClass("wpsvp-force-hide")),-1==a.elements.indexOf("annotations")&&_e.removeClass("wpsvp-force-hide"),-1==a.elements.indexOf("audio_language")&&ea.removeClass("wpsvp-force-hide"),-1==a.elements.indexOf("upnext")&&Nt.removeClass("wpsvp-force-hide"),-1==a.elements.indexOf("settings")&&vr.removeClass("wpsvp-force-hide"));if(ui&&Ro){for(t=Ve.width(),n=Ds.length,i=0;i<n;i++)if(t>(a=Ds[i]).width)var o=a.size;Ve.css("fontSize",o+"px")}yr&&gr.is(":visible")&&(gr.height()>jt.offset().top-bs.scrollTop()?(gr.addClass("wpsvp-menu-bottom"),ke.addClass("wpsvp-holder-visible")):(gr.removeClass("wpsvp-menu-bottom"),ke.removeClass("wpsvp-holder-visible")))}function Pe(e){if(!vs)return!1;if(void 0!==e){if(Ua&&1==e||!Ua&&0==e)return!1;Ua=!e}Ua?Ce.hide():Ce.show(),Ua=!Ua,be()}function Te(t){var a={};if("html"==(t.type?"data":"html")){if(a.origclasses=t.attr("class"),a.type=t.attr("data-type"),as?a.pwd=as:null==t.attr("data-pwd")||WPSVPUtils.isEmpty(t.attr("data-pwd"))||(a.pwd=t.attr("data-pwd")),null!=t.attr("data-noapi")&&(a.noapi=!0),null!=t.attr("data-live-stream")&&(a.liveStream=!0),null==t.attr("data-alt")||WPSVPUtils.isEmpty(t.attr("data-alt"))||(a.alt=t.attr("data-alt")),null==t.attr("data-deeplink")||WPSVPUtils.isEmpty(t.attr("data-deeplink"))||(a.deeplink=t.attr("data-deeplink")),"image"==a.type||"image_360"==a.type||"audio"==a.type||"video"==a.type||"video_360"==a.type?a.path=t.data("path"):null==t.attr("data-path")||WPSVPUtils.isEmpty(t.attr("data-path"))||(a.path=t.attr("data-path"),-1!=a.path.indexOf("ebsfm:")&&(a.path=atob(a.path.substr(6)))),null==t.attr("data-mp4")||WPSVPUtils.isEmpty(t.attr("data-mp4"))||(a.mp4=t.attr("data-mp4")),null==t.attr("data-thumb")||WPSVPUtils.isEmpty(t.attr("data-thumb"))||(a.thumb=t.attr("data-thumb")),null==t.attr("data-title")||WPSVPUtils.isEmpty(t.attr("data-title"))||(a.title=t.attr("data-title")),t.find(".wpsvp-playlist-title").length&&(a.domTitle=t.find(".wpsvp-playlist-title").html()),null==t.attr("data-description")||WPSVPUtils.isEmpty(t.attr("data-description"))?t.find(".wpsvp-playlist-description").length&&(a.description=t.find(".wpsvp-playlist-description").html()):a.description=t.attr("data-description"),null==t.attr("data-quality")||WPSVPUtils.isEmpty(t.attr("data-quality"))||(a.quality=t.attr("data-quality")),null==t.attr("data-download")||WPSVPUtils.isEmpty(t.attr("data-download"))||(a.download=t.attr("data-download")),null==t.attr("data-poster")||WPSVPUtils.isEmpty(t.attr("data-poster"))||(a.poster=t.attr("data-poster")),null==t.attr("data-poster-frame-time")||WPSVPUtils.isEmpty(t.attr("data-poster-frame-time"))||(a.posterFrameTime=t.attr("data-poster-frame-time")),null==t.attr("data-start")||WPSVPUtils.isEmpty(t.attr("data-start"))||(a.start=Number(t.attr("data-start"))),null==t.attr("data-end")||WPSVPUtils.isEmpty(t.attr("data-end"))||(a.end=Number(t.attr("data-end"))),null!=t.attr("data-normal-play-mode")&&(a.normalPlayMode=Number(t.attr("data-normal-play-mode"))),null!=t.attr("data-random-clip-time")&&!WPSVPUtils.isEmpty(t.attr("data-random-clip-time"))&&WPSVPUtils.isNumber(t.attr("data-random-clip-time"))&&(a.randomClipTime=Number(t.attr("data-random-clip-time"))),null==t.attr("data-duration")||WPSVPUtils.isEmpty(t.attr("data-duration"))||(a.duration=t.attr("data-duration")),null!=t.attr("data-playback-rate")&&!WPSVPUtils.isEmpty(t.attr("data-playback-rate"))&&WPSVPUtils.isNumber(t.attr("data-playback-rate"))&&(a.playbackRate=Number(t.attr("data-playback-rate"))),null==t.attr("data-aspect-ratio")||WPSVPUtils.isEmpty(t.attr("data-aspect-ratio"))||(a.aspectRatio=t.attr("data-aspect-ratio")),null!=t.attr("data-id3")&&(a.id3=!0),null==t.attr("data-share")||WPSVPUtils.isEmpty(t.attr("data-share"))||(a.share=t.attr("data-share")),null==t.attr("data-limit")||WPSVPUtils.isEmpty(t.attr("data-limit"))||(a.limit=Number(t.attr("data-limit"))),null==t.attr("data-width")||WPSVPUtils.isEmpty(t.attr("data-width"))||null==t.attr("data-height")||WPSVPUtils.isEmpty(t.attr("data-height"))||(a.width=parseInt(t.attr("data-width"),10),a.height=parseInt(t.attr("data-height"),10)),null!=t.attr("data-is360")&&(a.is360=!0),null==t.attr("data-preview-seek")||WPSVPUtils.isEmpty(t.attr("data-preview-seek"))||(a.previewSeek=t.attr("data-preview-seek")),null==t.attr("data-user-id")||WPSVPUtils.isEmpty(t.attr("data-user-id"))||(a.user_id=t.attr("data-user-id")),null==t.attr("data-sort")||WPSVPUtils.isEmpty(t.attr("data-sort"))||(a.sort=t.attr("data-sort"),null==t.attr("data-sort-direction")||WPSVPUtils.isEmpty(t.attr("data-sort-direction"))||(a.sortDirection=t.attr("data-sort-direction"))),null==t.attr("data-user-account")||WPSVPUtils.isEmpty(t.attr("data-user-account"))||(a.userAccount=t.attr("data-user-account")),t.children(".wpsvp-subtitles").length){var i=t.children(".wpsvp-subtitles");i.children("div").length&&(a.subtitles=[],i.children("div").each(function(){var t=e(this),i=t.attr("data-label");i={label:i,value:i,src:t.attr("data-src")},null!=t.attr("data-default")&&(i.default=!0),a.subtitles.push(i)}))}t.find(".wpsvp-custom-playlist-item-content").length&&(a.customContent=t.find(".wpsvp-custom-playlist-item-content").html()),null!=t.attr("data-chapters")&&(a.chapters=t.attr("data-chapters")),null==t.attr("data-link")||WPSVPUtils.isEmpty(t.attr("data-link"))||(a.link=t.attr("data-link"),null==t.attr("data-target")||WPSVPUtils.isEmpty(t.attr("data-target"))?a.target="_blank":a.target=t.attr("data-target")),null==t.attr("data-end-link")||WPSVPUtils.isEmpty(t.attr("data-end-link"))||(a.endLink=t.attr("data-end-link"),a.endTarget="_blank",null==t.attr("data-end-target")||WPSVPUtils.isEmpty(t.attr("data-end-target"))||(a.endTarget=t.attr("data-end-target"))),null==t.attr("data-skip-enable")||WPSVPUtils.isEmpty(t.attr("data-skip-enable"))||(a.skipEnable=Math.abs(parseInt(t.attr("data-skip-enable"),10))),null==t.attr("data-ad-id")||WPSVPUtils.isEmpty(t.attr("data-ad-id"))||(a.adId=t.attr("data-ad-id")),t.children(".wpsvp-ad-section").length&&(a.adSection=t.children(".wpsvp-ad-section")),t.children(".wpsvp-annotation-section").length&&(a.annotationSection=t.children(".wpsvp-annotation-section"))}else a=e.extend(!0,{},t);return null!=t.attr("data-load-more")&&(Vr=!0,Wr=t.wrap("<p>").parent().html(),Ti&&"youtube_user"==a.type&&(fn=!0)),a}function xe(){var t={playlist:e.trim(Re.html()),activePlaylist:Ir,date:Math.floor(Date.now()/1e3)};Vr&&_r&&Wr&&(t.loadMoreOnTotalScroll=!0,t.nextPageToken=_r,t.loadMoreItem=Wr,fn&&(t.channelId=sn.getChannelId())),localStorage.setItem(Pi,JSON.stringify(t))}var ke=e(this),Se=ke.find(".wpsvp-media-holder").show(),Ce=ke.find(".wpsvp-playlist-holder"),Ee=ke.find(".wpsvp-playlist-inner"),Re=ke.find(".wpsvp-playlist-content"),Ie=ke.find(".wpsvp-playlist-filter-msg"),Me=ke.find(".wpsvp-subtitle-holder").css("display","none"),Ve=ke.find(".wpsvp-subtitle-holder-inner"),_e=ke.find(".wpsvp-annotation-holder").css("display","none"),We=ke.find(".wpsvp-player-holder").show(),Oe=ke.find(".wpsvp-video-holder"),Ne=ke.find(".wpsvp-audio-holder"),Ue=ke.find(".wpsvp-image-holder"),Ae=ke.find(".wpsvp-youtube-holder"),De=ke.find(".wpsvp-vimeo-holder-default"),Le=ke.find(".wpsvp-vimeo-holder-chromeless"),je=ke.find(".wpsvp-iframe-holder"),Fe=ke.find(".wpsvp-player-interface"),qe=ke.find(".wpsvp-playback-toggle"),Be=ke.find(".wpsvp-media-time-current"),He=ke.find(".wpsvp-media-time-separator"),ze=ke.find(".wpsvp-media-time-total"),Ye=ke.find(".wpsvp-preview-seek-wrap"),Qe=ke.find(".wpsvp-preview-seek-inner"),Ge=ke.find(".wpsvp-preview-seek-time-current"),Xe=ke.find(".wpsvp-seekbar"),Ke=ke.find(".wpsvp-progress-bg"),Je=ke.find(".wpsvp-load-level"),$e=ke.find(".wpsvp-progress-level"),Ze=ke.find(".wpsvp-volume-wrapper"),et=ke.find(".wpsvp-volume-toggle"),tt=ke.find(".wpsvp-volume-seekbar"),at=ke.find(".wpsvp-volume-bg"),it=ke.find(".wpsvp-volume-level"),nt=ke.find(".wpsvp-info-holder");ke.find(".wpsvp-info-data"),ke.find(".wpsvp-info-inner");var ot=ke.find(".wpsvp-info-toggle"),st=ke.find(".wpsvp-player-title"),rt=ke.find(".wpsvp-player-desc"),lt=ke.find(".wpsvp-embed-holder");ke.find(".wpsvp-embed-data-wrap");var dt=ke.find(".wpsvp-embed-toggle"),pt=ke.find(".wpsvp-pwd-holder"),ut=ke.find(".wpsvp-pwd-field"),ct=ke.find(".wpsvp-pwd-error").text(),ht=ke.find(".wpsvp-playlist-toggle"),ft=ke.find(".wpsvp-player-loader"),mt=ke.find(".wpsvp-playlist-loader"),vt=ke.find(".wpsvp-big-play"),gt=ke.find(".wpsvp-loop-toggle"),wt=ke.find(".wpsvp-shuffle-toggle"),yt=ke.find(".wpsvp-download-toggle"),bt=ke.find(".wpsvp-share-toggle"),Pt=ke.find(".wpsvp-share-holder"),Tt=ke.find(".wpsvp-seek-backward"),xt=ke.find(".wpsvp-seek-forward"),kt=ke.find(".wpsvp-rewind-toggle"),St=ke.find(".wpsvp-nav-backward"),Ct=ke.find(".wpsvp-nav-forward"),Et=ke.find(".wpsvp-vr-info"),Rt=ke.find(".wpsvp-lightbox-wrap"),It=ke.find(".wpsvp-lightbox"),Mt=ke.find(".wpsvp-lightbox-inner"),Vt=ke.find(".wpsvp-lightbox-content-inner"),_t=ke.find(".wpsvp-lightbox-close"),Wt=ke.find(".wpsvp-lightbox-prev"),Ot=ke.find(".wpsvp-lightbox-next"),Nt=ke.find(".wpsvp-upnext-wrap"),Ut=ke.find(".wpsvp-upnext-thumb"),At=ke.find(".wpsvp-upnext-title"),Dt=ke.find(".wpsvp-next-toggle"),Lt=ke.find(".wpsvp-previous-toggle"),jt=ke.find(".wpsvp-settings-toggle"),Ft=ke.find(".wpsvp-playback-rate-toggle"),qt=ke.find(".wpsvp-playback-rate-menu-holder"),Bt=ke.find(".wpsvp-playback-rate-menu"),Ht=ke.find(".wpsvp-quality-toggle").hide(),zt=ke.find(".wpsvp-quality-menu-holder"),Yt=ke.find(".wpsvp-quality-menu"),Qt=ke.find(".wpsvp-quality-settings-menu"),Gt=ke.find(".wpsvp-subtitle-toggle").hide(),Xt=ke.find(".wpsvp-subtitle-menu-holder"),Kt=ke.find(".wpsvp-subtitle-menu"),Jt=ke.find(".wpsvp-subtitle-settings-menu"),$t=ke.find(".wpsvp-audio-language-menu"),Zt=ke.find(".wpsvp-audio-language-menu-holder"),ea=ke.find(".wpsvp-audio-language-toggle").hide(),ta=ke.find(".wpsvp-audio-language-settings-menu"),aa=ke.find(".wpsvp-chapter-title"),ia=ke.find(".wpsvp-pip-toggle").hide(),na=ke.find(".wpsvp-link-copy"),oa=ke.find(".wpsvp-embed-copy"),sa=ke.find(".wpsvp-player-header-title"),ra=ke.find(".wpsvp-ad-seekbar"),la=ke.find(".wpsvp-ad-progress-bg"),da=ke.find(".wpsvp-ad-load-level"),pa=ke.find(".wpsvp-ad-progress-level"),ua=ke.find(".wpsvp-ad-info-time"),ca=ke.find(".wpsvp-ad-skip-btn"),ha=ke.find(".wpsvp-ad-skip-msg"),fa=ke.find(".wpsvp-ad-skip-msg-text"),ma=fa.html(),va=ke.find(".wpsvp-ad-skip-msg-end"),wa=ke.find(".wpsvp-ad-skip-thumb");t=e.extend(!0,{},{youtubePlayerType:"chromeless",blockYoutubeEvents:!1,vimeoPlayerType:"default",vimeoPlayerColor:"#00adef",blockVimeoEvents:!0,playerRatio:1.7777777,playlistBottomHeight:300,playlistSideWidth:290,lightboxMaxWidth:920,preload:"auto",sourcePath:"",instanceName:"",thumbScrollValue:50,youtubePlayerColor:"red",verticalBottomSepearator:700,subtitleOffText:"Disabled",showInterfaceOnMediaStart:!0,sortableTracks:!1,useMobileNativePlayer:!1,hideQualityMenuOnSingleQuality:!0,aspectRatio:2,randomPlay:!1,loopingOn:!0,hidePlaylistOnFullscreenEnter:!0,playlistItemContent:"title,description",dynamicSubtitleSize:!0,playbackPositionKey:"wpsvp-playback-position",rightClickContextMenu:"custom",focusVideoOnActive:!1,playlistOpened:!0,limitDescriptionText:100,showStreamVideoBitrateMenu:!1,showStreamAudioBitrateMenu:!1,seekTime:10,createAdMarkers:!0,playAdsOnlyOnce:!1,showAnnotationsOnlyOnce:!1,playlistStorageKey:"wpsvp-playlist-storage",truncateWatch:!0},t);var ya,ba,Pa,Ta,xa=WPSVPUtils.isMobile(),ka=WPSVPUtils.hasLocalStorage(),Sa=t.sourcePath,Ca=t.instanceName,Ea=t.playlistList,Ra=t.mediaEndAction,Ia=t.useKeyboardNavigationForPlayback,Ma=t.volume,Va=t.autoPlay,_a=t.autoPlayAfterFirst,Wa=t.autoPlayInViewport,Oa=Va,Na=t.forceMutedAutoplay,Ua=t.playlistOpened,Aa=t.hideQualityMenuOnSingleQuality,Da=t.togglePlaybackOnMultipleInstances,La=t.sortableTracks,ja=t.preload,Fa=t.playerRatio,qa=t.hidePlaylistOnFullscreenEnter,Ba=t.minimizeOnScroll,Ha=t.minimizeClass,za=t.playlistBottomHeight,Ya=t.playlistSideWidth,Qa=t.lightboxMaxWidth,Ga=t.blockYoutubeEvents,Xa=(t.blockVimeoEvents,t.youtubePlayerType),Ka=t.vimeoPlayerType,Ja=t.breakPointArr,$a=t.verticalBottomSepearator,Za=t.elementsVisibilityArr,ei=t.subtitleOffText,ti=t.playAdsOnlyOnce,ai=t.showAnnotationsOnlyOnce,ii=t.showInterfaceOnMediaStart,ni=t.playbackPositionKey,oi=t.rememberPlaybackPosition&&ka&&ni,si=t.useMobileNativePlayer,ri=t.useGa&&"file:"!=window.location.protocol,li=t.useSwipeNavigation&&"ontouchstart"in window,di=t.limitDescriptionText,pi=t.playlistItemContent.split(","),ui=t.dynamicSubtitleSize,ci=t.rightClickContextMenu,hi=t.focusVideoOnActive,fi=!0,mi="normal",vi=t.showStreamVideoBitrateMenu,gi=t.showStreamAudioBitrateMenu,wi=t.seekTime,yi=t.createAdMarkers,bi=t.forceYoutubeChromeless,Pi=t.playlistStorageKey,Ti=t.cacheTime,xi=ke.attr("class").split(/\s+/),ki="normal";-1<xi.indexOf("wpsvp-layout-100")&&(ki="100%");var Si="none";-1<xi.indexOf("wpsvp-nt-scroll")?Si="scroll":-1<xi.indexOf("wpsvp-nt-buttons")?Si="buttons":-1<xi.indexOf("wpsvp-nt-hover")&&(Si="hover");var Ci="vertical";(-1<xi.indexOf("wpsvp-ht")||-1<xi.indexOf("wpsvp-hb"))&&(Ci="horizontal");var Ei="right_bottom";if(-1<xi.indexOf("wpsvp-vlb")?Ei="left_bottom":-1<xi.indexOf("wpsvp-vl")?Ei="left":-1<xi.indexOf("wpsvp-vr")?Ei="right":-1<xi.indexOf("wpsvp-ht")?Ei="top":-1<xi.indexOf("wpsvp-hb")?Ei="bottom":-1<xi.indexOf("wpsvp-vb")?Ei="bottom":-1<xi.indexOf("wpsvp-wall")?(Ei="wall",mi="lightbox"):-1<xi.indexOf("wpsvp-outer")?Ei="outer":-1<xi.indexOf("wpsvp-no-playlist")&&(Ei="no-playlist",fi=!1),"outer"==Ei&&(qa=!1,hi=!0),"default"==Xa?Ga=!1:li&&(Ga=!0),"100%"==ki&&(Ba=Wa=!1),"lightbox"==mi&&(Ba=Wa=!1,Ua=!0),""!=t.wrapperMaxWidth&&ke.css("max-width",t.wrapperMaxWidth+"px"),Ja&&Ja.length){WPSVPUtils.keysrt(Ja,"width");var Ri=!0}Za&&Za.length&&WPSVPUtils.keysrt(Za,"width");var Ii,Mi,Vi,_i,Wi,Oi,Ni,Ui,Ai,Di,Li,ji,Fi,qi,Bi,Hi,zi,Yi,Qi,Gi,Xi,Ki,Ji,$i,Zi,en,tn,an,nn,on,sn,rn,ln,dn,pn,un,cn,hn,fn,mn,vn,gn,wn,yn,bn,Pn,Tn,xn,kn,Sn,Cn,En,Rn,In,Mn,Vn,_n,Wn,On,Nn,Un,An,Dn,Ln,jn,Fn,qn,Bn,Hn,zn,Yn,Qn,Gn,Xn,Kn,Jn,$n,Zn,eo,to,ao,io,no,oo,so,ro,lo,po,uo,co,ho,fo,mo,vo,go,wo,yo,bo,Po,To,xo,ko,So,Co,Eo,Ro,Io,Mo,Vo,_o,Wo,Oo,No,Uo,Ao,Do,Lo,jo,Fo,qo,Bo,Ho,zo,Yo,Qo,Go,Xo,Ko,Jo,$o,Zo,es,ts,as,is=WPSVPUtils.isIOS(),ns=WPSVPUtils.isiPhoneIpod(),os=WPSVPUtils.isAndroid(),ss=WPSVPUtils.hasFullscreen(),rs=WPSVPUtils.hasDownloadSupport(),ls=WPSVPUtils.volumeCanBeSet(),ds=WPSVPUtils.supportsWebGL(),ps=WPSVPUtils.canPlayMp4(),us=WPSVPUtils.canPlayMp3(),cs=WPSVPUtils.canPlayWav(),hs=WPSVPUtils.isChrome(),fs=WPSVPUtils.isSafari(),ms=document.pictureInPictureEnabled,vs=!1,gs=!0,ws=this,ys=e("body"),bs=e(window),Ps=e(document),Ts=e("html"),xs="scroll."+Ca,ks=[],Ss=window.MediaSource,Cs=0,Es=0,Rs=0,Is=!0,Ms=t.thumbScrollValue,Vs=!0,_s=0,Ws=!0,Os=[],Ns=[],Us=[],As=[],Ds=[{width:0,size:18},{width:480,size:20},{width:768,size:22},{width:1024,size:24},{width:1280,size:36}],Ls=[],js=0,Fs=[],qs=[];if(window.playlistScrollLoading=!1,"scroll"==Si&&WPSVPUtils.checkCssExist(WPSVPUtils.qualifyURL(Sa+"css/jquery.mCustomScrollbar.css")),void 0===window.wpsvp_mediaArr&&(window.wpsvp_mediaArr=[]),wpsvp_mediaArr.push({inst:ws,id:Ca}),ri){if("undefined"==typeof ga){var Bs=document.createElement("script");Bs.type="text/javascript",Bs.src="//www.google-analytics.com/analytics.js",Bs.onload=Bs.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||ga("create",t.gaTrackingId,"auto")},Bs.onerror=function(){alert("Error loading "+this.src)};var Hs=document.getElementsByTagName("script")[0];Hs.parentNode.insertBefore(Bs,Hs)}else ga("create",t.gaTrackingId,"auto");yt.on("click",function(){e(ws).trigger("mediaDownload",{instance:ws,instanceName:Ca,counter:Wi})})}li&&(void 0===e.fn.swipe?((Bs=document.createElement("script")).type="text/javascript",Bs.src=WPSVPUtils.qualifyURL(Sa+"js/scripts/jquery.touchSwipe.min.js"),Bs.onload=Bs.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||a()},Bs.onerror=function(){alert("Error loading "+this.src)},(Hs=document.getElementsByTagName("script")[0]).parentNode.insertBefore(Bs,Hs)):a()),"lightbox"==mi&&(Mt.css("max-width",Qa+"px"),_t.on("click",function(){Rt.one("transitionend",function(){Rt.css("display","none")}).css("opacity",0),so&&pe(),Li&&C()}),t.clickOnBackgroundClosesLightbox&&It.on("click",function(e){e.target==this&&(Rt.one("transitionend",function(){Rt.css("display","none")}).css("opacity",0),so&&pe(),Li&&C())}),Wt.on("click",function(e){e.stopImmediatePropagation(),fe()}),Ot.on("click",function(e){e.stopImmediatePropagation(),he()})),t.logoPosition&&("tl"==t.logoPosition?ke.find(".wpsvp-logo").css({top:t.logoMargin+"px",left:t.logoMargin+"px"}):"tr"==t.logoPosition?ke.find(".wpsvp-logo").css({top:t.logoMargin+"px",right:t.logoMargin+"px"}):"bl"==t.logoPosition?ke.find(".wpsvp-logo").css({bottom:t.logoMargin+"px",left:t.logoMargin+"px"}):"br"==t.logoPosition&&ke.find(".wpsvp-logo").css({bottom:t.logoMargin+"px",right:t.logoMargin+"px"})),xa?Va=!1:Wa&&(Va=!1),_a&&(Va=!1),Na&&(Va=!0),fi||(Ua=!1,Ce.css({width:0,height:0}).hide()),Ua?Ce.show():Ce.hide(),ns&&ia.remove(),ds||(Is=!1,Et.remove(),hs&&console.log("Turn Hardware Acceleration On Within Chrome Browser to enable 360 video and images!")),"bottom"==Ei&&"vertical"==Ci&&Ce.css({height:za});var zs=e('<div class="wpsvp-playlist-item"></div>').prependTo(ke),Ys="horizontal"==Ci?zs.outerWidth(!0):zs.outerHeight(!0);if(zs.remove(),zs=null,oi&&(window.attachEvent||window.addEventListener)(is?"pagehide":"beforeunload",function(e){if(window.event&&(window.event.cancelBubble=!0),!vs||!so)return!1;e={volume:Ma,activeItem:Wi,resumeTime:parseInt(ws.getCurrentTime(),10)},localStorage.setItem(ni,JSON.stringify(e))}),Nt.find(".wpsvp-upnext-close").on("click",function(){Nt.removeClass("wpsvp-upnext-on wpsvp-upnext-visible")}),Ut.on("click",function(){Nt.removeClass("wpsvp-upnext-on wpsvp-upnext-visible"),he()}),At.on("click",function(){Nt.removeClass("wpsvp-upnext-on wpsvp-upnext-visible"),he()}),ca.on("click",function(){if(!vs||!Bo||!Go)return!1;Bo&&e(ws).trigger("adSkip",{instance:ws,instanceName:Ca,adId:Ui.adId}),ye()}),_e.on("click",".wpsvp-annotation-close",function(){var t=e(this).attr("data-id");ai?(e(this).parent().remove(),qs.splice(t,1)):e(this).parent().hide()}),ke.hasClass("wpsvp-skin-light-flat")||ke.hasClass("wpsvp-skin-gray-flat"),"ontouchstart"in window)var Qs=!0,Gs="touchstart.ap mousedown.ap",Xs="touchmove.ap mousemove.ap",Ks="touchend.ap mouseup.ap";else window.PointerEvent?(Gs="pointerdown.ap",Xs="pointermove.ap",Ks="pointerup.ap"):(Gs="mousedown.ap",Xs="mousemove.ap",Ks="mouseup.ap");Ne.on("click",function(){if(To)return!1;if(xa){if(_i&&Ws)I();else if(Zi)if(Zi.paused){var e=Zi.play();void 0!==e&&e.then(function(e){}).catch(function(e){vt.show()})}else Zi.pause()}else Zi?Zi.paused?void 0!==(e=Zi.play())&&e.then(function(e){}).catch(function(e){vt.show()}):Zi.pause():en&&!_i&&z()}),Oe.on("click",function(){if(To)return!1;if(xa)if(_i&&Ws)I();else if(an)if(an.paused){var e=an.play();void 0!==e&&e.then(function(e){}).catch(function(e){vt.show()})}else an.pause();else en&&!_i&&(en.remove(),en=null,z());else an?an.paused?void 0!==(e=an.play())&&e.then(function(e){}).catch(function(e){vt.show()}):an.pause():en&&!_i&&(en.remove(),en=null,z())}),ke.find(".wpsvp-search-field").on("keyup.apfilter",function(){if(0==ji)return!1;var t,a=e(this).val(),i=0;for(t=0;t<ji;t++){-1<Re.children(".wpsvp-playlist-item").eq(t).find(".wpsvp-playlist-title").html().indexOf(a)?Re.children(".wpsvp-playlist-item").eq(t).show():(Re.children(".wpsvp-playlist-item").eq(t).hide(),i++)}i==ji?Ie.show():Ie.hide()});var Js,$s="normal";Ps.on("fullscreenchange mozfullscreenchange MSFullscreenChange webkitfullscreenchange",function(t){Js==Ca&&(vo&&clearTimeout(vo),"fullscreen"==$s?($s="normal",Ts.removeClass("wpsvp-fs-overflow"),ke.removeClass("wpsvp-fs"),"lightbox"==mi&&Vt.removeClass("wpsvp-fs"),Zs.find(".wpsvp-btn-fullscreen").show(),Zs.find(".wpsvp-btn-normal").hide(),"custom"==ci&&(ir.find(".wpsvp-context-fullscreen-enter").show(),ir.find(".wpsvp-context-fullscreen-exit").hide()),Ta&&!Ua&&(Ta=!1,Ce.show(),Ua=!0),xa||Ps.off("mousemove",V),document.body.style.cursor="default",Js=null,e(ws).trigger("fullscreenExit",{instance:ws,instanceName:Ca})):($s="fullscreen",Ts.addClass("wpsvp-fs-overflow"),ke.addClass("wpsvp-fs"),"lightbox"==mi&&Vt.addClass("wpsvp-fs"),Zs.find(".wpsvp-btn-fullscreen").hide(),Zs.find(".wpsvp-btn-normal").show(),"custom"==ci&&(ir.find(".wpsvp-context-fullscreen-enter").hide(),ir.find(".wpsvp-context-fullscreen-exit").show()),qa&&Ua&&(Ta=!0,Ce.hide(),Ua=!1),xa?vo=setTimeout(function(){clearTimeout(this),vo=null,M()},4e3):(Ps.on("mousemove",V),vo=setTimeout(function(){clearTimeout(this),vo=null,V()},4e3)),e(ws).trigger("fullscreenEnter",{instance:ws,instanceName:Ca}))),fs&&be()});var Zs=ke.find(".wpsvp-fullscreen-toggle").on("click",function(t){Js=Ca,t=ke[0],"normal"==$s&&e(ws).trigger("fullscreenBeforeEnter",{instance:ws,instanceName:Ca}),ss?t.requestFullscreen?document.fullscreenElement?document.exitFullscreen():t.requestFullscreen():t.webkitRequestFullScreen?document.webkitIsFullScreen?document.webkitCancelFullScreen():t.webkitRequestFullScreen():t.msRequestFullscreen?document.msIsFullscreen||document.msFullscreenElement?document.msExitFullscreen():t.msRequestFullscreen():t.mozRequestFullScreen&&(document.fullscreenElement||document.mozFullScreenElement?document.mozCancelFullScreen():t.mozRequestFullScreen()):("fullscreen"==$s?($s="normal",Ts.removeClass("wpsvp-fs-overflow"),ke.removeClass("wpsvp-fs"),"lightbox"==mi&&Vt.removeClass("wpsvp-fs"),document.body.style.cursor="default",Zs.find(".wpsvp-btn-fullscreen").show(),Zs.find(".wpsvp-btn-normal").hide(),Ta&&!Ua&&(Ta=!1,Ce.show(),Ua=!0),e(ws).trigger("fullscreenExit",{instance:ws,instanceName:Ca})):($s="fullscreen",Ts.addClass("wpsvp-fs-overflow"),ke.addClass("wpsvp-fs"),"lightbox"==mi&&Vt.addClass("wpsvp-fs"),Zs.find(".wpsvp-btn-fullscreen").hide(),Zs.find(".wpsvp-btn-normal").show(),qa&&Ua&&(Ta=!0,Ce.hide(),Ua=!1),xa?vo=setTimeout(function(){clearTimeout(this),vo=null,M()},4e3):(Ps.on("mousemove",V),vo=setTimeout(function(){clearTimeout(this),vo=null,V()},4e3)),e(ws).trigger("fullscreenEnter",{instance:ws,instanceName:Ca})),be())});if(Zs.find(".wpsvp-btn-normal").hide(),Zs.find(".wpsvp-btn-fullscreen").show(),"disabled"==ci)ke.on("contextmenu",function(){return!1});else if("custom"==ci){var er=function(){ys.off("click.apcc",er),tr.hide()},tr=We.find(".wpsvp-context-menu").on("contextmenu",function(e){return!1}),ar=tr.find(".wpsvp-context-playback").on("click",function(e){ws.togglePlayback()}),ir=tr.find(".wpsvp-context-fullscreen").on("click",function(e){Zs.click()}),nr=tr.find(".wpsvp-context-volume").on("click",function(e){s()});We.on("contextmenu",function(t){if(e(t.target).hasClass("wpsvp-volume-level")||e(t.target).hasClass("wpsvp-volume-bg")||e(t.target).hasClass("wpsvp-progress-level")||e(t.target).hasClass("wpsvp-progress-bg")||e(t.target).hasClass("wpsvp-load-level")||e(t.target).hasClass("wpsvp-embed-code"))return!0;t.preventDefault(),t.stopPropagation();var a=We[0].getBoundingClientRect(),i=tr.outerWidth(!0),n=tr.outerHeight(!0),o=parseInt(t.pageX-bs.scrollLeft()-a.left,10);t=parseInt(t.pageY-bs.scrollTop()-a.top,10),o>We.width()-i&&(o-=i),t>We.height()-n&&(t-=n),tr.css({left:o+"px",top:t+"px"}).show(),ys.one("click.apcc",er)}).on("mouseleave",er),ys.on("mouseleave",er),Ps.on("contextmenu",er).keyup(function(e){27==e.keyCode&&er()})}var or=ke.find(".wpsvp-tooltip");xa||ke.find("[data-tooltip]").on("mouseenter",function(t){t=e(this);var a=ke[0].getBoundingClientRect(),i=t[0].getBoundingClientRect();if(or.text(t.attr("data-tooltip")),null!=t.attr("data-tooltip-position"))if("left"==t.attr("data-tooltip-position"))var n=parseInt(i.top-a.top-or.outerHeight()/2+t.outerHeight()/2),o=parseInt(i.left-a.left-or.outerWidth()-3);else"bottom"==t.attr("data-tooltip-position")&&(n=parseInt(i.top-a.top+t.outerHeight()),o=parseInt(i.left-a.left-or.outerWidth()/2+t.outerWidth()/2));else n=parseInt(i.top-a.top-or.outerHeight()),o=parseInt(i.left-a.left-or.outerWidth()/2+t.outerWidth()/2);"lightbox"!=mi&&(0>o?o=0:o+or.outerWidth()>ke.width()&&(o=ke.width()-or.outerWidth()),0>n+a.top&&(n=parseInt(i.top-a.top+or.outerHeight()+15))),or.css({left:o+"px",top:n+"px"}).show()}).on("mouseleave",function(e){or.hide()});var sr,rr,lr=Xe.hasClass("wpsvp-position-top")?"top":"bottom";if(Xe.on(Gs,function(e){if(vs)return!Bo&&(function(e){if(!sr){if("touchstart"==e.type){if(!((e=e.originalEvent.touches)&&0<e.length))return!1}else e.preventDefault();sr=!0,Ps.on(Xs,function(e){e:{if("touchmove"==e.type){if(e.originalEvent.touches&&e.originalEvent.touches.length)var t=e.originalEvent.touches;else{if(!e.originalEvent.changedTouches||!e.originalEvent.changedTouches.length)break e;t=e.originalEvent.changedTouches}if(1<t.length)break e;t=t[0]}else t=e;e.preventDefault(),n(t)}}).on(Ks,function(e){e:if(sr){if(sr=!1,Ps.off(Xs).off(Ks),"touchend"==e.type){if(e.originalEvent.touches&&e.originalEvent.touches.length)var t=e.originalEvent.touches;else{if(!e.originalEvent.changedTouches||!e.originalEvent.changedTouches.length)break e;t=e.originalEvent.changedTouches}if(1<t.length)break e;t=t[0]}else t=e;e.preventDefault(),n(t)}})}}(e),!1)}),!xa){var dr=function(){_i&&(Xe.off(Xs,o).off("mouseout",dr),Ps.off("mouseout",dr),Ui.previewSeek?Ye.hide():or.hide())};Xe.on("mouseover",function(){_i&&(Xe.on(Xs,o).on("mouseout",dr),Ps.on("mouseout",dr))})}var pr=tt.hasClass("wpsvp-volume-horizontal"),ur=.5;pr?tt.width():tt.height();var cr,hr,fr=pr?at.width():at.height();if(0>Ma?Ma=0:1<Ma&&(Ma=1),0!=Ma&&(ur=Ma),!ls||xa?(tt.remove(),et.on("click",function(e){s()})):et.on("click",function(e){xa&&0!=tt.length&&!tt.hasClass("wpsvp-force-hide")||s()}),tt.on(Gs,function(e){return function(e){if(vs){if(!cr){if("touchstart"==e.type){if(!((e=e.originalEvent.touches)&&0<e.length))return!1}else e.preventDefault();cr=!0,Ps.on(Xs,function(e){e:{if("touchmove"==e.type){if(e.originalEvent.touches&&e.originalEvent.touches.length)var t=e.originalEvent.touches;else{if(!e.originalEvent.changedTouches||!e.originalEvent.changedTouches.length)break e;t=e.originalEvent.changedTouches}if(1<t.length)break e;t=t[0]}else t=e;e.preventDefault(),r(t)}}).on(Ks,function(e){e:if(cr){if(cr=!1,Ps.off(Xs).off(Ks),"touchend"==e.type){if(e.originalEvent.touches&&e.originalEvent.touches.length)var t=e.originalEvent.touches;else{if(!e.originalEvent.changedTouches||!e.originalEvent.changedTouches.length)break e;t=e.originalEvent.changedTouches}if(1<t.length)break e;t=t[0]}else t=e;e.preventDefault(),r(t)}})}}}(e),!1}),!xa){var mr=function(){tt.off(Xs,d).off("mouseout",mr),Ps.off("mouseout",mr),or.hide()};tt.on("mouseover",function(){tt.on(Xs,d).on("mouseout",mr),Ps.on("mouseout",mr)})}WPSVPUtils.isEmpty(t.facebookAppId)?console.log("facebookAppId has not been set in settings!"):"file:"!=window.location.protocol&&(hr=t.facebookAppId,function(e,t,a){var i=e.getElementsByTagName(t)[0];e.getElementById(a)||((e=e.createElement(t)).id=a,e.src="//connect.facebook.net/en_US/sdk.js",i.parentNode.insertBefore(e,i))}(document,"script","facebook-jssdk"),window.fbAsyncInit=function(){FB.init({appId:hr,xfbml:!0,version:"v2.9"})});var vr=ke.find(".wpsvp-settings-wrap"),gr=ke.find(".wpsvp-settings-holder"),wr=ke.find(".wpsvp-settings-home"),yr=gr.length;jt.on("click",function(){ho&&_(!1),fo&&O(!1),mo&&W(!1),gr.is(":visible")?(gr.hide(),gr.find(".wpsvp-settings-menu").css("display","none"),wr.css("display","block")):gr.show()}),yr&&(wr.find(".wpsvp-menu-item").on("click",function(){var t=e(this).attr("data-target");wr.hide(),gr.find(".wpsvp-settings-menu").css("display","none"),gr.find("."+t+"-holder").css("display","block"),gr.height()>jt.offset().top-bs.scrollTop()&&(gr.addClass("wpsvp-menu-bottom"),ke.addClass("wpsvp-holder-visible"))}),gr.find(".wpsvp-menu-header").on("click",function(){gr.find(".wpsvp-settings-menu").css("display","none"),wr.css("display","block"),gr.removeClass("wpsvp-menu-bottom"),ke.removeClass("wpsvp-holder-visible")}),Bt.find(".wpsvp-menu-item").each(function(){e(this).on("click",p)})),Ft.length&&(Ft.on("mouseenter",function(){qt.show(),Bt.height()>Ft.offset().top-bs.scrollTop()&&(qt.addClass("wpsvp-menu-bottom"),ke.addClass("wpsvp-holder-visible"))}).on("mouseleave",function(){qt.hide().removeClass("wpsvp-menu-bottom"),ke.removeClass("wpsvp-holder-visible")}),Bt.find(".wpsvp-menu-item").each(function(){e(this).on("click",p)})),Ht.length&&Ht.on("mouseenter",function(){zt.show(),Yt.height()>Ht.offset().top-bs.scrollTop()&&(zt.addClass("wpsvp-menu-bottom"),ke.addClass("wpsvp-holder-visible"))}).on("mouseleave",function(){zt.hide().removeClass("wpsvp-menu-bottom"),ke.removeClass("wpsvp-holder-visible")}),ea.length&&ea.on("mouseenter",function(){Zt.show(),$t.height()>ea.offset().top-bs.scrollTop()&&(Zt.addClass("wpsvp-menu-bottom"),ke.addClass("wpsvp-holder-visible"))}).on("mouseleave",function(){Zt.hide().removeClass("wpsvp-menu-bottom"),ke.removeClass("wpsvp-holder-visible")}),Gt.length&&Gt.on("mouseenter",function(){Xt.show(),Kt.height()>Gt.offset().top-bs.scrollTop()&&(Xt.addClass("wpsvp-menu-bottom"),ke.addClass("wpsvp-holder-visible"))}).on("mouseleave",function(){Xt.hide().removeClass("wpsvp-menu-bottom"),ke.removeClass("wpsvp-holder-visible")}),this.setSubtitle=function(e){if(!vs||!so)return!1;if(Ve.empty(),Me.show(),e==ei||""==e)Eo=!1,Ro=null,Co&&Co.removeClass("wpsvp-menu-active"),Co=Kt.find(".wpsvp-menu-item[data-label='"+ei+"']").addClass("wpsvp-menu-active");else if(Us[e])Eo=!1,Ro=null,Co&&Co.removeClass("wpsvp-menu-active"),Co=Kt.find(".wpsvp-menu-item[data-label='"+e+"']").addClass("wpsvp-menu-active"),As=Us[e],Eo=!0;else{var t,a=Ui.subtitles.length;for(t=0;t<a;t++){var i=Ui.subtitles[t];if(i.label==e){Eo=!1,Ro=null,Co&&Co.removeClass("wpsvp-menu-active"),Co=Kt.find(".wpsvp-menu-item[data-label='"+e+"']").addClass("wpsvp-menu-active"),"hls"==ro?w(i):"dash"!=ro&&y(i);break}}}yr&&gr.find(".wpsvp-subtitle-menu-value").text(e)},Ia&&Ps.keyup(function(t){if(t.stopImmediatePropagation(),t.preventDefault(),!vs)return!1;var a=t.keyCode;if(t=e(t.target),37==a)ws.seekBackward();else if(39==a)ws.seekForward();else if(33==a)fe();else if(34==a)he();else if(32==a){if(t.hasClass("wpsvp-search-field")||t.hasClass("wpsvp-pwd-field"))return!1;ws.togglePlayback()}else if(77==a){if(t.hasClass("wpsvp-search-field")||t.hasClass("wpsvp-pwd-field"))return!1;s()}});var br,Pr=[qe,ht,Zs,vt,Ze,ot,bt,Tt,xt,kt,gt,wt,dt,Dt,Lt,ia,ke.find(".wpsvp-pwd-confirm"),ke.find(".wpsvp-embed-close"),ke.find(".wpsvp-info-close"),ke.find(".wpsvp-share-item"),ke.find(".wpsvp-share-close")],Tr=Pr.length;for(br=0;br<Tr;br++)e(Pr[br]).css("cursor","pointer").on("click",T);var xr=ke.find(".wpsvp-link-code").text(window.location.href);if(na.on("click",function(){WPSVPUtils.selectText(xr[0]);try{document.execCommand("copy"),na.text(na.attr("data-copied-text"))}catch(e){alert("Please press Ctrl/Cmd+C to copy code!")}oa.text(oa.attr("data-copy-text"))}),t.embedWidth&&!WPSVPUtils.isEmpty(t.embedWidth)&&t.embedHeight&&!WPSVPUtils.isEmpty(t.embedHeight)){var kr=t.embedSrc||window.location.href,Sr=ke.find(".wpsvp-embed-code").text('<iframe width="'+t.embedWidth+'" height="'+t.embedHeight+'" src="'+kr+'" frameborder="0" scrolling="no" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>');ke.find(".wpsvp-embed-copy").on("click",function(){WPSVPUtils.selectText(Sr[0]);try{document.execCommand("copy"),oa.text(oa.attr("data-copied-text"))}catch(e){alert("Please press Ctrl/Cmd+C to copy code!")}na.text(na.attr("data-copy-text"))})}ke.find(".wpsvp-embed-inner");var Cr=new WPSVPPlaylistManager(t);e(Cr).on("WPSVPPlaylistManager.COUNTER_READY",function(t,a){tn=!1,Ui=Di=null,qo=!1,Lo=zo=Fo=null,Fs=[],Ke.find(".wpsvp-ad-indicator").remove(),Ko=!1,Ke.find(".wpsvp-chapter-indicator").remove(),aa.css({display:"none",opacity:0}),Ls=[],Do=!1,Xe.removeClass("wpsvp-seekbar-chapters"),$o=!1,Zo=null,function(){if(Li&&C(),Wi=Cr.getCounter(),(Li=Re.children(".wpsvp-playlist-item").eq(Wi)).length){if(Li.addClass("wpsvp-playlist-item-selected"),fi&&0<ji){if(!uo)if("scroll"==Si)if("undefined"!=typeof mCustomScrollbar)"horizontal"==Ci?Ee.mCustomScrollbar("scrollTo",parseInt(Li.position().left),{scrollInertia:500}):Ee.mCustomScrollbar("scrollTo",parseInt(Li.position().top),{scrollInertia:500});else var t=setInterval(function(){"undefined"!=typeof mCustomScrollbar&&(clearInterval(t),"horizontal"==Ci?Ee.mCustomScrollbar("scrollTo",parseInt(Li.position().left),{scrollInertia:500}):Ee.mCustomScrollbar("scrollTo",parseInt(Li.position().top),{scrollInertia:500}))},500);else if("buttons"==Si){if("horizontal"==Ci)var a=Ce.width(),i=Re.width(),n="translateX";else a=Ce.height(),i=Re.height(),n="translateY";if(i<a)return;St.show(),Ct.show();var o=-Re.find(".wpsvp-playlist-item").index(Li)*Ys;0<=o?(o=0,St.hide()):o<=a-i&&(o=a-i,Ct.hide()),Zn=o,Re.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){$n=!1}).css({"-webkit-transform":n+"("+o+"px)","-ms-transform":n+"("+o+"px)",transform:n+"("+o+"px)"})}uo=!1}e(ws).trigger("playlistItemDisabled",{instance:ws,instanceName:Ca})}}(),z()}).on("WPSVPPlaylistManager.RANDOM_CHANGE",function(e,t){t?wt.addClass("wpsvp-contr-btn-hover"):wt.removeClass("wpsvp-contr-btn-hover")}).on("WPSVPPlaylistManager.LOOP_CHANGE",function(e,t){t?gt.addClass("wpsvp-contr-btn-hover"):gt.removeClass("wpsvp-contr-btn-hover")}),window.onYouTubeIframeAPIReady=function(){},bs.on("resize",function(){if(!vs)return!1;Vi&&clearTimeout(Vi),Vi=setTimeout(be,100)}),this.playMedia=function(){if(!vs||!so||po)return!1;if("audio"==so){if(Zi){var e=Zi.play();void 0!==e&&e.then(function(e){}).catch(function(e){vt.show()})}}else"video"==so?en?(en.remove(),en=null,z()):an&&(void 0!==(e=an.play())&&e.then(function(e){}).catch(function(e){vt.show()})):"youtube"==so?ln.playVideo():"vimeo"==so&&gn.play();po=!0},this.pauseMedia=function(){if(!vs||!so||!po)return!1;"audio"==so?Zi&&Zi.pause():"video"==so?an&&an.pause():"youtube"==so?ln.pauseVideo():"vimeo"==so&&gn.pause(),po=!1},this.togglePlayback=function(){if(!vs||!so)return!1;if(!To)if("audio"==so){if(en&&!_i)vt.hide(),ft.show(),z();else if(Zi)if(Zi.paused){var e=Zi.play();void 0!==e&&e.then(function(e){}).catch(function(e){vt.show()})}else Zi.pause()}else"video"==so?en&&!_i?(en.remove(),en=null,vt.hide(),ft.show(),z()):an&&(an.paused?void 0!==(e=an.play())&&e.then(function(e){}).catch(function(e){vt.show()}):an.pause()):"youtube"==so?en&&!_i?(en.remove(),en=null,vt.hide(),z()):1==(e=ln.getPlayerState())?ln.pauseVideo():2==e?ln.playVideo():(-1==e||5==e||0==e)&&ln.playVideo():"vimeo"==so&&(en&&!_i?(en.remove(),en=null,vt.hide(),z()):gn.getPaused().then(function(e){e?gn.play():gn.pause()}))},this.nextMedia=function(){if(!vs)return!1;he()},this.previousMedia=function(){if(!vs)return!1;fe()},this.setVolume=function(e){if(!vs)return!1;0>e?e=0:1<e&&(e=1),l(e)},this.toggleMute=function(){if(!vs)return!1;s()},this.seek=function(e){if(!vs||!so)return!1;"audio"==so?Zi.currentTime=e:"video"==so?an.currentTime=e:"youtube"==so?ln.seekTo(e):"vimeo"==so&&gn.setCurrentTime(e)},this.seekBackward=function(e){if(!vs||!so)return!1;if("audio"==so){if(Zi)try{Zi.currentTime=Math.max(Zi.currentTime-(e||wi),0)}catch(e){console.log(e)}}else if("video"==so){if(an)try{an.currentTime=Math.max(an.currentTime-(e||wi),0)}catch(e){console.log(e)}}else if("youtube"==so){var t=Math.max(ln.getCurrentTime()-(e||wi),0);ln.seekTo(t)}else"vimeo"==so&&gn.getCurrentTime().then(function(t){gn.setCurrentTime(Math.max(t-(e||wi),0))})},this.seekForward=function(e){if(!vs||!so)return!1;if("audio"==so){if(Zi)try{Zi.currentTime=Math.min(Zi.currentTime+(e||wi),Zi.duration)}catch(e){console.log(e)}}else if("video"==so){if(an)try{an.currentTime=Math.min(an.currentTime+(e||wi),an.duration)}catch(e){console.log(e)}}else if("youtube"==so){var t=Math.min(ln.getCurrentTime()+(e||wi),ln.getDuration());ln.seekTo(t)}else"vimeo"==so&&(0!=Cs&&0!=Es?(t=Math.min(Es+(e||wi),Cs),gn.setCurrentTime(t)):gn.getCurrentTime().then(function(t){gn.getDuration().then(function(a){gn.setCurrentTime(Math.min(t+(e||wi),a))})}))},this.getCurrentTime=function(){return!(!vs||!so)&&("audio"==so?Zi.currentTime:"video"==so?an.currentTime:"youtube"==so?ln.getCurrentTime():"vimeo"==so?Es:void 0)},this.getDuration=function(){return!(!vs||!so)&&("audio"==so?Zi.duration:"video"==so?an.duration:"youtube"==so?ln.getDuration():"vimeo"==so?Cs:void 0)},this.getLoadProgress=function(){if(!vs||!so)return!1;var e;if("audio"==so){if(void 0!==Zi.buffered&&0!=Zi.buffered.length){try{var t=Zi.buffered.end(Zi.buffered.length-1)}catch(e){}isNaN(t)||(e=t/Math.floor(Zi.duration))}}else if("video"==so){if(void 0!==an.buffered&&0!=an.buffered.length){try{t=an.buffered.end(an.buffered.length-1)}catch(e){}isNaN(t)||(e=t/Math.floor(an.duration))}}else"youtube"==so?e=ln.getVideoLoadedFraction():"vimeo"==so&&(e=Rs);return e},this.togglePlaylist=function(e){if(!vs)return!1;Pe(e)},this.toggleRandom=function(e){if(!vs||void 0===Cr)return!1;Cr.setRandom(e)},this.toggleLoop=function(e){if(!vs||void 0===Cr)return!1;Cr.setLooping(e)},this.setPlaybackRate=function(e){if(!vs||!so)return!1;Ui.playbackRate=e,"audio"==so?Zi&&(Zi.playbackRate=e):"video"==so?an&&(an.playbackRate=e):"youtube"==so?ln.setPlaybackRate(e):"vimeo"==so&&gn.setPlaybackRate(e).then(function(e){}).catch(function(e){console.log(e.name)})},this.setPlaybackQuality=function(e){if(!vs||!so)return!1;"image"==so||"audio"==so||"video"==so?"hls"==ro&&"dash"==ro||(Ui.quality=e,f(e),z(!0)):"youtube"==so&&ln.setPlaybackQuality(e)},this.toggleInfo=function(e){if(!vs||!so)return!1;_(e)},this.toggleShare=function(e){if(!vs||!so)return!1;W(e)},this.toggleFullscreen=function(){if(!vs)return!1;Zs.click()},this.openLightbox=function(){if(!vs)return!1;so&&pe(),Rt.css("display","block"),setTimeout(function(){clearTimeout(this),Rt.css("opacity",1)},50)},this.closeLightbox=function(){if(!vs)return!1;Rt.one("transitionend",function(){Rt.css("display","none")}).css("opacity",0),so&&pe()},this.destroyMedia=function(){if(!vs)return!1;ue()},this.destroyPlaylist=function(){if(!vs)return!1;ce()},this.loadPlaylist=function(e){return!(!vs||gs)&&("string"!=typeof e?(alert("Invalid value loadPlaylist!"),!1):Ir!=e&&void N(e))},this.setAutoPlay=function(e){Va=e},this.inputMedia=function(e){return!(!vs||gs)&&(void 0===e?(alert("inputMedia method requires data parameter. inputMedia failed."),!1):(Li&&C(),Cr.reSetCounter(),Ai=e,void z()))},this.loadMedia=function(e){return!(!vs||gs||!go)&&("number"!=typeof e?(alert("Invalid value loadMedia!"),!1):(0>e?e=0:e>ji-1&&(e=ji-1),void Cr.processPlaylistRequest(e)))},this.addTrack=function(t,a,i,n){if(!vs||gs)return!1;if(void 0===t)return alert("addTrack method requires format parameter. AddTrack failed."),!1;if(void 0===a)return alert("addTrack method requires track parameter. AddTrack failed."),!1;_o=!1,void 0!==i&&(_o=i),i=1;var o=!1;if("string"!=typeof a&&"[object Object]"!==Object.prototype.toString.call(a)){if("[object Array]"!==Object.prototype.toString.call(a))return alert("addTrack method requires track as string, object or array parameter. AddTrack failed."),!1;i=a.length,o=!0}if(Mo=n,Io=!1,Vo=!0,go)if(void 0!==Mo){if(0>Mo||Mo>ji)return alert('Invalid position to insert track to. Position number "'+n+'" doesnt exist. AddTrack failed.'),!1;Mo==ji&&(Io=!0)}else Io=!0,Mo=ji;else{if(void 0!==Mo){if(0!=Mo)return alert('Invalid position to insert track to. Position number "'+n+'" doesnt exist. AddTrack failed.'),!1}else Mo=0;Io=!0}for(gs=!0,mt.show(),yo=-1,Os=[],Ns=[],n=0;n<i;n++){var s=o?a[n]:a;s="html"==t?e(e.parseHTML(s)):s,Ns.push(s)}ji=Ns.length,Wo=!1,go||(Wo=!0),go="exist",Mr=!1,A()},this.removeTrack=function(t){if(!vs||gs)return!1;if(0!=ji){if(void 0===t)return alert("removeTrack method requires id parameter. removeTrack failed."),!1;if("string"==typeof t){var a=!1;if(Re.find(".wpsvp-playlist-item").each(function(){if(e(this).find(".wpsvp-playlist-title").html()==t)return i=e(this),t=Re.find(".wpsvp-playlist-item").index(i),a=!0,!1}),!a)return alert('Track with title "'+t+'" doesnt exist. RemoveTrack failed.'),!1}else{if("number"!=typeof t)return alert("removeTrack method requires either a id number or a track title to remove. removeTrack failed."),!1;if(0>(t=parseInt(t,10))||t>ji-1)return alert('Invalid id number. Track number  "'+t+'" doesnt exist. RemoveTrack failed.'),!1;var i=Re.find(".wpsvp-playlist-item").eq(t)}if(i.remove(),0<(ji=Re.children(".wpsvp-playlist-item").length)){var n=Cr.getCounter();t==n?(pe(),Cr.setPlaylistItems(ji)):(Cr.setPlaylistItems(ji,!1),t<n&&Cr.reSetCounter(Cr.getCounter()-1)),ka&&Ti&&xe()}else ce()}},this.setLoadMore=function(e){Vr=e},this.loadMore=function(){if(!gs){gs=!0,mt.show(),Ii=!0,Os=[];var e=Mi;"youtube"==e?(sn||U("youtube"),sn.resumeLoad(_r)):"vimeo"==e&&(mn||U("vimeo"),mn.resumeLoad(_r))}},this.getTitle=function(){return!(!vs||!Ui)&&(Ui.title||Ui.domTitle||"")},this.getMediaPlaying=function(){return!!vs&&po},this.getPlaylistLength=function(){return!!vs&&ji},this.getSetupDone=function(){return vs},this.getSettings=function(){return t},this.getActiveItemId=function(){return!!vs&&(void 0!==Cr?Cr.getCounter():null)},this.adSkip=function(){if(!vs||!Bo||!Go)return!1;ca&&ca.trigger("click")};var Er=WPSVPUtils.getUrlParameter();if(Er.t&&(t.playbackPositionTime=Er.t),Er.media_id&&(t.activeItem=Er.media_id),ni)if(oi){if(ka&&localStorage.getItem(ni)){var Rr=JSON.parse(localStorage.getItem(ni));t.playbackPositionTime=Rr.resumeTime,Ma=Rr.volume,t.activeItem=Rr.activeItem,localStorage.removeItem(ni)}}else localStorage.removeItem(ni);if(ka)if(Ti){if(t.activePlaylist&&!WPSVPUtils.isEmpty(t.activePlaylist)&&localStorage.getItem(Pi))if((Rr=JSON.parse(localStorage.getItem(Pi))).date+Ti>Math.floor(Date.now()/1e3))if(Rr.activePlaylist==t.activePlaylist){var Ir=t.activePlaylist;t.activePlaylist="",Re.html(Rr.playlist);var Mr=!0;if(Rr.loadMoreOnTotalScroll){var Vr=Rr.loadMoreOnTotalScroll,_r=Rr.nextPageToken,Wr=Rr.loadMoreItem;Rr.channelId&&(Wr=Wr.replace(/youtube_user/g,"youtube_channel").replace(/data-path="(.*?)"/g,"data-path='"+Rr.channelId+"'"))}}else localStorage.removeItem(Pi);else localStorage.removeItem(Pi)}else localStorage.removeItem(Pi);return this.deletePlaylistCache=function(){ka&&localStorage.removeItem(Pi)},t.activePlaylist&&!WPSVPUtils.isEmpty(t.activePlaylist)?N(t.activePlaylist):(console.log("setupFromDom"),function(){if(Re.find(".wpsvp-global-playlist-data").length&&((bo=Re.find(".wpsvp-global-playlist-data").remove()).find(".wpsvp-ad-section").length&&(jo=bo.find(".wpsvp-ad-section")),bo.find(".wpsvp-annotation-section").length&&(es=bo.find(".wpsvp-annotation-section")),null!=bo.attr("data-upnext-time")&&(Po=parseInt(bo.attr("data-upnext-time"),10)),null!=bo.attr("data-pwd")&&(as=bo.attr("data-pwd")),null!=bo.attr("data-display-poster-on-mobile")&&xa&&(To=!0,Oa=Wa=_a=Va=!1)),ji=Re.children(".wpsvp-playlist-item").length,console.log("playlistLength: ",ji),0<ji){Re.find(".wpsvp-playlist-item").each(function(){var t=e(this).on("click",x);xa||t.on("mouseenter",k).on("mouseleave",S)}),Cr.setPlaylistItems(ji),go="exist","horizontal"==Ci&&Re.width(ji*Ys);var a=[];Re.find(".wpsvp-thumbimg:not(.wpsvp-visible)").each(function(){a.push(e(this))});var i,n=0,o=a.length;for(i=0;i<o;i++)setTimeout(function(){clearTimeout(this),a[n].addClass("wpsvp-visible"),n++},50+50*i);t.truncatePlaylistDescription&&(void 0!==e.fn.dotdotdot?Re.find(".wpsvp-playlist-info:not(.is-truncated)").each(function(){e(this).dotdotdot({watch:t.truncateWatch})}):((o=document.createElement("script")).type="text/javascript",o.src=WPSVPUtils.qualifyURL(Sa+"js/scripts/jquery.dotdotdot.min.js"),o.onload=o.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||Re.find(".wpsvp-playlist-info:not(.is-truncated)").each(function(){e(this).dotdotdot({watch:t.truncateWatch})})},o.onerror=function(){alert("Error loading "+this.src)},(i=document.getElementsByTagName("script")[0]).parentNode.insertBefore(o,i)))}vs||(vs=!0,La&&((o=document.createElement("script")).type="text/javascript",o.src=WPSVPUtils.qualifyURL(Sa+"js/scripts/jquery-ui.min.js"),o.onload=o.onreadystatechange=function(){if(!this.readyState||"complete"==this.readyState){var e=document.createElement("script");e.type="text/javascript",e.src=WPSVPUtils.qualifyURL(Sa+"js/scripts/jquery.ui.touch-punch.min.js"),e.onload=e.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||Re.sortable({helper:"clone"})},e.onerror=function(){alert("Error loading "+this.src)};var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}},o.onerror=function(){alert("Error loading "+this.src)},(i=document.getElementsByTagName("script")[0]).parentNode.insertBefore(o,i)),fi&&!Oo&&L(),xa||We.on("mouseenter",E).on("mouseleave",R),be(),e(ws).trigger("setupDone",{instance:ws,instanceName:Ca}),ke.css("opacity",1),Ba&&(ao=WPSVPUtils.getElementOffsetTop(ke[0]),bs.on(xs,function(){io||(io=!0,H(),setTimeout(function(){io=!1},100))}))),mt.hide(),gs=!1,e(ws).trigger("playlistEndLoad",{instance:ws,instanceName:Ca}),(o=t.activeItem)>ji-1&&(o=ji-1),-1<o&&Cr.setCounter(o,!1),wo=!0}()),this}}(jQuery);